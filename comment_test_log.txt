2025-05-06 14:25:28,730 - INFO - Starting Instagram comment detection test
2025-05-06 14:25:32,403 - INFO - Driver initialized successfully
2025-05-06 14:26:04,356 - INFO - Opening post URL: https://www.instagram.com/reel/DHBQ7J1R7Zt/?igsh=MWkwbGxkdGRrcTNybg==
2025-05-06 14:26:09,986 - INFO - Attempting to open comments section...
2025-05-06 14:26:09,986 - INFO - Looking for comments button...
2025-05-06 14:26:10,886 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 14:26:12,498 - INFO - Tapped on comments button
2025-05-06 14:26:15,013 - INFO - Comments section opened successfully
2025-05-06 14:26:18,481 - INFO - Analyzing UI for comment elements...
2025-05-06 14:26:19,852 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 14:26:20,021 - INFO - Found 1 collection views
2025-05-06 14:26:20,130 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 14:26:20,409 - INFO - Collection view 0 has 1 cells
2025-05-06 14:26:20,535 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 14:26:21,164 - INFO -   Cell 0 has 3 text elements
2025-05-06 14:26:21,248 - INFO -     Text element 0: 'More, button, tap to see the whole caption'
2025-05-06 14:26:21,341 - INFO -     Text element 1: '1899 comments'
2025-05-06 14:26:21,439 - INFO -     Text element 2: '144109 shares'
2025-05-06 14:26:21,937 - INFO - Found 5 total text elements in the UI
2025-05-06 14:26:22,395 - INFO - Testing complete. Check the logs and debug_screenshots folder for results.
2025-05-06 14:26:57,381 - INFO - Starting Instagram comment detection test
2025-05-06 14:26:59,604 - INFO - Driver initialized successfully
2025-05-06 14:27:01,897 - INFO - Opening post URL: (venv) shahin.zangenehpour@Shahins-MacBook-Pro-3 fetch-bites-multi-agent % python comment_detection_tester.py 
2025-05-06 14:27:01,904 - ERROR - Test failed: Message: An unknown server-side error occurred while processing the command. Original error: Url or Uri must start with <scheme>://
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Url or Uri must start with <scheme>://
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at /opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:514:15
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at /opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:284:15
    at param (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:365:14)
    at param (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:421:3)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:280:10)
    at logger (/opt/homebrew/lib/node_modules/appium/node_modules/morgan/index.js:144:5)
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:328:13)
    at /opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:346:12)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:280:10)
    at /opt/homebrew/lib/node_modules/appium/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
    at invokeCallback (/opt/homebrew/lib/node_modules/appium/node_modules/raw-body/index.js:238:16)
    at done (/opt/homebrew/lib/node_modules/appium/node_modules/raw-body/index.js:227:7)
2025-05-06 14:27:32,580 - INFO - Starting Instagram comment detection test
2025-05-06 14:27:34,734 - INFO - Driver initialized successfully
2025-05-06 14:27:38,569 - INFO - Opening post URL: https://www.instagram.com/reel/DHBQ7J1R7Zt/?igsh=MWkwbGxkdGRrcTNybg==
2025-05-06 14:27:44,165 - INFO - Attempting to open comments section...
2025-05-06 14:27:44,165 - INFO - Looking for comments button...
2025-05-06 14:27:45,071 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 14:27:46,724 - INFO - Tapped on comments button
2025-05-06 14:27:49,142 - INFO - Comments section opened successfully
2025-05-06 14:27:52,611 - INFO - Analyzing UI for comment elements...
2025-05-06 14:27:53,990 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 14:27:54,139 - INFO - Found 1 collection views
2025-05-06 14:27:54,247 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 14:27:54,524 - INFO - Collection view 0 has 1 cells
2025-05-06 14:27:54,635 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 14:27:55,036 - INFO -   Cell 0 has 3 text elements
2025-05-06 14:27:55,125 - INFO -     Text element 0: 'More, button, tap to see the whole caption'
2025-05-06 14:27:55,220 - INFO -     Text element 1: '1899 comments'
2025-05-06 14:27:55,307 - INFO -     Text element 2: '144109 shares'
2025-05-06 14:27:55,728 - INFO - Found 5 total text elements in the UI
2025-05-06 14:27:56,184 - INFO - Testing complete. Check the logs and debug_screenshots folder for results.
2025-05-06 14:36:12,505 - INFO - Starting Instagram comment detection test
2025-05-06 14:36:14,832 - INFO - Driver initialized successfully
2025-05-06 14:36:17,944 - INFO - Opening post URL: https://www.instagram.com/reel/DHBQ7J1R7Zt/?igsh=MWkwbGxkdGRrcTNybg==
2025-05-06 14:36:23,529 - INFO - Attempting to open comments section...
2025-05-06 14:36:23,529 - INFO - Looking for comments button...
2025-05-06 14:36:24,666 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 14:36:26,338 - INFO - Tapped on comments button
2025-05-06 14:36:28,920 - INFO - Comments section opened successfully
2025-05-06 14:36:32,373 - INFO - Analyzing UI for comment elements...
2025-05-06 14:36:33,833 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 14:36:34,036 - INFO - Found 1 collection views
2025-05-06 14:36:34,157 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 14:36:34,508 - INFO - Collection view 0 has 1 cells
2025-05-06 14:36:34,660 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 14:36:35,102 - INFO -   Cell 0 has 3 text elements
2025-05-06 14:36:35,187 - INFO -     Text element 0: 'More, button, tap to see the whole caption'
2025-05-06 14:36:35,297 - INFO -     Text element 1: '1899 comments'
2025-05-06 14:36:35,415 - INFO -     Text element 2: '144196 shares'
2025-05-06 14:36:35,912 - INFO - Found 5 total text elements in the UI
2025-05-06 14:36:36,359 - INFO - Testing complete. Check the logs and debug_screenshots folder for results.
2025-05-06 14:37:52,283 - INFO - Starting Instagram comment detection test
2025-05-06 14:37:54,486 - INFO - Driver initialized successfully
2025-05-06 14:37:55,715 - INFO - Opening post URL: import logging
2025-05-06 14:37:55,719 - ERROR - Test failed: Message: An unknown server-side error occurred while processing the command. Original error: Url or Uri must start with <scheme>://
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Url or Uri must start with <scheme>://
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at /opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:514:15
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at /opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:284:15
    at param (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:365:14)
    at param (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:421:3)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:280:10)
    at logger (/opt/homebrew/lib/node_modules/appium/node_modules/morgan/index.js:144:5)
    at Layer.handle [as handle_request] (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:328:13)
    at /opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:346:12)
    at next (/opt/homebrew/lib/node_modules/appium/node_modules/express/lib/router/index.js:280:10)
    at /opt/homebrew/lib/node_modules/appium/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
    at invokeCallback (/opt/homebrew/lib/node_modules/appium/node_modules/raw-body/index.js:238:16)
    at done (/opt/homebrew/lib/node_modules/appium/node_modules/raw-body/index.js:227:7)
2025-05-06 14:38:52,947 - INFO - Starting Instagram comment detection test
2025-05-06 14:38:55,046 - INFO - Driver initialized successfully
2025-05-06 14:39:06,181 - INFO - Opening post URL: https://www.instagram.com/reel/DHBQ7J1R7Zt/?igsh=MWkwbGxkdGRrcTNybg==
2025-05-06 14:39:11,793 - INFO - Attempting to open comments section...
2025-05-06 14:39:11,794 - INFO - Looking for comments button...
2025-05-06 14:39:12,665 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 14:39:14,257 - INFO - Tapped on comments button
2025-05-06 14:39:16,825 - INFO - Comments section opened successfully
2025-05-06 14:39:20,264 - INFO - Analyzing UI for comment elements...
2025-05-06 14:39:21,533 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 14:39:21,693 - INFO - Found 1 collection views
2025-05-06 14:39:21,789 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 14:39:22,028 - INFO - Collection view 0 has 1 cells
2025-05-06 14:39:22,124 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 14:39:22,606 - INFO -   Cell 0 has 3 text elements
2025-05-06 14:39:22,677 - INFO -     Text element 0: 'More, button, tap to see the whole caption'
2025-05-06 14:39:22,760 - INFO -     Text element 1: '1899 comments'
2025-05-06 14:39:22,814 - INFO -     Text element 2: '144196 shares'
2025-05-06 14:39:23,125 - INFO - Found 5 total text elements in the UI
2025-05-06 14:39:23,562 - INFO - Testing complete. Check the logs and debug_screenshots folder for results.
2025-05-06 14:42:09,429 - INFO - Starting Instagram comment detection test
2025-05-06 14:42:12,640 - INFO - Driver initialized successfully
2025-05-06 14:42:17,523 - INFO - Opening post URL: https://www.instagram.com/reel/DHBQ7J1R7Zt/
2025-05-06 14:42:23,304 - INFO - Attempting to open comments section...
2025-05-06 14:42:23,304 - INFO - Looking for comments button...
2025-05-06 14:42:24,346 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 14:42:26,177 - INFO - Tapped on comments button
2025-05-06 14:42:28,569 - INFO - Comments section opened successfully
2025-05-06 14:42:31,942 - INFO - Analyzing UI for comment elements...
2025-05-06 14:42:34,462 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 14:42:34,680 - INFO - Found 2 collection views
2025-05-06 14:42:34,766 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 14:42:34,989 - INFO - Collection view 0 has 1 cells
2025-05-06 14:42:35,070 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 14:42:35,561 - INFO -   Cell 0 has 3 text elements
2025-05-06 14:42:35,628 - INFO -     Text element 0: 'More, button, tap to see the whole caption'
2025-05-06 14:42:35,690 - INFO -     Text element 1: '1899 comments'
2025-05-06 14:42:35,747 - INFO -     Text element 2: '144196 shares'
2025-05-06 14:42:35,814 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-06 14:42:36,023 - INFO - Collection view 1 has 1 cells
2025-05-06 14:42:36,105 - INFO -   Cell 0: Size 428x769 at position (0,335)
2025-05-06 14:42:36,348 - INFO -   Cell 0 has 2 text elements
2025-05-06 14:42:36,408 - INFO -     Text element 0: 'Reply'
2025-05-06 14:42:36,465 - INFO -     Text element 1: 'yummyliciousdelicious said, Recipe
For focaccia do...'
2025-05-06 14:42:36,465 - INFO -     POTENTIAL RECIPE FOUND in collection view 1, cell 0, text element 1
2025-05-06 14:42:36,465 - INFO -     Text length: 1548 characters
2025-05-06 14:42:36,465 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv1_cell0_elem1.txt
2025-05-06 14:42:37,035 - INFO - Found 7 total text elements in the UI
2025-05-06 14:42:37,358 - INFO - POTENTIAL RECIPE FOUND in standalone text element 4
2025-05-06 14:42:37,358 - INFO - Text length: 1548 characters
2025-05-06 14:42:37,358 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem4.txt
2025-05-06 14:42:37,498 - INFO - Testing complete. Check the logs and debug_screenshots folder for results.
2025-05-06 16:33:48,947 - INFO - Starting Instagram Recipe Extractor
2025-05-06 16:33:48,947 - INFO - Initializing Appium driver...
2025-05-06 16:33:52,281 - INFO - Driver initialized successfully.
2025-05-06 16:33:52,281 - INFO - Loaded memory for 4 users
2025-05-06 16:33:52,281 - INFO - Waiting for Instagram app to load...
2025-05-06 16:33:57,286 - INFO - Navigating to DMs...
2025-05-06 16:34:01,367 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-06 16:34:01,785 - INFO - DM inbox indicator found successfully
2025-05-06 16:34:01,785 - INFO - DM inbox state verified.
2025-05-06 16:34:01,785 - INFO - Starting message scanning loop
2025-05-06 16:34:06,804 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 16:34:07,321 - INFO - Found 1 unread thread(s) using XPath
2025-05-06 16:34:07,322 - INFO - Found 1 thread(s) in total
2025-05-06 16:34:07,322 - INFO - Processing thread 1 of 1
2025-05-06 16:34:07,930 - INFO - Identified user: docteurzed
2025-05-06 16:34:08,765 - INFO - Direct click on thread successful
2025-05-06 16:34:11,125 - INFO - Using fixed screen scale factor: 3.00
2025-05-06 16:34:11,125 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:34:11,178 - INFO - Saved cropped post image for docteurzed
2025-05-06 16:34:13,864 - INFO - Verifying preview element using XPath...
2025-05-06 16:34:14,368 - INFO - Found preview element with rect: {'y': -59, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:34:14,783 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-06 16:34:14,783 - INFO - User docteurzed is already onboarded
2025-05-06 16:34:14,783 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-06 16:34:23,190 - INFO - Checking for shared recipe post...
2025-05-06 16:34:23,900 - INFO - Found a shared post, opening it...
2025-05-06 16:34:24,767 - INFO - Tapped on post with mobile: tap command
2025-05-06 16:34:35,665 - INFO - Checking if caption needs expansion...
2025-05-06 16:34:35,980 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-06 16:34:35,980 - INFO - Tapping on 'More' to expand caption...
2025-05-06 16:34:36,787 - INFO - Caption expanded successfully
2025-05-06 16:34:38,792 - INFO - Extracting recipe caption...
2025-05-06 16:34:39,757 - INFO - Successfully extracted caption (305 chars)
2025-05-06 16:34:39,757 - INFO - Caption saved to captions/caption_docteurzed_1746574479.txt
2025-05-06 16:34:39,757 - INFO - Extracting caption and comments using unified parser...
2025-05-06 16:34:39,757 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-06 16:34:39,757 - INFO - Trying to extract recipe from pinned comment block...
2025-05-06 16:34:39,757 - INFO - Looking for comments button...
2025-05-06 16:34:40,706 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 16:34:42,455 - INFO - Tapped on comments button
2025-05-06 16:34:44,806 - INFO - Analyzing UI for comment elements...
2025-05-06 16:34:48,296 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 16:34:48,556 - INFO - Found 2 collection views
2025-05-06 16:34:48,664 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 16:34:48,951 - INFO - Collection view 0 has 1 cells
2025-05-06 16:34:49,034 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 16:34:49,517 - INFO -   Cell 0 has 4 text elements
2025-05-06 16:34:49,584 - INFO -     Text element 0: '1899 comments'
2025-05-06 16:34:49,654 - INFO -     Text element 1: '144220 shares'
2025-05-06 16:34:49,728 - INFO -     Text element 2: 'March 10'
2025-05-06 16:34:49,786 - INFO -     Text element 3: 'Lemon and Blueberry Focaccia!🍋🫐 RECIPE pinned in t...'
2025-05-06 16:34:49,786 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-06 16:34:49,786 - INFO -     Text length: 305 characters
2025-05-06 16:34:49,786 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-06 16:34:49,863 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-06 16:34:50,047 - INFO - Collection view 1 has 1 cells
2025-05-06 16:34:50,120 - INFO -   Cell 0: Size 428x769 at position (0,335)
2025-05-06 16:34:50,535 - INFO -   Cell 0 has 2 text elements
2025-05-06 16:34:50,607 - INFO -     Text element 0: 'Reply'
2025-05-06 16:34:50,681 - INFO -     Text element 1: 'yummyliciousdelicious said, Recipe
For focaccia do...'
2025-05-06 16:34:50,681 - INFO -     POTENTIAL RECIPE FOUND in collection view 1, cell 0, text element 1
2025-05-06 16:34:50,681 - INFO -     Text length: 1548 characters
2025-05-06 16:34:50,682 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv1_cell0_elem1.txt
2025-05-06 16:34:51,781 - INFO - Found 12 total text elements in the UI
2025-05-06 16:34:52,482 - INFO - POTENTIAL RECIPE FOUND in standalone text element 7
2025-05-06 16:34:52,482 - INFO - Text length: 1548 characters
2025-05-06 16:34:52,483 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem7.txt
2025-05-06 16:34:52,772 - INFO - POTENTIAL RECIPE FOUND in standalone text element 11
2025-05-06 16:34:52,772 - INFO - Text length: 305 characters
2025-05-06 16:34:52,772 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem11.txt
2025-05-06 16:34:52,773 - INFO - No suitable comment text found for Claude fallback.
2025-05-06 16:34:52,773 - ERROR - No recipe found in caption or pinned comment.
2025-05-06 16:34:52,773 - INFO - Attempting to exit post/comment view...
2025-05-06 16:34:58,687 - WARNING - Skipped sending fallback message — not in conversation thread.
2025-05-06 16:34:58,687 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:35:02,149 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:35:02,149 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:35:02,822 - INFO - Strict DM inbox verification successful: DM threads found.
2025-05-06 16:35:08,288 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:35:11,887 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:35:11,887 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:35:15,274 - INFO - Waiting for DM inbox indicator, timeout: 5s
2025-05-06 16:35:19,683 - INFO - DM inbox indicator found successfully
2025-05-06 16:35:19,684 - INFO - DM inbox state verified.
2025-05-06 16:35:20,687 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 16:35:20,951 - INFO - Found 0 thread(s) in total
2025-05-06 16:35:20,952 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-06 16:40:40,705 - INFO - Starting Instagram Recipe Extractor
2025-05-06 16:40:40,706 - INFO - Initializing Appium driver...
2025-05-06 16:40:43,920 - INFO - Driver initialized successfully.
2025-05-06 16:40:43,920 - INFO - Loaded memory for 4 users
2025-05-06 16:40:43,920 - INFO - Waiting for Instagram app to load...
2025-05-06 16:40:48,922 - INFO - Navigating to DMs...
2025-05-06 16:40:53,629 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-06 16:40:54,109 - INFO - DM inbox indicator found successfully
2025-05-06 16:40:54,109 - INFO - DM inbox state verified.
2025-05-06 16:40:54,109 - INFO - Starting message scanning loop
2025-05-06 16:40:59,131 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 16:40:59,483 - INFO - Found 1 unread thread(s) using XPath
2025-05-06 16:40:59,483 - INFO - Found 1 thread(s) in total
2025-05-06 16:40:59,483 - INFO - Processing thread 1 of 1
2025-05-06 16:40:59,922 - INFO - Identified user: docteurzed
2025-05-06 16:41:00,724 - INFO - Direct click on thread successful
2025-05-06 16:41:03,348 - INFO - Using fixed screen scale factor: 3.00
2025-05-06 16:41:03,349 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:41:03,393 - INFO - Saved cropped post image for docteurzed
2025-05-06 16:41:06,259 - INFO - Verifying preview element using XPath...
2025-05-06 16:41:06,831 - INFO - Found preview element with rect: {'y': -88, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:41:07,220 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-06 16:41:07,220 - INFO - User docteurzed is already onboarded
2025-05-06 16:41:07,220 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-06 16:41:15,701 - INFO - Checking for shared recipe post...
2025-05-06 16:41:16,350 - INFO - Found a shared post, opening it...
2025-05-06 16:41:17,207 - INFO - Tapped on post with mobile: tap command
2025-05-06 16:41:27,983 - INFO - Checking if caption needs expansion...
2025-05-06 16:41:28,296 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-06 16:41:28,296 - INFO - Tapping on 'More' to expand caption...
2025-05-06 16:41:29,124 - INFO - Caption expanded successfully
2025-05-06 16:41:31,128 - INFO - Extracting recipe caption...
2025-05-06 16:41:32,132 - INFO - Successfully extracted caption (305 chars)
2025-05-06 16:41:32,133 - INFO - Caption saved to captions/caption_docteurzed_1746574892.txt
2025-05-06 16:41:32,133 - INFO - Extracting caption and comments using unified parser...
2025-05-06 16:41:32,133 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-06 16:41:32,133 - INFO - Trying to extract recipe from pinned comment block...
2025-05-06 16:41:32,133 - INFO - Looking for comments button...
2025-05-06 16:41:33,090 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 16:41:34,849 - INFO - Tapped on comments button
2025-05-06 16:41:37,218 - INFO - Analyzing UI for comment elements...
2025-05-06 16:41:40,784 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 16:41:41,057 - INFO - Found 2 collection views
2025-05-06 16:41:41,167 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 16:41:41,456 - INFO - Collection view 0 has 1 cells
2025-05-06 16:41:41,551 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 16:41:42,020 - INFO -   Cell 0 has 4 text elements
2025-05-06 16:41:42,082 - INFO -     Text element 0: '1899 comments'
2025-05-06 16:41:42,149 - INFO -     Text element 1: '144220 shares'
2025-05-06 16:41:42,209 - INFO -     Text element 2: 'March 10'
2025-05-06 16:41:42,279 - INFO -     Text element 3: 'Lemon and Blueberry Focaccia!🍋🫐 RECIPE pinned in t...'
2025-05-06 16:41:42,279 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-06 16:41:42,279 - INFO -     Text length: 305 characters
2025-05-06 16:41:42,280 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-06 16:41:42,349 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-06 16:41:42,551 - INFO - Collection view 1 has 1 cells
2025-05-06 16:41:42,629 - INFO -   Cell 0: Size 428x769 at position (0,335)
2025-05-06 16:41:42,920 - INFO -   Cell 0 has 2 text elements
2025-05-06 16:41:42,990 - INFO -     Text element 0: 'Reply'
2025-05-06 16:41:43,057 - INFO -     Text element 1: 'yummyliciousdelicious said, Recipe
For focaccia do...'
2025-05-06 16:41:43,057 - INFO -     POTENTIAL RECIPE FOUND in collection view 1, cell 0, text element 1
2025-05-06 16:41:43,057 - INFO -     Text length: 1548 characters
2025-05-06 16:41:43,058 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv1_cell0_elem1.txt
2025-05-06 16:41:44,043 - INFO - Found 12 total text elements in the UI
2025-05-06 16:41:44,718 - INFO - POTENTIAL RECIPE FOUND in standalone text element 7
2025-05-06 16:41:44,719 - INFO - Text length: 1548 characters
2025-05-06 16:41:44,719 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem7.txt
2025-05-06 16:41:44,984 - INFO - POTENTIAL RECIPE FOUND in standalone text element 11
2025-05-06 16:41:44,984 - INFO - Text length: 305 characters
2025-05-06 16:41:44,985 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem11.txt
2025-05-06 16:41:44,985 - INFO - No suitable comment text found for Claude fallback.
2025-05-06 16:41:44,985 - ERROR - No recipe found in caption or pinned comment.
2025-05-06 16:41:44,985 - INFO - Attempting to exit post/comment view...
2025-05-06 16:41:51,004 - WARNING - Skipped sending fallback message — not in conversation thread.
2025-05-06 16:41:51,004 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:41:54,526 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:41:54,526 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:41:55,248 - INFO - Strict DM inbox verification successful: DM threads found.
2025-05-06 16:42:00,716 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:42:04,304 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:42:04,304 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:42:07,723 - INFO - Waiting for DM inbox indicator, timeout: 5s
2025-05-06 16:42:13,257 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:42:13,257 - WARNING - DM inbox indicator not found within 5 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:42:14,727 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 16:42:15,034 - INFO - Found 0 thread(s) in total
2025-05-06 16:42:15,034 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-06 16:52:00,844 - INFO - Starting Instagram Recipe Extractor
2025-05-06 16:52:00,844 - INFO - Initializing Appium driver...
2025-05-06 16:52:04,068 - INFO - Driver initialized successfully.
2025-05-06 16:52:04,069 - INFO - Loaded memory for 4 users
2025-05-06 16:52:04,069 - INFO - Waiting for Instagram app to load...
2025-05-06 16:52:09,074 - INFO - Navigating to DMs...
2025-05-06 16:52:13,119 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-06 16:52:13,535 - INFO - DM inbox indicator found successfully
2025-05-06 16:52:13,535 - INFO - DM inbox state verified.
2025-05-06 16:52:13,535 - INFO - Starting message scanning loop
2025-05-06 16:52:18,558 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 16:52:19,023 - INFO - Found 1 unread thread(s) using XPath
2025-05-06 16:52:19,023 - INFO - Found 1 thread(s) in total
2025-05-06 16:52:19,025 - INFO - Processing thread 1 of 1
2025-05-06 16:52:19,563 - INFO - Identified user: docteurzed
2025-05-06 16:52:20,345 - INFO - Direct click on thread successful
2025-05-06 16:52:22,673 - INFO - Using fixed screen scale factor: 3.00
2025-05-06 16:52:22,673 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:52:22,719 - INFO - Saved cropped post image for docteurzed
2025-05-06 16:52:25,367 - INFO - Verifying preview element using XPath...
2025-05-06 16:52:25,779 - INFO - Found preview element with rect: {'y': -88, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 16:52:26,168 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-06 16:52:26,168 - INFO - User docteurzed is already onboarded
2025-05-06 16:52:26,168 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-06 16:52:34,515 - INFO - Checking for shared recipe post...
2025-05-06 16:52:35,266 - INFO - Found a shared post, opening it...
2025-05-06 16:52:36,292 - INFO - Tapped on post with mobile: tap command
2025-05-06 16:52:46,898 - INFO - Checking if caption needs expansion...
2025-05-06 16:52:47,224 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-06 16:52:47,225 - INFO - Tapping on 'More' to expand caption...
2025-05-06 16:52:48,071 - INFO - Caption expanded successfully
2025-05-06 16:52:50,076 - INFO - Extracting recipe caption...
2025-05-06 16:52:51,139 - INFO - Successfully extracted caption (305 chars)
2025-05-06 16:52:51,140 - INFO - Caption saved to captions/caption_docteurzed_1746575571.txt
2025-05-06 16:52:51,140 - INFO - Extracting caption and comments using unified parser...
2025-05-06 16:52:51,140 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-06 16:52:51,140 - INFO - Trying to extract recipe from pinned comment block...
2025-05-06 16:52:51,140 - INFO - Looking for comments button...
2025-05-06 16:52:52,050 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 16:52:53,846 - INFO - Tapped on comments button
2025-05-06 16:52:56,187 - INFO - Analyzing UI for comment elements...
2025-05-06 16:52:59,804 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 16:53:00,066 - INFO - Found 2 collection views
2025-05-06 16:53:00,172 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 16:53:00,463 - INFO - Collection view 0 has 1 cells
2025-05-06 16:53:00,566 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 16:53:01,004 - INFO -   Cell 0 has 4 text elements
2025-05-06 16:53:01,099 - INFO -     Text element 0: '1899 comments'
2025-05-06 16:53:01,180 - INFO -     Text element 1: '144220 shares'
2025-05-06 16:53:01,247 - INFO -     Text element 2: 'March 10'
2025-05-06 16:53:01,309 - INFO -     Text element 3: 'Lemon and Blueberry Focaccia!🍋🫐 RECIPE pinned in t...'
2025-05-06 16:53:01,309 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-06 16:53:01,309 - INFO -     Text length: 305 characters
2025-05-06 16:53:01,310 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-06 16:53:01,378 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-06 16:53:03,319 - INFO - Collection view 1 has 1 cells
2025-05-06 16:53:03,869 - INFO -   Cell 0: Size 428x769 at position (0,335)
2025-05-06 16:53:04,194 - INFO -   Cell 0 has 2 text elements
2025-05-06 16:53:04,274 - INFO -     Text element 0: 'Reply'
2025-05-06 16:53:04,347 - INFO -     Text element 1: 'yummyliciousdelicious said, Recipe
For focaccia do...'
2025-05-06 16:53:04,347 - INFO -     POTENTIAL RECIPE FOUND in collection view 1, cell 0, text element 1
2025-05-06 16:53:04,347 - INFO -     Text length: 1548 characters
2025-05-06 16:53:04,348 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv1_cell0_elem1.txt
2025-05-06 16:53:05,304 - INFO - Found 12 total text elements in the UI
2025-05-06 16:53:06,273 - INFO - POTENTIAL RECIPE FOUND in standalone text element 7
2025-05-06 16:53:06,273 - INFO - Text length: 1548 characters
2025-05-06 16:53:06,273 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem7.txt
2025-05-06 16:53:06,572 - INFO - POTENTIAL RECIPE FOUND in standalone text element 11
2025-05-06 16:53:06,572 - INFO - Text length: 305 characters
2025-05-06 16:53:06,572 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem11.txt
2025-05-06 16:53:06,573 - INFO - [DEBUG] Submitting extracted comment to Claude:

yummyliciousdelicious said, Recipe
For focaccia dough
740 grams all purpose flour
A pinch of salt
12 grams sugar
2 packets rapid rise instant yeast 
540 g warm water 

For blueberry compote 
3 cups blueberries
Juice of 1 lemon
1 tbsp water
3/4 cup white sugar
1 tsp vanilla extract 
Cornstarch slurry (1 tbsp corn starch + 1 1/2 tbsp water mixed together)

For crumble 
2/3 cup flour
2/3 cup sugar 
1/4 cup melted butter 

For icing
1 cup powdered sugar
Zest of 1 lemon
Juice of 1/2 lemon or more if you want a thinner consistency 
3 tbsp melted butter for the pan
First make your blueberry compote by combining blueberries, lemon juice, water, vanilla, and sugar in a skillet and cook on medium for 5 minutes until the berries have released their juice and the mixture is bubbling. Mix your corn starch and water then pour them into the blueberry mixture and cook for another couple minutes until thickened. Remove it from the heat and allow it to cool.
For the dough, mix all the dough ingredients together in a stand mixer (or by hand in a a bowl), and kneed for about 5-10 minutes until dough comes together and is smooth. You don’t need to bloom the yeast if you are using instant yeast but if you are using another kind, bloom it first in the warm water until it becomes frothy (about 5 minutes) before mixing in the dry ingredients.
Melt the 3 tbsp of butter than pour it onto the bottom of a sheet pan (I used a half sheet pan but you could use a full size and stretch it out more) Comment was written by the post author. Comment is pinned.

2025-05-06 16:53:06,650 - INFO - Extracting recipe from text...
2025-05-06 16:53:20,572 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-06 16:53:20,579 - INFO - Successfully extracted recipe: Blueberry Focaccia
2025-05-06 16:53:20,579 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Blueberry Focaccia', 'description': 'A sweet focaccia bread with blueberry compote, crumble topping, and lemon icing', 'ingredients': [{'section': 'Focaccia Dough', 'items': [{'quantity': '740', 'unit': 'grams', 'name': 'all purpose flour'}, {'quantity': '1', 'unit': 'pinch', 'name': 'salt'}, {'quantity': '12', 'unit': 'grams', 'name': 'sugar'}, {'quantity': '2', 'unit': 'packets', 'name': 'rapid rise instant yeast'}, {'quantity': '540', 'unit': 'grams', 'name': 'warm water'}]}, {'section': 'Blueberry Compote', 'items': [{'quantity': '3', 'unit': 'cups', 'name': 'blueberries'}, {'quantity': '1', 'unit': '', 'name': 'lemon (juice)'}, {'quantity': '1', 'unit': 'tbsp', 'name': 'water'}, {'quantity': '3/4', 'unit': 'cup', 'name': 'white sugar'}, {'quantity': '1', 'unit': 'tsp', 'name': 'vanilla extract'}, {'quantity': '1', 'unit': 'tbsp', 'name': 'corn starch'}, {'quantity': '1 1/2', 'unit': 'tbsp', 'name': 'water (for cornstarch slurry)'}]}, {'section': 'Crumble', 'items': [{'quantity': '2/3', 'unit': 'cup', 'name': 'flour'}, {'quantity': '2/3', 'unit': 'cup', 'name': 'sugar'}, {'quantity': '1/4', 'unit': 'cup', 'name': 'melted butter'}]}, {'section': 'Icing', 'items': [{'quantity': '1', 'unit': 'cup', 'name': 'powdered sugar'}, {'quantity': '1', 'unit': '', 'name': 'lemon (zest)'}, {'quantity': '1/2', 'unit': '', 'name': 'lemon (juice)'}]}, {'section': 'Other', 'items': [{'quantity': '3', 'unit': 'tbsp', 'name': 'melted butter (for the pan)'}]}], 'instructions': ['First make your blueberry compote by combining blueberries, lemon juice, water, vanilla, and sugar in a skillet and cook on medium for 5 minutes until the berries have released their juice and the mixture is bubbling.', 'Mix your corn starch and water then pour them into the blueberry mixture and cook for another couple minutes until thickened.', 'Remove the compote from the heat and allow it to cool.', 'For the dough, mix all the dough ingredients together in a stand mixer (or by hand in a bowl), and knead for about 5-10 minutes until dough comes together and is smooth.', "If using instant yeast, you don't need to bloom it first. If using another kind of yeast, bloom it in the warm water until it becomes frothy (about 5 minutes) before mixing in the dry ingredients.", 'Melt 3 tbsp of butter and pour it onto the bottom of a sheet pan (half sheet pan or full size).', 'For the crumble, combine flour, sugar, and melted butter.', 'For the icing, mix powdered sugar, lemon zest, and lemon juice (adjust lemon juice for desired consistency).'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'medium'}
2025-05-06 16:53:20,579 - INFO - Exiting expanded post view after caption extraction...
2025-05-06 16:53:26,161 - INFO - Successfully exited post view before recipe processing.
2025-05-06 16:53:26,161 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-06 16:53:26,161 - INFO - Recipe extraction successful.
2025-05-06 16:53:26,161 - INFO - Generating PDF from extracted recipe details...
2025-05-06 16:53:26,163 - INFO - Generating PDF for recipe: Blueberry Focaccia
2025-05-06 16:53:26,419 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-06 16:53:26,420 - INFO - PDF generated successfully: ./pdfs/Blueberry_Focaccia_1746575606.pdf
2025-05-06 16:53:26,420 - INFO - PDF generated at: ./pdfs/Blueberry_Focaccia_1746575606.pdf
2025-05-06 16:53:26,421 - INFO - Logging usage event for user=docteurzed
2025-05-06 16:53:28,979 - INFO - Usage event logged successfully for user=docteurzed
2025-05-06 16:53:28,979 - INFO - Sending PDF to user's email...
2025-05-06 16:53:29,339 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-06 16:53:33,159 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-06 16:53:33,160 - INFO - PDF sent via email successfully.
2025-05-06 16:53:43,434 - INFO - Returning to inbox...
2025-05-06 16:53:43,663 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:53:43,934 - ERROR - All back button strategies failed
2025-05-06 16:53:43,934 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:53:47,054 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:53:47,055 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:53:47,261 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-06 16:53:50,376 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 16:53:53,963 - ERROR - Timeout waiting for DM inbox indicator
2025-05-06 16:53:53,963 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:53:54,466 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-06 16:53:54,476 - INFO - User memory saved successfully
2025-05-06 16:53:54,476 - INFO - Returning to inbox...
2025-05-06 16:53:54,671 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-06 16:53:54,863 - ERROR - All back button strategies failed
2025-05-06 16:53:54,863 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-06 17:11:38,330 - INFO - Starting Instagram Recipe Extractor
2025-05-06 17:11:38,331 - INFO - Initializing Appium driver...
2025-05-06 17:11:41,622 - INFO - Driver initialized successfully.
2025-05-06 17:11:41,623 - INFO - Loaded memory for 4 users
2025-05-06 17:11:41,623 - INFO - Waiting for Instagram app to load...
2025-05-06 17:11:46,633 - INFO - Navigating to DMs...
2025-05-06 17:11:50,796 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-06 17:11:58,811 - INFO - DM inbox indicator found successfully
2025-05-06 17:11:58,811 - INFO - DM inbox state verified.
2025-05-06 17:11:58,811 - INFO - Starting message scanning loop
2025-05-06 17:12:03,828 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 17:12:04,114 - INFO - Found 0 thread(s) in total
2025-05-06 17:12:04,114 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-06 17:12:09,133 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 17:12:09,585 - INFO - Found 1 unread thread(s) using XPath
2025-05-06 17:12:09,585 - INFO - Found 1 thread(s) in total
2025-05-06 17:12:09,586 - INFO - Processing thread 1 of 1
2025-05-06 17:12:10,268 - INFO - Identified user: docteurzed
2025-05-06 17:12:10,980 - INFO - Direct click on thread successful
2025-05-06 17:12:12,861 - INFO - Using fixed screen scale factor: 3.00
2025-05-06 17:12:12,862 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 17:12:12,910 - INFO - Saved cropped post image for docteurzed
2025-05-06 17:12:15,531 - INFO - Verifying preview element using XPath...
2025-05-06 17:12:15,962 - INFO - Found preview element with rect: {'y': -59, 'x': 56, 'width': 160, 'height': 288}
2025-05-06 17:12:16,387 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-06 17:12:16,387 - INFO - User docteurzed is already onboarded
2025-05-06 17:12:16,387 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-06 17:12:24,605 - INFO - Checking for shared recipe post...
2025-05-06 17:12:25,332 - INFO - Found a shared post, opening it...
2025-05-06 17:12:26,257 - INFO - Tapped on post with mobile: tap command
2025-05-06 17:12:36,997 - INFO - Checking if caption needs expansion...
2025-05-06 17:12:37,312 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-06 17:12:37,312 - INFO - Tapping on 'More' to expand caption...
2025-05-06 17:12:38,147 - INFO - Caption expanded successfully
2025-05-06 17:12:40,153 - INFO - Extracting recipe caption...
2025-05-06 17:12:41,311 - INFO - Successfully extracted caption (305 chars)
2025-05-06 17:12:41,312 - INFO - Caption saved to captions/caption_docteurzed_1746576761.txt
2025-05-06 17:12:41,312 - INFO - Extracting caption and comments using unified parser...
2025-05-06 17:12:41,312 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-06 17:12:41,312 - INFO - Trying to extract recipe from pinned comment block...
2025-05-06 17:12:41,312 - INFO - Looking for comments button...
2025-05-06 17:12:43,255 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-06 17:12:45,578 - INFO - Tapped on comments button
2025-05-06 17:12:47,920 - INFO - Analyzing UI for comment elements...
2025-05-06 17:12:51,457 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-06 17:12:51,704 - INFO - Found 2 collection views
2025-05-06 17:12:51,807 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-06 17:12:52,090 - INFO - Collection view 0 has 1 cells
2025-05-06 17:12:52,214 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-06 17:12:52,647 - INFO -   Cell 0 has 4 text elements
2025-05-06 17:12:52,723 - INFO -     Text element 0: '1901 comments'
2025-05-06 17:12:52,806 - INFO -     Text element 1: '144311 shares'
2025-05-06 17:12:52,885 - INFO -     Text element 2: 'March 10'
2025-05-06 17:12:52,960 - INFO -     Text element 3: 'Lemon and Blueberry Focaccia!🍋🫐 RECIPE pinned in t...'
2025-05-06 17:12:52,960 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-06 17:12:52,960 - INFO -     Text length: 305 characters
2025-05-06 17:12:52,962 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-06 17:12:53,048 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-06 17:12:53,274 - INFO - Collection view 1 has 1 cells
2025-05-06 17:12:53,371 - INFO -   Cell 0: Size 428x769 at position (0,335)
2025-05-06 17:12:53,680 - INFO -   Cell 0 has 2 text elements
2025-05-06 17:12:53,766 - INFO -     Text element 0: 'Reply'
2025-05-06 17:12:53,851 - INFO -     Text element 1: 'yummyliciousdelicious said, Recipe
For focaccia do...'
2025-05-06 17:12:53,851 - INFO -     POTENTIAL RECIPE FOUND in collection view 1, cell 0, text element 1
2025-05-06 17:12:53,851 - INFO -     Text length: 1548 characters
2025-05-06 17:12:53,852 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv1_cell0_elem1.txt
2025-05-06 17:12:54,889 - INFO - Found 12 total text elements in the UI
2025-05-06 17:12:55,520 - INFO - POTENTIAL RECIPE FOUND in standalone text element 7
2025-05-06 17:12:55,520 - INFO - Text length: 1548 characters
2025-05-06 17:12:55,520 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem7.txt
2025-05-06 17:12:55,809 - INFO - POTENTIAL RECIPE FOUND in standalone text element 11
2025-05-06 17:12:55,809 - INFO - Text length: 305 characters
2025-05-06 17:12:55,810 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem11.txt
2025-05-06 17:12:55,810 - INFO - [DEBUG] Submitting extracted comment to Claude:

yummyliciousdelicious said, Recipe
For focaccia dough
740 grams all purpose flour
A pinch of salt
12 grams sugar
2 packets rapid rise instant yeast 
540 g warm water 

For blueberry compote 
3 cups blueberries
Juice of 1 lemon
1 tbsp water
3/4 cup white sugar
1 tsp vanilla extract 
Cornstarch slurry (1 tbsp corn starch + 1 1/2 tbsp water mixed together)

For crumble 
2/3 cup flour
2/3 cup sugar 
1/4 cup melted butter 

For icing
1 cup powdered sugar
Zest of 1 lemon
Juice of 1/2 lemon or more if you want a thinner consistency 
3 tbsp melted butter for the pan
First make your blueberry compote by combining blueberries, lemon juice, water, vanilla, and sugar in a skillet and cook on medium for 5 minutes until the berries have released their juice and the mixture is bubbling. Mix your corn starch and water then pour them into the blueberry mixture and cook for another couple minutes until thickened. Remove it from the heat and allow it to cool.
For the dough, mix all the dough ingredients together in a stand mixer (or by hand in a a bowl), and kneed for about 5-10 minutes until dough comes together and is smooth. You don’t need to bloom the yeast if you are using instant yeast but if you are using another kind, bloom it first in the warm water until it becomes frothy (about 5 minutes) before mixing in the dry ingredients.
Melt the 3 tbsp of butter than pour it onto the bottom of a sheet pan (I used a half sheet pan but you could use a full size and stretch it out more) Comment was written by the post author. Comment is pinned.

2025-05-06 17:12:55,877 - INFO - Extracting recipe from text...
2025-05-06 17:13:07,706 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-06 17:13:07,715 - INFO - Successfully extracted recipe: Blueberry Focaccia
2025-05-06 17:13:07,715 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Blueberry Focaccia', 'description': 'A sweet focaccia bread with blueberry compote, crumble topping, and lemon icing', 'ingredients': [{'quantity': '740', 'unit': 'grams', 'name': 'all purpose flour'}, {'quantity': '1', 'unit': 'pinch', 'name': 'salt'}, {'quantity': '12', 'unit': 'grams', 'name': 'sugar'}, {'quantity': '2', 'unit': 'packets', 'name': 'rapid rise instant yeast'}, {'quantity': '540', 'unit': 'grams', 'name': 'warm water'}, {'quantity': '3', 'unit': 'cups', 'name': 'blueberries'}, {'quantity': '1', 'unit': '', 'name': 'lemon (juice)'}, {'quantity': '1', 'unit': 'tbsp', 'name': 'water'}, {'quantity': '3/4', 'unit': 'cup', 'name': 'white sugar'}, {'quantity': '1', 'unit': 'tsp', 'name': 'vanilla extract'}, {'quantity': '1', 'unit': 'tbsp', 'name': 'corn starch'}, {'quantity': '1 1/2', 'unit': 'tbsp', 'name': 'water (for cornstarch slurry)'}, {'quantity': '2/3', 'unit': 'cup', 'name': 'flour (for crumble)'}, {'quantity': '2/3', 'unit': 'cup', 'name': 'sugar (for crumble)'}, {'quantity': '1/4', 'unit': 'cup', 'name': 'melted butter (for crumble)'}, {'quantity': '1', 'unit': 'cup', 'name': 'powdered sugar'}, {'quantity': '1', 'unit': '', 'name': 'lemon (zest)'}, {'quantity': '1/2', 'unit': '', 'name': 'lemon (juice for icing)'}, {'quantity': '3', 'unit': 'tbsp', 'name': 'melted butter (for the pan)'}], 'instructions': ['First make your blueberry compote by combining blueberries, lemon juice, water, vanilla, and sugar in a skillet and cook on medium for 5 minutes until the berries have released their juice and the mixture is bubbling.', 'Mix your corn starch and water then pour them into the blueberry mixture and cook for another couple minutes until thickened. Remove it from the heat and allow it to cool.', 'For the dough, mix all the dough ingredients together in a stand mixer (or by hand in a bowl), and kneed for about 5-10 minutes until dough comes together and is smooth.', "You don't need to bloom the yeast if you are using instant yeast but if you are using another kind, bloom it first in the warm water until it becomes frothy (about 5 minutes) before mixing in the dry ingredients.", 'Melt the 3 tbsp of butter then pour it onto the bottom of a sheet pan (half sheet pan or full size).', 'For the crumble, combine flour, sugar, and melted butter.', 'For the icing, mix powdered sugar, lemon zest, and lemon juice.'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'medium'}
2025-05-06 17:13:10,707 - INFO - Dismissed comments sheet successfully.
2025-05-06 17:13:10,709 - INFO - Post hash c47b397744c615bdd8aad0996c52a8eb685a5ae2fa538192af4970ab6f6fea0e already processed. Skipping extraction.
2025-05-06 17:13:10,709 - INFO - Sending cached PDF: ./pdfs/Blueberry_Focaccia_1746575606.pdf
2025-05-06 17:13:10,709 - INFO - Logging usage event for user=docteurzed, url=cached
2025-05-06 17:13:13,257 - INFO - Usage event logged successfully for user=docteurzed (cached)
2025-05-06 17:13:13,259 - INFO - Exiting post view before confirmation messaging...
2025-05-06 17:13:16,320 - INFO - Successfully exited post view.
2025-05-06 17:13:16,320 - INFO - Sending PDF to user's email...
2025-05-06 17:13:16,776 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-06 17:13:19,987 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-06 17:13:19,988 - INFO - PDF sent via email successfully.
2025-05-06 17:13:27,427 - INFO - Confirmation message sent.
2025-05-06 17:13:27,428 - INFO - Returning to inbox...
2025-05-06 17:13:33,235 - INFO - Successfully returned to DM inbox using back button
2025-05-06 17:13:33,237 - INFO - Finished processing current unread threads.
2025-05-06 17:13:34,239 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-06 17:13:34,652 - INFO - Found 0 thread(s) in total
2025-05-06 17:13:34,653 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:44:02,133 - INFO - Starting Instagram Recipe Extractor
2025-05-10 10:44:02,133 - INFO - Initializing Appium driver...
2025-05-10 10:44:10,975 - ERROR - Failed to initialize driver: Message: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:476:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
2025-05-10 10:44:10,977 - ERROR - Traceback (most recent call last):
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/appium_actor.py", line 178, in init_driver
    driver_instance = webdriver.Remote("http://127.0.0.1:4723", options=options)
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/webdriver.py", line 236, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        command_executor=command_executor,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        client_config=client_config,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py", line 260, in __init__
    self.start_session(capabilities)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/webdriver.py", line 327, in start_session
    response = self.execute(RemoteCommand.NEW_SESSION, w3c_caps)
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py", line 448, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py", line 232, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:476:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)

2025-05-10 10:44:10,977 - CRITICAL - Critical error: Message: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:476:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)
2025-05-10 10:44:10,977 - CRITICAL - Traceback (most recent call last):
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/appium_actor.py", line 1220, in <module>
    driver = init_driver()
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/appium_actor.py", line 178, in init_driver
    driver_instance = webdriver.Remote("http://127.0.0.1:4723", options=options)
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/webdriver.py", line 236, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        command_executor=command_executor,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        client_config=client_config,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py", line 260, in __init__
    self.start_session(capabilities)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/webdriver.py", line 327, in start_session
    response = self.execute(RemoteCommand.NEW_SESSION, w3c_caps)
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py", line 448, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py", line 232, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
Stacktrace:
UnknownError: An unknown server-side error occurred while processing the command. Original error: Unable to launch WebDriverAgent. Original error: xcodebuild failed with code 65. This usually indicates an issue with the local Xcode setup or WebDriverAgent project configuration or the driver-to-platform version mismatch. Consider checking the WebDriverAgent configuration guide for real iOS devices at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/.. Make sure you follow the tutorial at https://appium.github.io/appium-xcuitest-driver/latest/preparation/real-device-config/
    at getResponseForW3CError (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/errors.js:1143:9)
    at asyncHandler (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/protocol/protocol.js:487:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at processImmediate (node:internal/timers:476:9)
    at process.callbackTrampoline (node:internal/async_hooks:130:17)

2025-05-10 10:44:10,978 - INFO - Script execution complete
2025-05-10 10:45:00,646 - INFO - Starting Instagram Recipe Extractor
2025-05-10 10:45:00,646 - INFO - Initializing Appium driver...
2025-05-10 10:45:03,152 - INFO - Driver initialized successfully.
2025-05-10 10:45:03,153 - INFO - Loaded memory for 4 users
2025-05-10 10:45:03,153 - INFO - Waiting for Instagram app to load...
2025-05-10 10:45:08,155 - INFO - Navigating to DMs...
2025-05-10 10:45:12,483 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 10:45:12,908 - INFO - DM inbox indicator found successfully
2025-05-10 10:45:12,908 - INFO - DM inbox state verified.
2025-05-10 10:45:12,909 - INFO - Starting message scanning loop
2025-05-10 10:45:17,940 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:45:18,407 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 10:45:18,407 - INFO - Found 1 thread(s) in total
2025-05-10 10:45:18,408 - INFO - Processing thread 1 of 1
2025-05-10 10:45:18,988 - INFO - Identified user: docteurzed
2025-05-10 10:45:19,839 - INFO - Direct click on thread successful
2025-05-10 10:45:23,871 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 10:45:23,872 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 817, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 10:45:23,896 - INFO - Saved cropped post image for docteurzed
2025-05-10 10:45:26,618 - INFO - Verifying preview element using XPath...
2025-05-10 10:45:27,073 - INFO - Found preview element with rect: {'y': -183, 'x': 316, 'width': 88, 'height': 156}
2025-05-10 10:45:27,502 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 10:45:27,502 - INFO - User docteurzed is already onboarded
2025-05-10 10:45:27,502 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 10:45:36,258 - INFO - Checking for shared recipe post...
2025-05-10 10:45:37,217 - INFO - Found a shared post, opening it...
2025-05-10 10:45:38,232 - INFO - Tapped on post with mobile: tap command
2025-05-10 10:45:48,547 - INFO - Checking if caption needs expansion...
2025-05-10 10:45:48,840 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 10:45:48,840 - INFO - Tapping on 'More' to expand caption...
2025-05-10 10:45:49,634 - INFO - Caption expanded successfully
2025-05-10 10:45:51,639 - INFO - Extracting recipe caption...
2025-05-10 10:45:52,516 - INFO - Successfully extracted caption (798 chars)
2025-05-10 10:45:52,517 - INFO - Caption saved to captions/caption_docteurzed_1746899152.txt
2025-05-10 10:45:52,517 - INFO - Extracting caption and comments using unified parser...
2025-05-10 10:45:52,518 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 10:45:52,518 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 10:45:52,518 - INFO - Looking for comments button...
2025-05-10 10:45:53,347 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 10:45:54,850 - INFO - Tapped on comments button
2025-05-10 10:45:57,199 - INFO - Analyzing UI for comment elements...
2025-05-10 10:46:01,253 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 10:46:01,620 - INFO - Found 2 collection views
2025-05-10 10:46:01,738 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 10:46:02,066 - INFO - Collection view 0 has 1 cells
2025-05-10 10:46:02,201 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 10:46:02,771 - INFO -   Cell 0 has 4 text elements
2025-05-10 10:46:02,865 - INFO -     Text element 0: 'March 7'
2025-05-10 10:46:02,973 - INFO -     Text element 1: '838 comments'
2025-05-10 10:46:03,078 - INFO -     Text element 2: '131 shares'
2025-05-10 10:46:03,179 - INFO -     Text element 3: 'Insalata di rapa rossa, ceci, cetriolo, fetta, cip...'
2025-05-10 10:46:03,180 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 10:46:03,180 - INFO -     Text length: 798 characters
2025-05-10 10:46:03,181 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 10:46:03,348 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 10:46:04,561 - INFO - Collection view 1 has 9 cells
2025-05-10 10:46:04,663 - INFO -   Cell 0: Size 428x123 at position (0,335)
2025-05-10 10:46:05,137 - INFO -   Cell 0 has 3 text elements
2025-05-10 10:46:05,243 - INFO -     Text element 0: 'Reply'
2025-05-10 10:46:05,344 - INFO -     Text element 1: 'See translation'
2025-05-10 10:46:05,450 - INFO -     Text element 2: 'maua_01 said, Sarò ripetitiva ma rientrare la sera...'
2025-05-10 10:46:05,555 - INFO -   Cell 1: Size 428x81 at position (0,457)
2025-05-10 10:46:05,911 - INFO -   Cell 1 has 2 text elements
2025-05-10 10:46:06,010 - INFO -     Text element 0: 'Reply'
2025-05-10 10:46:06,116 - INFO -     Text element 1: 'sebastian_fitarau said, @maua_01 grazie di ❤️ Comm...'
2025-05-10 10:46:06,208 - INFO -   Cell 2: Size 428x29 at position (0,537)
2025-05-10 10:46:06,387 - INFO -   Cell 2 has 0 text elements
2025-05-10 10:46:06,489 - INFO -   Cell 3: Size 428x81 at position (0,565)
2025-05-10 10:46:06,847 - INFO -   Cell 3 has 2 text elements
2025-05-10 10:46:06,944 - INFO -     Text element 0: 'Reply'
2025-05-10 10:46:07,038 - INFO -     Text element 1: 'retbeatrix said, Fantastic 😍'
2025-05-10 10:46:07,145 - INFO -   Cell 4: Size 428x81 at position (0,645)
2025-05-10 10:46:07,510 - INFO -   Cell 4 has 2 text elements
2025-05-10 10:46:07,602 - INFO -     Text element 0: 'Reply'
2025-05-10 10:46:07,704 - INFO -     Text element 1: 'sebastian_fitarau said, @retbeatrix 🍴❤️🙏 Comment w...'
2025-05-10 10:46:09,798 - INFO - Found 23 total text elements in the UI
2025-05-10 10:46:12,140 - INFO - POTENTIAL RECIPE FOUND in standalone text element 22
2025-05-10 10:46:12,140 - INFO - Text length: 798 characters
2025-05-10 10:46:12,140 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem22.txt
2025-05-10 10:46:12,140 - INFO - [DEBUG] Submitting extracted comment to Claude:

Insalata di rapa rossa, ceci, cetriolo, fetta, cipolla rossa di tropea, olive taggiasche e aneto 🤤🍴 

ingredienti x4:
300g rapa rossa cotta in precedenza 
1 cetriolo da 200g
200g feta
300g ceci cotti in precedenza
mezza cipolla di tropea (dipende dalla dimensione
80g olive taggiasche
aneto q.b.
sale q.b.
pepe q.b.

Buon Appetito!🍴

Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill 🤤🍴

**Ingredients for 4 servings:**
- 300g pre-cooked beetroot
- 1 cucumber (200g)
- 200g feta cheese
- 300g pre-cooked chickpeas
- Half a Tropea onion (depending on size)
- 80g Taggiasca olives
- Dill to taste
- Salt to taste
- Pepper to taste

Enjoy your meal! 🍴

.
.
.
#insalata #raparossa #fetta #ceci #antipasto #contorno #sebastianfitarauchef #ilgustodellasemplicità

2025-05-10 10:46:12,227 - INFO - Extracting recipe from text...
2025-05-10 10:46:18,741 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 10:46:18,749 - INFO - Successfully extracted recipe: Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill
2025-05-10 10:46:18,749 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill', 'description': 'A colorful and flavorful salad combining beetroot, chickpeas, cucumber, feta cheese, red onion, olives, and fresh dill.', 'ingredients': [{'quantity': '300', 'unit': 'g', 'name': 'pre-cooked beetroot'}, {'quantity': '1', 'unit': '', 'name': 'cucumber (200g)'}, {'quantity': '200', 'unit': 'g', 'name': 'feta cheese'}, {'quantity': '300', 'unit': 'g', 'name': 'pre-cooked chickpeas'}, {'quantity': '0.5', 'unit': '', 'name': 'Tropea red onion (depending on size)'}, {'quantity': '80', 'unit': 'g', 'name': 'Taggiasca olives'}, {'quantity': None, 'unit': 'to taste', 'name': 'dill'}, {'quantity': None, 'unit': 'to taste', 'name': 'salt'}, {'quantity': None, 'unit': 'to taste', 'name': 'pepper'}], 'instructions': [], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': '4', 'dietary_info': [], 'difficulty': None}
2025-05-10 10:46:21,878 - INFO - Dismissed comments sheet successfully.
2025-05-10 10:46:21,878 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 10:46:24,845 - INFO - Successfully exited post view before recipe processing.
2025-05-10 10:46:24,846 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 10:46:24,846 - INFO - Recipe extraction successful.
2025-05-10 10:46:24,846 - INFO - Generating PDF from extracted recipe details...
2025-05-10 10:46:24,850 - INFO - Generating PDF for recipe: Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill
2025-05-10 10:46:24,884 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 10:46:24,884 - INFO - PDF generated successfully: ./pdfs/Beetroot_Salad_with_Chickpeas__Cucumber__Feta__Tro_1746899184.pdf
2025-05-10 10:46:24,884 - INFO - PDF generated at: ./pdfs/Beetroot_Salad_with_Chickpeas__Cucumber__Feta__Tro_1746899184.pdf
2025-05-10 10:46:24,886 - INFO - [DELTA] Input chars: 798, Output chars: 1230, Ratio: 1.54, Label: over-extracted
2025-05-10 10:46:24,886 - INFO - Logging usage event for user=docteurzed
2025-05-10 10:46:24,886 - ERROR - Failed to log usage event: log_usage_event() got an unexpected keyword argument 'input_char_count'
2025-05-10 10:46:24,886 - INFO - Sending PDF to user's email...
2025-05-10 10:46:25,276 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 10:46:27,703 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 10:46:27,703 - INFO - PDF sent via email successfully.
2025-05-10 10:46:35,078 - INFO - Returning to inbox...
2025-05-10 10:46:41,340 - INFO - Successfully returned to DM inbox using back button
2025-05-10 10:46:41,343 - INFO - User memory saved successfully
2025-05-10 10:46:41,343 - INFO - Returning to inbox...
2025-05-10 10:46:41,578 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 10:46:41,810 - ERROR - All back button strategies failed
2025-05-10 10:46:41,810 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 10:46:42,173 - INFO - DM inbox indicator found successfully
2025-05-10 10:46:42,174 - INFO - DM inbox state verified.
2025-05-10 10:46:42,174 - INFO - Inbox already detected despite back button failure.
2025-05-10 10:46:42,174 - INFO - Finished processing current unread threads.
2025-05-10 10:46:43,176 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:46:43,498 - INFO - Found 0 thread(s) in total
2025-05-10 10:46:43,499 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:46:48,513 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:46:48,822 - INFO - Found 0 thread(s) in total
2025-05-10 10:46:48,823 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:46:53,840 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:46:54,161 - INFO - Found 0 thread(s) in total
2025-05-10 10:46:54,161 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:46:59,180 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:46:59,494 - INFO - Found 0 thread(s) in total
2025-05-10 10:46:59,495 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:04,512 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:04,828 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:04,828 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:09,845 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:10,143 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:10,143 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:15,163 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:15,475 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:15,475 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:20,491 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:20,806 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:20,807 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:25,827 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:26,163 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:26,163 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:31,188 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:31,516 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:31,516 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:47:36,546 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:47:36,841 - INFO - Found 0 thread(s) in total
2025-05-10 10:47:36,841 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:48:13,548 - INFO - Starting Instagram Recipe Extractor
2025-05-10 10:48:13,548 - INFO - Initializing Appium driver...
2025-05-10 10:48:16,746 - INFO - Driver initialized successfully.
2025-05-10 10:48:16,746 - INFO - Loaded memory for 4 users
2025-05-10 10:48:16,747 - INFO - Waiting for Instagram app to load...
2025-05-10 10:48:21,747 - INFO - Navigating to DMs...
2025-05-10 10:48:25,666 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 10:48:26,043 - INFO - DM inbox indicator found successfully
2025-05-10 10:48:26,043 - INFO - DM inbox state verified.
2025-05-10 10:48:26,043 - INFO - Starting message scanning loop
2025-05-10 10:48:31,062 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:48:31,523 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 10:48:31,523 - INFO - Found 1 thread(s) in total
2025-05-10 10:48:31,524 - INFO - Processing thread 1 of 1
2025-05-10 10:48:32,098 - INFO - Identified user: docteurzed
2025-05-10 10:48:32,949 - INFO - Direct click on thread successful
2025-05-10 10:48:35,729 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 10:48:35,729 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 10:48:35,781 - INFO - Saved cropped post image for docteurzed
2025-05-10 10:48:38,440 - INFO - Verifying preview element using XPath...
2025-05-10 10:48:38,882 - INFO - Found preview element with rect: {'y': -165, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 10:48:39,245 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 10:48:39,245 - INFO - User docteurzed is already onboarded
2025-05-10 10:48:39,246 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 10:48:47,810 - INFO - Checking for shared recipe post...
2025-05-10 10:48:48,559 - INFO - Found a shared post, opening it...
2025-05-10 10:48:49,446 - INFO - Tapped on post with mobile: tap command
2025-05-10 10:48:59,945 - INFO - Checking if caption needs expansion...
2025-05-10 10:49:00,223 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 10:49:00,223 - INFO - Tapping on 'More' to expand caption...
2025-05-10 10:49:01,046 - INFO - Caption expanded successfully
2025-05-10 10:49:03,051 - INFO - Extracting recipe caption...
2025-05-10 10:49:04,565 - INFO - Successfully extracted caption (798 chars)
2025-05-10 10:49:04,567 - INFO - Caption saved to captions/caption_docteurzed_1746899344.txt
2025-05-10 10:49:04,567 - INFO - Extracting caption and comments using unified parser...
2025-05-10 10:49:04,567 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 10:49:04,567 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 10:49:04,567 - INFO - Looking for comments button...
2025-05-10 10:49:05,838 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 10:49:07,409 - INFO - Tapped on comments button
2025-05-10 10:49:09,915 - INFO - Analyzing UI for comment elements...
2025-05-10 10:49:11,655 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 10:49:11,801 - INFO - Found 1 collection views
2025-05-10 10:49:11,882 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 10:49:12,079 - INFO - Collection view 0 has 1 cells
2025-05-10 10:49:12,160 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 10:49:12,446 - INFO -   Cell 0 has 4 text elements
2025-05-10 10:49:12,492 - INFO -     Text element 0: 'March 7'
2025-05-10 10:49:12,544 - INFO -     Text element 1: '838 comments'
2025-05-10 10:49:12,589 - INFO -     Text element 2: '131 shares'
2025-05-10 10:49:12,641 - INFO -     Text element 3: 'Insalata di rapa rossa, ceci, cetriolo, fetta, cip...'
2025-05-10 10:49:12,641 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 10:49:12,641 - INFO -     Text length: 798 characters
2025-05-10 10:49:12,641 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 10:49:13,170 - INFO - Found 8 total text elements in the UI
2025-05-10 10:49:13,578 - INFO - POTENTIAL RECIPE FOUND in standalone text element 7
2025-05-10 10:49:13,578 - INFO - Text length: 798 characters
2025-05-10 10:49:13,579 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem7.txt
2025-05-10 10:49:13,579 - INFO - [DEBUG] Submitting extracted comment to Claude:

Insalata di rapa rossa, ceci, cetriolo, fetta, cipolla rossa di tropea, olive taggiasche e aneto 🤤🍴 

ingredienti x4:
300g rapa rossa cotta in precedenza 
1 cetriolo da 200g
200g feta
300g ceci cotti in precedenza
mezza cipolla di tropea (dipende dalla dimensione
80g olive taggiasche
aneto q.b.
sale q.b.
pepe q.b.

Buon Appetito!🍴

Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill 🤤🍴

**Ingredients for 4 servings:**
- 300g pre-cooked beetroot
- 1 cucumber (200g)
- 200g feta cheese
- 300g pre-cooked chickpeas
- Half a Tropea onion (depending on size)
- 80g Taggiasca olives
- Dill to taste
- Salt to taste
- Pepper to taste

Enjoy your meal! 🍴

.
.
.
#insalata #raparossa #fetta #ceci #antipasto #contorno #sebastianfitarauchef #ilgustodellasemplicità

2025-05-10 10:49:13,642 - INFO - Extracting recipe from text...
2025-05-10 10:49:19,837 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 10:49:19,841 - INFO - Successfully extracted recipe: Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill
2025-05-10 10:49:19,841 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Beetroot Salad with Chickpeas, Cucumber, Feta, Tropea Red Onion, Taggiasca Olives, and Dill', 'description': 'A colorful and flavorful salad combining beetroot, chickpeas, cucumber, feta cheese, red onion, olives, and fresh dill.', 'ingredients': [{'quantity': '300', 'unit': 'g', 'name': 'pre-cooked beetroot'}, {'quantity': '1', 'unit': '', 'name': 'cucumber (200g)'}, {'quantity': '200', 'unit': 'g', 'name': 'feta cheese'}, {'quantity': '300', 'unit': 'g', 'name': 'pre-cooked chickpeas'}, {'quantity': '0.5', 'unit': '', 'name': 'Tropea red onion (depending on size)'}, {'quantity': '80', 'unit': 'g', 'name': 'Taggiasca olives'}, {'quantity': None, 'unit': 'to taste', 'name': 'dill'}, {'quantity': None, 'unit': 'to taste', 'name': 'salt'}, {'quantity': None, 'unit': 'to taste', 'name': 'pepper'}], 'instructions': [], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': '4', 'dietary_info': [], 'difficulty': None}
2025-05-10 10:49:19,953 - WARNING - Dismiss button not found or click failed: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 10:49:19,954 - INFO - Post hash 52403fff4aaf17da30ed98ff0b140a51b856f8233b8f9e38b24bf13cb8e06214 already processed. Skipping extraction.
2025-05-10 10:49:19,954 - INFO - Sending cached PDF: ./pdfs/Beetroot_Salad_with_Chickpeas__Cucumber__Feta__Tro_1746899184.pdf
2025-05-10 10:49:19,954 - INFO - Logging usage event for user=docteurzed, url=cached
2025-05-10 10:49:21,885 - INFO - Usage event logged successfully for user=docteurzed (cached)
2025-05-10 10:49:21,885 - INFO - Exiting post view before confirmation messaging...
2025-05-10 10:49:24,868 - INFO - Successfully exited post view.
2025-05-10 10:49:24,869 - INFO - Sending PDF to user's email...
2025-05-10 10:49:25,054 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 10:49:27,214 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 10:49:27,214 - INFO - PDF sent via email successfully.
2025-05-10 10:49:34,707 - INFO - Confirmation message sent.
2025-05-10 10:49:34,707 - INFO - Returning to inbox...
2025-05-10 10:49:40,996 - INFO - Successfully returned to DM inbox using back button
2025-05-10 10:49:40,996 - INFO - Finished processing current unread threads.
2025-05-10 10:49:42,002 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:49:42,334 - INFO - Found 0 thread(s) in total
2025-05-10 10:49:42,334 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:49:47,353 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:49:47,675 - INFO - Found 0 thread(s) in total
2025-05-10 10:49:47,675 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 10:52:47,371 - INFO - Starting Instagram Recipe Extractor
2025-05-10 10:52:47,372 - INFO - Initializing Appium driver...
2025-05-10 10:52:50,510 - INFO - Driver initialized successfully.
2025-05-10 10:52:50,510 - INFO - Loaded memory for 4 users
2025-05-10 10:52:50,510 - INFO - Waiting for Instagram app to load...
2025-05-10 10:52:55,515 - INFO - Navigating to DMs...
2025-05-10 10:52:59,763 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 10:53:00,207 - INFO - DM inbox indicator found successfully
2025-05-10 10:53:00,207 - INFO - DM inbox state verified.
2025-05-10 10:53:00,207 - INFO - Starting message scanning loop
2025-05-10 10:53:05,223 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:53:05,710 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 10:53:05,712 - INFO - Found 1 thread(s) in total
2025-05-10 10:53:05,713 - INFO - Processing thread 1 of 1
2025-05-10 10:53:06,318 - INFO - Identified user: docteurzed
2025-05-10 10:53:07,148 - INFO - Direct click on thread successful
2025-05-10 10:53:09,966 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 10:53:09,968 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 10:53:10,031 - INFO - Saved cropped post image for docteurzed
2025-05-10 10:53:12,667 - INFO - Verifying preview element using XPath...
2025-05-10 10:53:13,128 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 10:53:13,531 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 10:53:13,531 - INFO - User docteurzed is already onboarded
2025-05-10 10:53:13,531 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 10:53:22,142 - INFO - Checking for shared recipe post...
2025-05-10 10:53:22,884 - INFO - Found a shared post, opening it...
2025-05-10 10:53:23,829 - INFO - Tapped on post with mobile: tap command
2025-05-10 10:53:34,396 - INFO - Checking if caption needs expansion...
2025-05-10 10:53:34,717 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 10:53:34,717 - INFO - Tapping on 'More' to expand caption...
2025-05-10 10:53:35,554 - INFO - Caption expanded successfully
2025-05-10 10:53:37,558 - INFO - Extracting recipe caption...
2025-05-10 10:53:38,545 - INFO - Successfully extracted caption (793 chars)
2025-05-10 10:53:38,547 - INFO - Caption saved to captions/caption_docteurzed_1746899618.txt
2025-05-10 10:53:38,547 - INFO - Extracting caption and comments using unified parser...
2025-05-10 10:53:38,547 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 10:53:38,547 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 10:53:38,547 - INFO - Looking for comments button...
2025-05-10 10:53:39,329 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 10:53:40,963 - INFO - Tapped on comments button
2025-05-10 10:53:43,306 - INFO - Analyzing UI for comment elements...
2025-05-10 10:53:47,907 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 10:53:48,307 - INFO - Found 2 collection views
2025-05-10 10:53:48,449 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 10:53:48,858 - INFO - Collection view 0 has 1 cells
2025-05-10 10:53:49,009 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 10:53:49,752 - INFO -   Cell 0 has 4 text elements
2025-05-10 10:53:49,862 - INFO -     Text element 0: 'March 1'
2025-05-10 10:53:49,973 - INFO -     Text element 1: '256 comments'
2025-05-10 10:53:50,088 - INFO -     Text element 2: '196 shares'
2025-05-10 10:53:50,195 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 10:53:50,196 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 10:53:50,196 - INFO -     Text length: 793 characters
2025-05-10 10:53:50,196 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 10:53:50,378 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 10:53:51,466 - INFO - Collection view 1 has 8 cells
2025-05-10 10:53:51,584 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 10:53:51,963 - INFO -   Cell 0 has 2 text elements
2025-05-10 10:53:52,068 - INFO -     Text element 0: 'Reply'
2025-05-10 10:53:52,177 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 10:53:52,296 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 10:53:52,693 - INFO -   Cell 1 has 2 text elements
2025-05-10 10:53:52,796 - INFO -     Text element 0: 'Reply'
2025-05-10 10:53:52,917 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 10:53:53,033 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 10:53:53,410 - INFO -   Cell 2 has 2 text elements
2025-05-10 10:53:53,514 - INFO -     Text element 0: 'Reply'
2025-05-10 10:53:53,624 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 10:53:53,735 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 10:53:54,133 - INFO -   Cell 3 has 2 text elements
2025-05-10 10:53:54,249 - INFO -     Text element 0: 'Reply'
2025-05-10 10:53:54,353 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 10:53:54,472 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 10:53:54,849 - INFO -   Cell 4 has 2 text elements
2025-05-10 10:53:54,955 - INFO -     Text element 0: 'Reply'
2025-05-10 10:53:55,062 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 10:53:57,668 - INFO - Found 26 total text elements in the UI
2025-05-10 10:54:00,577 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 10:54:00,581 - INFO - Text length: 793 characters
2025-05-10 10:54:00,581 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 10:54:00,581 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 10:54:00,656 - INFO - Extracting recipe from text...
2025-05-10 10:54:06,552 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 10:54:06,560 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 10:54:06,560 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': "Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. A quick and easy dish that's perfect for weeknight meals or entertaining.", 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 10:54:09,737 - INFO - Dismissed comments sheet successfully.
2025-05-10 10:54:09,738 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 10:54:12,754 - INFO - Successfully exited post view before recipe processing.
2025-05-10 10:54:12,755 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 10:54:12,755 - INFO - Recipe extraction successful.
2025-05-10 10:54:12,755 - INFO - Generating PDF from extracted recipe details...
2025-05-10 10:54:12,757 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 10:54:13,008 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 10:54:13,008 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746899652.pdf
2025-05-10 10:54:13,008 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746899652.pdf
2025-05-10 10:54:13,010 - INFO - [DELTA] Input chars: 793, Output chars: 1231, Ratio: 1.55, Label: over-extracted
2025-05-10 10:54:13,010 - INFO - Logging usage event for user=docteurzed
2025-05-10 10:54:13,010 - ERROR - Failed to log usage event: log_usage_event() got an unexpected keyword argument 'input_char_count'
2025-05-10 10:54:13,010 - INFO - Sending PDF to user's email...
2025-05-10 10:54:13,350 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 10:54:16,699 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 10:54:16,702 - INFO - PDF sent via email successfully.
2025-05-10 10:54:23,798 - INFO - Returning to inbox...
2025-05-10 10:54:29,888 - INFO - Successfully returned to DM inbox using back button
2025-05-10 10:54:29,891 - INFO - User memory saved successfully
2025-05-10 10:54:29,891 - INFO - Returning to inbox...
2025-05-10 10:54:30,124 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 10:54:30,388 - ERROR - All back button strategies failed
2025-05-10 10:54:30,388 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 10:54:30,805 - INFO - DM inbox indicator found successfully
2025-05-10 10:54:30,805 - INFO - DM inbox state verified.
2025-05-10 10:54:30,805 - INFO - Inbox already detected despite back button failure.
2025-05-10 10:54:30,806 - INFO - Finished processing current unread threads.
2025-05-10 10:54:31,809 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 10:54:32,125 - INFO - Found 0 thread(s) in total
2025-05-10 10:54:32,125 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:14,166 - INFO - Starting Instagram Recipe Extractor
2025-05-10 11:01:14,166 - INFO - Initializing Appium driver...
2025-05-10 11:01:17,228 - INFO - Driver initialized successfully.
2025-05-10 11:01:17,229 - INFO - Loaded memory for 4 users
2025-05-10 11:01:17,229 - INFO - Waiting for Instagram app to load...
2025-05-10 11:01:22,232 - INFO - Navigating to DMs...
2025-05-10 11:01:26,224 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 11:01:26,607 - INFO - DM inbox indicator found successfully
2025-05-10 11:01:26,607 - INFO - DM inbox state verified.
2025-05-10 11:01:26,607 - INFO - Starting message scanning loop
2025-05-10 11:01:31,615 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:31,923 - INFO - Found 0 thread(s) in total
2025-05-10 11:01:31,923 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:36,947 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:37,257 - INFO - Found 0 thread(s) in total
2025-05-10 11:01:37,257 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:42,272 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:42,581 - INFO - Found 0 thread(s) in total
2025-05-10 11:01:42,581 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:47,600 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:47,906 - INFO - Found 0 thread(s) in total
2025-05-10 11:01:47,906 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:52,929 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:53,251 - INFO - Found 0 thread(s) in total
2025-05-10 11:01:53,251 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:01:58,271 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:01:58,731 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 11:01:58,732 - INFO - Found 1 thread(s) in total
2025-05-10 11:01:58,732 - INFO - Processing thread 1 of 1
2025-05-10 11:01:59,245 - INFO - Identified user: docteurzed
2025-05-10 11:02:00,022 - INFO - Direct click on thread successful
2025-05-10 11:02:02,528 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 11:02:02,528 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:02:02,571 - INFO - Saved cropped post image for docteurzed
2025-05-10 11:02:05,235 - INFO - Verifying preview element using XPath...
2025-05-10 11:02:05,702 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:02:06,079 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 11:02:06,080 - INFO - User docteurzed is already onboarded
2025-05-10 11:02:06,080 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 11:02:14,552 - INFO - Checking for shared recipe post...
2025-05-10 11:02:15,188 - INFO - Found a shared post, opening it...
2025-05-10 11:02:15,960 - INFO - Tapped on post with mobile: tap command
2025-05-10 11:02:26,453 - INFO - Checking if caption needs expansion...
2025-05-10 11:02:26,722 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 11:02:26,722 - INFO - Tapping on 'More' to expand caption...
2025-05-10 11:02:27,541 - INFO - Caption expanded successfully
2025-05-10 11:02:29,546 - INFO - Extracting recipe caption...
2025-05-10 11:02:30,622 - INFO - Successfully extracted caption (793 chars)
2025-05-10 11:02:30,623 - INFO - Caption saved to captions/caption_docteurzed_1746900150.txt
2025-05-10 11:02:30,623 - INFO - Extracting caption and comments using unified parser...
2025-05-10 11:02:30,623 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 11:02:30,623 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 11:02:30,623 - INFO - Looking for comments button...
2025-05-10 11:02:31,432 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 11:02:33,007 - INFO - Tapped on comments button
2025-05-10 11:02:35,355 - INFO - Analyzing UI for comment elements...
2025-05-10 11:02:39,774 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 11:02:40,281 - INFO - Found 2 collection views
2025-05-10 11:02:40,407 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 11:02:40,737 - INFO - Collection view 0 has 1 cells
2025-05-10 11:02:40,871 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 11:02:41,418 - INFO -   Cell 0 has 4 text elements
2025-05-10 11:02:41,511 - INFO -     Text element 0: 'March 1'
2025-05-10 11:02:41,605 - INFO -     Text element 1: '256 comments'
2025-05-10 11:02:41,697 - INFO -     Text element 2: '196 shares'
2025-05-10 11:02:41,785 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 11:02:41,785 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 11:02:41,785 - INFO -     Text length: 793 characters
2025-05-10 11:02:41,785 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 11:02:41,936 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 11:02:42,915 - INFO - Collection view 1 has 8 cells
2025-05-10 11:02:43,018 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 11:02:43,382 - INFO -   Cell 0 has 2 text elements
2025-05-10 11:02:43,466 - INFO -     Text element 0: 'Reply'
2025-05-10 11:02:43,555 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 11:02:43,655 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 11:02:44,004 - INFO -   Cell 1 has 2 text elements
2025-05-10 11:02:44,095 - INFO -     Text element 0: 'Reply'
2025-05-10 11:02:44,198 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 11:02:44,284 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 11:02:44,804 - INFO -   Cell 2 has 2 text elements
2025-05-10 11:02:44,894 - INFO -     Text element 0: 'Reply'
2025-05-10 11:02:44,993 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 11:02:45,088 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 11:02:45,443 - INFO -   Cell 3 has 2 text elements
2025-05-10 11:02:45,539 - INFO -     Text element 0: 'Reply'
2025-05-10 11:02:45,635 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 11:02:45,742 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 11:02:46,234 - INFO -   Cell 4 has 2 text elements
2025-05-10 11:02:46,331 - INFO -     Text element 0: 'Reply'
2025-05-10 11:02:46,424 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 11:02:49,131 - INFO - Found 26 total text elements in the UI
2025-05-10 11:02:51,924 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 11:02:51,924 - INFO - Text length: 793 characters
2025-05-10 11:02:51,925 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 11:02:51,925 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 11:02:51,992 - INFO - Extracting recipe from text...
2025-05-10 11:02:58,322 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 11:02:58,330 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:02:58,330 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 11:03:01,486 - INFO - Dismissed comments sheet successfully.
2025-05-10 11:03:01,486 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 11:03:04,480 - INFO - Successfully exited post view before recipe processing.
2025-05-10 11:03:04,481 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 11:03:04,481 - INFO - Recipe extraction successful.
2025-05-10 11:03:04,482 - INFO - Generating PDF from extracted recipe details...
2025-05-10 11:03:04,484 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:03:04,729 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 11:03:04,729 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746900184.pdf
2025-05-10 11:03:04,730 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746900184.pdf
2025-05-10 11:03:04,731 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 11:03:04,731 - INFO - Logging usage event for user=docteurzed
2025-05-10 11:03:04,731 - ERROR - Failed to log usage event: log_usage_event() got an unexpected keyword argument 'input_char_count'
2025-05-10 11:03:04,731 - INFO - Sending PDF to user's email...
2025-05-10 11:03:05,124 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 11:03:08,316 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 11:03:08,318 - INFO - PDF sent via email successfully.
2025-05-10 11:03:15,311 - INFO - Returning to inbox...
2025-05-10 11:03:21,531 - INFO - Successfully returned to DM inbox using back button
2025-05-10 11:03:21,532 - INFO - User memory saved successfully
2025-05-10 11:03:21,532 - INFO - Returning to inbox...
2025-05-10 11:03:21,747 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 11:03:22,005 - ERROR - All back button strategies failed
2025-05-10 11:03:22,005 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 11:03:22,388 - INFO - DM inbox indicator found successfully
2025-05-10 11:03:22,388 - INFO - DM inbox state verified.
2025-05-10 11:03:22,388 - INFO - Inbox already detected despite back button failure.
2025-05-10 11:03:22,388 - INFO - Finished processing current unread threads.
2025-05-10 11:03:23,394 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:03:23,703 - INFO - Found 0 thread(s) in total
2025-05-10 11:03:23,703 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:03:28,725 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:03:29,024 - INFO - Found 0 thread(s) in total
2025-05-10 11:03:29,024 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:03:34,045 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:03:34,382 - INFO - Found 0 thread(s) in total
2025-05-10 11:03:34,382 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:03:39,398 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:03:39,698 - INFO - Found 0 thread(s) in total
2025-05-10 11:03:39,698 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:46:56,034 - INFO - Starting Instagram Recipe Extractor
2025-05-10 11:46:56,034 - INFO - Initializing Appium driver...
2025-05-10 11:46:59,240 - INFO - Driver initialized successfully.
2025-05-10 11:46:59,241 - INFO - Loaded memory for 4 users
2025-05-10 11:46:59,242 - INFO - Waiting for Instagram app to load...
2025-05-10 11:47:04,247 - INFO - Navigating to DMs...
2025-05-10 11:47:08,256 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 11:47:08,622 - INFO - DM inbox indicator found successfully
2025-05-10 11:47:08,622 - INFO - DM inbox state verified.
2025-05-10 11:47:08,622 - INFO - Starting message scanning loop
2025-05-10 11:47:13,641 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:47:14,119 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 11:47:14,120 - INFO - Found 1 thread(s) in total
2025-05-10 11:47:14,121 - INFO - Processing thread 1 of 1
2025-05-10 11:47:14,656 - INFO - Identified user: docteurzed
2025-05-10 11:47:15,493 - INFO - Direct click on thread successful
2025-05-10 11:47:18,251 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 11:47:18,251 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:47:18,301 - INFO - Saved cropped post image for docteurzed
2025-05-10 11:47:20,962 - INFO - Verifying preview element using XPath...
2025-05-10 11:47:21,417 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:47:21,795 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 11:47:21,795 - INFO - User docteurzed is already onboarded
2025-05-10 11:47:21,795 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 11:47:30,367 - INFO - Checking for shared recipe post...
2025-05-10 11:47:31,109 - INFO - Found a shared post, opening it...
2025-05-10 11:47:31,998 - INFO - Tapped on post with mobile: tap command
2025-05-10 11:47:42,571 - INFO - Checking if caption needs expansion...
2025-05-10 11:47:42,871 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 11:47:42,872 - INFO - Tapping on 'More' to expand caption...
2025-05-10 11:47:43,667 - INFO - Caption expanded successfully
2025-05-10 11:47:45,672 - INFO - Extracting recipe caption...
2025-05-10 11:47:46,608 - INFO - Successfully extracted caption (793 chars)
2025-05-10 11:47:46,608 - INFO - Caption saved to captions/caption_docteurzed_1746902866.txt
2025-05-10 11:47:46,608 - INFO - Extracting caption and comments using unified parser...
2025-05-10 11:47:46,608 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 11:47:46,609 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 11:47:46,609 - INFO - Looking for comments button...
2025-05-10 11:47:47,408 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 11:47:48,963 - INFO - Tapped on comments button
2025-05-10 11:47:51,270 - INFO - Analyzing UI for comment elements...
2025-05-10 11:47:55,895 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 11:47:56,296 - INFO - Found 2 collection views
2025-05-10 11:47:56,434 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 11:47:56,797 - INFO - Collection view 0 has 1 cells
2025-05-10 11:47:56,940 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 11:47:57,538 - INFO -   Cell 0 has 4 text elements
2025-05-10 11:47:57,634 - INFO -     Text element 0: 'March 1'
2025-05-10 11:47:57,746 - INFO -     Text element 1: '256 comments'
2025-05-10 11:47:57,840 - INFO -     Text element 2: '196 shares'
2025-05-10 11:47:57,929 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 11:47:57,929 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 11:47:57,929 - INFO -     Text length: 793 characters
2025-05-10 11:47:57,930 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 11:47:58,094 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 11:47:59,156 - INFO - Collection view 1 has 8 cells
2025-05-10 11:47:59,277 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 11:47:59,682 - INFO -   Cell 0 has 2 text elements
2025-05-10 11:47:59,782 - INFO -     Text element 0: 'Reply'
2025-05-10 11:47:59,881 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 11:47:59,986 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 11:48:00,359 - INFO -   Cell 1 has 2 text elements
2025-05-10 11:48:00,463 - INFO -     Text element 0: 'Reply'
2025-05-10 11:48:00,569 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 11:48:00,680 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 11:48:01,058 - INFO -   Cell 2 has 2 text elements
2025-05-10 11:48:01,163 - INFO -     Text element 0: 'Reply'
2025-05-10 11:48:01,254 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 11:48:01,369 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 11:48:01,772 - INFO -   Cell 3 has 2 text elements
2025-05-10 11:48:01,865 - INFO -     Text element 0: 'Reply'
2025-05-10 11:48:01,966 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 11:48:02,067 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 11:48:02,603 - INFO -   Cell 4 has 2 text elements
2025-05-10 11:48:02,716 - INFO -     Text element 0: 'Reply'
2025-05-10 11:48:02,817 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 11:48:05,478 - INFO - Found 26 total text elements in the UI
2025-05-10 11:48:08,199 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 11:48:08,200 - INFO - Text length: 793 characters
2025-05-10 11:48:08,200 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 11:48:08,200 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 11:48:08,263 - INFO - Extracting recipe from text...
2025-05-10 11:48:14,005 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 11:48:14,010 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:48:14,010 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 11:48:17,144 - INFO - Dismissed comments sheet successfully.
2025-05-10 11:48:17,145 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 11:48:20,177 - INFO - Successfully exited post view before recipe processing.
2025-05-10 11:48:20,179 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 11:48:20,180 - INFO - Recipe extraction successful.
2025-05-10 11:48:20,180 - INFO - Generating PDF from extracted recipe details...
2025-05-10 11:48:20,182 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:48:20,417 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 11:48:20,417 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746902900.pdf
2025-05-10 11:48:20,418 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746902900.pdf
2025-05-10 11:48:20,419 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 11:48:20,419 - INFO - Logging usage event for user=docteurzed
2025-05-10 11:48:22,545 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 11:48:22,545 - INFO - Sending PDF to user's email...
2025-05-10 11:48:22,955 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 11:48:26,260 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 11:48:26,261 - INFO - PDF sent via email successfully.
2025-05-10 11:48:33,223 - INFO - Returning to inbox...
2025-05-10 11:48:39,488 - INFO - Successfully returned to DM inbox using back button
2025-05-10 11:48:39,490 - INFO - User memory saved successfully
2025-05-10 11:48:39,490 - INFO - Returning to inbox...
2025-05-10 11:48:39,698 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 11:48:39,946 - ERROR - All back button strategies failed
2025-05-10 11:48:39,946 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 11:48:40,330 - INFO - DM inbox indicator found successfully
2025-05-10 11:48:40,330 - INFO - DM inbox state verified.
2025-05-10 11:48:40,330 - INFO - Inbox already detected despite back button failure.
2025-05-10 11:48:40,331 - INFO - Finished processing current unread threads.
2025-05-10 11:48:41,340 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:48:41,673 - INFO - Found 0 thread(s) in total
2025-05-10 11:48:41,673 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:48:46,693 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:48:47,018 - INFO - Found 0 thread(s) in total
2025-05-10 11:48:47,018 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:48:52,037 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:48:52,353 - INFO - Found 0 thread(s) in total
2025-05-10 11:48:52,353 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:48:57,372 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:48:57,686 - INFO - Found 0 thread(s) in total
2025-05-10 11:48:57,686 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:49:02,699 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:49:03,019 - INFO - Found 0 thread(s) in total
2025-05-10 11:49:03,019 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:49:08,039 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:49:08,355 - INFO - Found 0 thread(s) in total
2025-05-10 11:49:08,356 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:49:13,379 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:49:13,688 - INFO - Found 0 thread(s) in total
2025-05-10 11:49:13,688 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:49:21,117 - INFO - Starting Instagram Recipe Extractor
2025-05-10 11:49:21,117 - INFO - Initializing Appium driver...
2025-05-10 11:49:24,362 - INFO - Driver initialized successfully.
2025-05-10 11:49:24,362 - INFO - Loaded memory for 4 users
2025-05-10 11:49:24,362 - INFO - Waiting for Instagram app to load...
2025-05-10 11:49:29,367 - INFO - Navigating to DMs...
2025-05-10 11:49:33,393 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 11:49:33,810 - INFO - DM inbox indicator found successfully
2025-05-10 11:49:33,810 - INFO - DM inbox state verified.
2025-05-10 11:49:33,811 - INFO - Starting message scanning loop
2025-05-10 11:49:38,829 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:49:39,142 - INFO - Found 0 thread(s) in total
2025-05-10 11:49:39,142 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:49:44,156 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:49:44,623 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 11:49:44,624 - INFO - Found 1 thread(s) in total
2025-05-10 11:49:44,625 - INFO - Processing thread 1 of 1
2025-05-10 11:49:45,180 - INFO - Identified user: docteurzed
2025-05-10 11:49:45,991 - INFO - Direct click on thread successful
2025-05-10 11:49:49,001 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 11:49:49,001 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:49:49,055 - INFO - Saved cropped post image for docteurzed
2025-05-10 11:49:51,711 - INFO - Verifying preview element using XPath...
2025-05-10 11:49:52,200 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:49:52,612 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 11:49:52,612 - INFO - User docteurzed is already onboarded
2025-05-10 11:49:52,612 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 11:50:01,025 - INFO - Checking for shared recipe post...
2025-05-10 11:50:01,776 - INFO - Found a shared post, opening it...
2025-05-10 11:50:02,728 - INFO - Tapped on post with mobile: tap command
2025-05-10 11:50:13,314 - INFO - Checking if caption needs expansion...
2025-05-10 11:50:13,609 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 11:50:13,610 - INFO - Tapping on 'More' to expand caption...
2025-05-10 11:50:14,407 - INFO - Caption expanded successfully
2025-05-10 11:50:16,412 - INFO - Extracting recipe caption...
2025-05-10 11:50:17,437 - INFO - Successfully extracted caption (793 chars)
2025-05-10 11:50:17,439 - INFO - Caption saved to captions/caption_docteurzed_1746903017.txt
2025-05-10 11:50:17,439 - INFO - Extracting caption and comments using unified parser...
2025-05-10 11:50:17,439 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 11:50:17,439 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 11:50:17,439 - INFO - Looking for comments button...
2025-05-10 11:50:18,216 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 11:50:19,823 - INFO - Tapped on comments button
2025-05-10 11:50:22,145 - INFO - Analyzing UI for comment elements...
2025-05-10 11:50:26,750 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 11:50:27,150 - INFO - Found 2 collection views
2025-05-10 11:50:27,290 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 11:50:27,678 - INFO - Collection view 0 has 1 cells
2025-05-10 11:50:27,823 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 11:50:28,472 - INFO -   Cell 0 has 4 text elements
2025-05-10 11:50:28,585 - INFO -     Text element 0: 'March 1'
2025-05-10 11:50:28,704 - INFO -     Text element 1: '256 comments'
2025-05-10 11:50:28,814 - INFO -     Text element 2: '196 shares'
2025-05-10 11:50:28,936 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 11:50:28,936 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 11:50:28,937 - INFO -     Text length: 793 characters
2025-05-10 11:50:28,938 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 11:50:29,117 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 11:50:30,402 - INFO - Collection view 1 has 8 cells
2025-05-10 11:50:30,547 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 11:50:30,952 - INFO -   Cell 0 has 2 text elements
2025-05-10 11:50:31,069 - INFO -     Text element 0: 'Reply'
2025-05-10 11:50:31,182 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 11:50:31,284 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 11:50:31,676 - INFO -   Cell 1 has 2 text elements
2025-05-10 11:50:31,780 - INFO -     Text element 0: 'Reply'
2025-05-10 11:50:31,889 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 11:50:32,014 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 11:50:32,406 - INFO -   Cell 2 has 2 text elements
2025-05-10 11:50:32,514 - INFO -     Text element 0: 'Reply'
2025-05-10 11:50:32,626 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 11:50:32,746 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 11:50:33,134 - INFO -   Cell 3 has 2 text elements
2025-05-10 11:50:33,257 - INFO -     Text element 0: 'Reply'
2025-05-10 11:50:33,375 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 11:50:33,506 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 11:50:33,896 - INFO -   Cell 4 has 2 text elements
2025-05-10 11:50:34,015 - INFO -     Text element 0: 'Reply'
2025-05-10 11:50:34,142 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 11:50:36,776 - INFO - Found 26 total text elements in the UI
2025-05-10 11:50:39,834 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 11:50:39,834 - INFO - Text length: 793 characters
2025-05-10 11:50:39,835 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 11:50:39,835 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 11:50:39,905 - INFO - Extracting recipe from text...
2025-05-10 11:50:45,175 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 11:50:45,189 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:50:45,190 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 11:50:48,361 - INFO - Dismissed comments sheet successfully.
2025-05-10 11:50:48,362 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 11:50:51,366 - INFO - Successfully exited post view before recipe processing.
2025-05-10 11:50:51,366 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 11:50:51,367 - INFO - QR code screenshot not found — skipping URL extraction.
2025-05-10 11:50:51,367 - INFO - Recipe extraction successful.
2025-05-10 11:50:51,367 - INFO - Generating PDF from extracted recipe details...
2025-05-10 11:50:51,368 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:50:51,626 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 11:50:51,626 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903051.pdf
2025-05-10 11:50:51,626 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903051.pdf
2025-05-10 11:50:51,627 - INFO - [DELTA] Input chars: 793, Output chars: 614, Ratio: 0.77, Label: under-extracted
2025-05-10 11:50:51,627 - INFO - Logging usage event for user=docteurzed
2025-05-10 11:50:52,858 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 11:50:52,858 - INFO - Sending PDF to user's email...
2025-05-10 11:50:53,063 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 11:50:56,147 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 11:50:56,148 - INFO - PDF sent via email successfully.
2025-05-10 11:51:03,278 - INFO - Returning to inbox...
2025-05-10 11:51:09,545 - INFO - Successfully returned to DM inbox using back button
2025-05-10 11:51:09,547 - INFO - User memory saved successfully
2025-05-10 11:51:09,547 - INFO - Returning to inbox...
2025-05-10 11:51:09,761 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 11:51:09,997 - ERROR - All back button strategies failed
2025-05-10 11:51:09,997 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 11:51:10,363 - INFO - DM inbox indicator found successfully
2025-05-10 11:51:10,364 - INFO - DM inbox state verified.
2025-05-10 11:51:10,364 - INFO - Inbox already detected despite back button failure.
2025-05-10 11:51:10,364 - INFO - Finished processing current unread threads.
2025-05-10 11:51:11,365 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:51:11,705 - INFO - Found 0 thread(s) in total
2025-05-10 11:51:11,705 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:51:16,733 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:51:17,049 - INFO - Found 0 thread(s) in total
2025-05-10 11:51:17,049 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:51:22,062 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:51:22,489 - INFO - Found 0 thread(s) in total
2025-05-10 11:51:22,489 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:51:27,509 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:51:27,852 - INFO - Found 0 thread(s) in total
2025-05-10 11:51:27,852 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:55:22,850 - INFO - Starting Instagram Recipe Extractor
2025-05-10 11:55:22,850 - INFO - Initializing Appium driver...
2025-05-10 11:55:26,062 - INFO - Driver initialized successfully.
2025-05-10 11:55:26,062 - INFO - Loaded memory for 4 users
2025-05-10 11:55:26,062 - INFO - Waiting for Instagram app to load...
2025-05-10 11:55:31,067 - INFO - Navigating to DMs...
2025-05-10 11:55:35,064 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 11:55:35,493 - INFO - DM inbox indicator found successfully
2025-05-10 11:55:35,493 - INFO - DM inbox state verified.
2025-05-10 11:55:35,493 - INFO - Starting message scanning loop
2025-05-10 11:55:40,510 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:55:41,018 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 11:55:41,019 - INFO - Found 1 thread(s) in total
2025-05-10 11:55:41,019 - INFO - Processing thread 1 of 1
2025-05-10 11:55:41,625 - INFO - Identified user: docteurzed
2025-05-10 11:55:42,440 - INFO - Direct click on thread successful
2025-05-10 11:55:45,482 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 11:55:45,483 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:55:45,530 - INFO - Saved cropped post image for docteurzed
2025-05-10 11:55:48,210 - INFO - Verifying preview element using XPath...
2025-05-10 11:55:48,616 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:55:49,002 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 11:55:49,002 - INFO - User docteurzed is already onboarded
2025-05-10 11:55:49,002 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 11:55:57,544 - INFO - Checking for shared recipe post...
2025-05-10 11:55:58,296 - INFO - Found a shared post, opening it...
2025-05-10 11:55:59,221 - INFO - Tapped on post with mobile: tap command
2025-05-10 11:56:09,768 - INFO - Checking if caption needs expansion...
2025-05-10 11:56:10,077 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 11:56:10,077 - INFO - Tapping on 'More' to expand caption...
2025-05-10 11:56:10,886 - INFO - Caption expanded successfully
2025-05-10 11:56:12,892 - INFO - Extracting recipe caption...
2025-05-10 11:56:13,850 - INFO - Successfully extracted caption (793 chars)
2025-05-10 11:56:13,852 - INFO - Caption saved to captions/caption_docteurzed_1746903373.txt
2025-05-10 11:56:13,852 - INFO - Extracting caption and comments using unified parser...
2025-05-10 11:56:13,852 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 11:56:13,852 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 11:56:13,852 - INFO - Looking for comments button...
2025-05-10 11:56:14,643 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 11:56:16,353 - INFO - Tapped on comments button
2025-05-10 11:56:18,703 - INFO - Analyzing UI for comment elements...
2025-05-10 11:56:23,301 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 11:56:23,700 - INFO - Found 2 collection views
2025-05-10 11:56:23,848 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 11:56:24,237 - INFO - Collection view 0 has 1 cells
2025-05-10 11:56:24,376 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 11:56:24,939 - INFO -   Cell 0 has 4 text elements
2025-05-10 11:56:25,040 - INFO -     Text element 0: 'March 1'
2025-05-10 11:56:25,151 - INFO -     Text element 1: '256 comments'
2025-05-10 11:56:25,261 - INFO -     Text element 2: '196 shares'
2025-05-10 11:56:25,370 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 11:56:25,370 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 11:56:25,370 - INFO -     Text length: 793 characters
2025-05-10 11:56:25,370 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 11:56:25,538 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 11:56:26,606 - INFO - Collection view 1 has 8 cells
2025-05-10 11:56:26,724 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 11:56:27,119 - INFO -   Cell 0 has 2 text elements
2025-05-10 11:56:27,225 - INFO -     Text element 0: 'Reply'
2025-05-10 11:56:27,326 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 11:56:27,428 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 11:56:27,831 - INFO -   Cell 1 has 2 text elements
2025-05-10 11:56:27,932 - INFO -     Text element 0: 'Reply'
2025-05-10 11:56:28,042 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 11:56:28,147 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 11:56:28,512 - INFO -   Cell 2 has 2 text elements
2025-05-10 11:56:28,608 - INFO -     Text element 0: 'Reply'
2025-05-10 11:56:28,700 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 11:56:28,808 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 11:56:29,192 - INFO -   Cell 3 has 2 text elements
2025-05-10 11:56:29,303 - INFO -     Text element 0: 'Reply'
2025-05-10 11:56:29,429 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 11:56:29,544 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 11:56:29,929 - INFO -   Cell 4 has 2 text elements
2025-05-10 11:56:30,027 - INFO -     Text element 0: 'Reply'
2025-05-10 11:56:30,135 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 11:56:32,754 - INFO - Found 26 total text elements in the UI
2025-05-10 11:56:35,565 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 11:56:35,565 - INFO - Text length: 793 characters
2025-05-10 11:56:35,565 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 11:56:35,566 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 11:56:35,630 - INFO - Extracting recipe from text...
2025-05-10 11:56:42,056 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 11:56:42,061 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 11:56:42,061 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': "Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. A quick and easy dish that's perfect for weeknight meals or entertaining.", 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 11:56:45,221 - INFO - Dismissed comments sheet successfully.
2025-05-10 11:56:45,222 - INFO - Post hash e15b9d6c6ba8ba7b1d65b6e184663fff07d9d348aa3b74737e354ea4aebfcc0b already processed. Skipping extraction.
2025-05-10 11:56:45,222 - INFO - Sending cached PDF: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903051.pdf
2025-05-10 11:56:45,222 - INFO - Logging usage event for user=docteurzed, url=cached
2025-05-10 11:56:45,222 - ERROR - Failed to log usage event for cached PDF: cannot access local variable 'recipe_details' where it is not associated with a value
2025-05-10 11:56:45,222 - INFO - Exiting post view before confirmation messaging...
2025-05-10 11:56:48,212 - INFO - Successfully exited post view.
2025-05-10 11:56:48,213 - INFO - Sending PDF to user's email...
2025-05-10 11:56:48,639 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 11:56:51,776 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 11:56:51,778 - INFO - PDF sent via email successfully.
2025-05-10 11:56:59,371 - INFO - Confirmation message sent.
2025-05-10 11:56:59,371 - INFO - Returning to inbox...
2025-05-10 11:57:05,570 - INFO - Successfully returned to DM inbox using back button
2025-05-10 11:57:05,570 - INFO - Finished processing current unread threads.
2025-05-10 11:57:06,572 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:57:06,875 - INFO - Found 0 thread(s) in total
2025-05-10 11:57:06,875 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 11:58:46,986 - INFO - Starting Instagram Recipe Extractor
2025-05-10 11:58:46,986 - INFO - Initializing Appium driver...
2025-05-10 11:58:50,132 - INFO - Driver initialized successfully.
2025-05-10 11:58:50,133 - INFO - Loaded memory for 4 users
2025-05-10 11:58:50,133 - INFO - Waiting for Instagram app to load...
2025-05-10 11:58:55,138 - INFO - Navigating to DMs...
2025-05-10 11:58:59,477 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 11:58:59,913 - INFO - DM inbox indicator found successfully
2025-05-10 11:58:59,913 - INFO - DM inbox state verified.
2025-05-10 11:58:59,913 - INFO - Starting message scanning loop
2025-05-10 11:59:04,932 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 11:59:05,405 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 11:59:05,405 - INFO - Found 1 thread(s) in total
2025-05-10 11:59:05,405 - INFO - Processing thread 1 of 1
2025-05-10 11:59:05,953 - INFO - Identified user: docteurzed
2025-05-10 11:59:06,765 - INFO - Direct click on thread successful
2025-05-10 11:59:09,883 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 11:59:09,883 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:59:09,928 - INFO - Saved cropped post image for docteurzed
2025-05-10 11:59:12,594 - INFO - Verifying preview element using XPath...
2025-05-10 11:59:13,075 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 11:59:13,446 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 11:59:13,446 - INFO - User docteurzed is already onboarded
2025-05-10 11:59:13,446 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 11:59:21,940 - INFO - Checking for shared recipe post...
2025-05-10 11:59:22,691 - INFO - Found a shared post, opening it...
2025-05-10 11:59:23,570 - INFO - Tapped on post with mobile: tap command
2025-05-10 11:59:34,101 - INFO - Checking if caption needs expansion...
2025-05-10 11:59:34,397 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 11:59:34,398 - INFO - Tapping on 'More' to expand caption...
2025-05-10 11:59:35,196 - INFO - Caption expanded successfully
2025-05-10 11:59:37,201 - INFO - Extracting recipe caption...
2025-05-10 11:59:38,247 - INFO - Successfully extracted caption (793 chars)
2025-05-10 11:59:38,248 - INFO - Caption saved to captions/caption_docteurzed_1746903578.txt
2025-05-10 11:59:38,248 - INFO - Extracting caption and comments using unified parser...
2025-05-10 11:59:38,248 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 11:59:38,248 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 11:59:38,248 - INFO - Looking for comments button...
2025-05-10 11:59:39,031 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 11:59:40,629 - INFO - Tapped on comments button
2025-05-10 11:59:42,951 - INFO - Analyzing UI for comment elements...
2025-05-10 11:59:47,545 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 11:59:47,926 - INFO - Found 2 collection views
2025-05-10 11:59:48,069 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 11:59:48,429 - INFO - Collection view 0 has 1 cells
2025-05-10 11:59:48,559 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 11:59:49,132 - INFO -   Cell 0 has 4 text elements
2025-05-10 11:59:49,231 - INFO -     Text element 0: 'March 1'
2025-05-10 11:59:49,338 - INFO -     Text element 1: '256 comments'
2025-05-10 11:59:49,440 - INFO -     Text element 2: '196 shares'
2025-05-10 11:59:49,541 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 11:59:49,542 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 11:59:49,542 - INFO -     Text length: 793 characters
2025-05-10 11:59:49,542 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 11:59:49,692 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 11:59:50,790 - INFO - Collection view 1 has 8 cells
2025-05-10 11:59:50,907 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 11:59:51,301 - INFO -   Cell 0 has 2 text elements
2025-05-10 11:59:51,410 - INFO -     Text element 0: 'Reply'
2025-05-10 11:59:51,495 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 11:59:51,606 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 11:59:51,968 - INFO -   Cell 1 has 2 text elements
2025-05-10 11:59:52,072 - INFO -     Text element 0: 'Reply'
2025-05-10 11:59:52,162 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 11:59:52,264 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 11:59:52,655 - INFO -   Cell 2 has 2 text elements
2025-05-10 11:59:52,757 - INFO -     Text element 0: 'Reply'
2025-05-10 11:59:52,855 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 11:59:52,969 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 11:59:53,379 - INFO -   Cell 3 has 2 text elements
2025-05-10 11:59:53,475 - INFO -     Text element 0: 'Reply'
2025-05-10 11:59:53,574 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 11:59:53,670 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 11:59:54,063 - INFO -   Cell 4 has 2 text elements
2025-05-10 11:59:54,160 - INFO -     Text element 0: 'Reply'
2025-05-10 11:59:54,266 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 11:59:57,038 - INFO - Found 26 total text elements in the UI
2025-05-10 11:59:59,802 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 11:59:59,803 - INFO - Text length: 793 characters
2025-05-10 11:59:59,803 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 11:59:59,803 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 11:59:59,873 - INFO - Extracting recipe from text...
2025-05-10 12:00:05,870 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 12:00:05,876 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:00:05,876 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 12:00:09,019 - INFO - Dismissed comments sheet successfully.
2025-05-10 12:00:09,021 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 12:00:12,031 - INFO - Successfully exited post view before recipe processing.
2025-05-10 12:00:12,032 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 12:00:12,032 - INFO - Opening QR code modal to extract post URL...
2025-05-10 12:00:12,233 - WARNING - QR tap flow failed: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:00:12,233 - INFO - QR code screenshot not found — skipping URL extraction.
2025-05-10 12:00:12,233 - INFO - Recipe extraction successful.
2025-05-10 12:00:12,233 - INFO - Generating PDF from extracted recipe details...
2025-05-10 12:00:12,234 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:00:12,464 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 12:00:12,464 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903612.pdf
2025-05-10 12:00:12,465 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903612.pdf
2025-05-10 12:00:12,466 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 12:00:12,466 - INFO - Logging usage event for user=docteurzed
2025-05-10 12:00:14,357 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 12:00:14,357 - INFO - Sending PDF to user's email...
2025-05-10 12:00:14,701 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 12:00:17,950 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 12:00:17,951 - INFO - PDF sent via email successfully.
2025-05-10 12:00:24,995 - INFO - Returning to inbox...
2025-05-10 12:00:31,234 - INFO - Successfully returned to DM inbox using back button
2025-05-10 12:00:31,236 - INFO - User memory saved successfully
2025-05-10 12:00:31,236 - INFO - Returning to inbox...
2025-05-10 12:00:31,454 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:00:31,729 - ERROR - All back button strategies failed
2025-05-10 12:00:31,729 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:00:32,141 - INFO - DM inbox indicator found successfully
2025-05-10 12:00:32,141 - INFO - DM inbox state verified.
2025-05-10 12:00:32,141 - INFO - Inbox already detected despite back button failure.
2025-05-10 12:00:32,141 - INFO - Finished processing current unread threads.
2025-05-10 12:00:33,147 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:00:33,459 - INFO - Found 0 thread(s) in total
2025-05-10 12:00:33,460 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:00:41,347 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:00:41,347 - INFO - Initializing Appium driver...
2025-05-10 12:00:44,615 - INFO - Driver initialized successfully.
2025-05-10 12:00:44,616 - INFO - Loaded memory for 4 users
2025-05-10 12:00:44,616 - INFO - Waiting for Instagram app to load...
2025-05-10 12:00:49,621 - INFO - Navigating to DMs...
2025-05-10 12:00:53,847 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:00:54,274 - INFO - DM inbox indicator found successfully
2025-05-10 12:00:54,274 - INFO - DM inbox state verified.
2025-05-10 12:00:54,274 - INFO - Starting message scanning loop
2025-05-10 12:00:59,285 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:00:59,751 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:00:59,751 - INFO - Found 1 thread(s) in total
2025-05-10 12:00:59,751 - INFO - Processing thread 1 of 1
2025-05-10 12:01:00,301 - INFO - Identified user: docteurzed
2025-05-10 12:01:01,106 - INFO - Direct click on thread successful
2025-05-10 12:01:03,766 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:01:03,766 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:01:03,813 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:01:06,475 - INFO - Verifying preview element using XPath...
2025-05-10 12:01:06,908 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:01:07,287 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:01:07,287 - INFO - User docteurzed is already onboarded
2025-05-10 12:01:07,287 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:01:15,903 - INFO - Checking for shared recipe post...
2025-05-10 12:01:16,642 - INFO - Found a shared post, opening it...
2025-05-10 12:01:17,547 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:01:28,106 - INFO - Checking if caption needs expansion...
2025-05-10 12:01:28,383 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 12:01:28,383 - INFO - Tapping on 'More' to expand caption...
2025-05-10 12:01:29,186 - INFO - Caption expanded successfully
2025-05-10 12:01:31,191 - INFO - Extracting recipe caption...
2025-05-10 12:01:32,154 - INFO - Successfully extracted caption (793 chars)
2025-05-10 12:01:32,155 - INFO - Caption saved to captions/caption_docteurzed_1746903692.txt
2025-05-10 12:01:32,155 - INFO - Extracting caption and comments using unified parser...
2025-05-10 12:01:32,155 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 12:01:32,155 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 12:01:32,155 - INFO - Looking for comments button...
2025-05-10 12:01:32,914 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 12:01:34,500 - INFO - Tapped on comments button
2025-05-10 12:01:36,821 - INFO - Analyzing UI for comment elements...
2025-05-10 12:01:41,483 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 12:01:41,888 - INFO - Found 2 collection views
2025-05-10 12:01:42,023 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 12:01:42,388 - INFO - Collection view 0 has 1 cells
2025-05-10 12:01:42,508 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 12:01:43,116 - INFO -   Cell 0 has 4 text elements
2025-05-10 12:01:43,204 - INFO -     Text element 0: 'March 1'
2025-05-10 12:01:43,284 - INFO -     Text element 1: '256 comments'
2025-05-10 12:01:43,383 - INFO -     Text element 2: '196 shares'
2025-05-10 12:01:43,476 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 12:01:43,477 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 12:01:43,477 - INFO -     Text length: 793 characters
2025-05-10 12:01:43,477 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 12:01:43,631 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 12:01:44,735 - INFO - Collection view 1 has 8 cells
2025-05-10 12:01:44,827 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 12:01:45,233 - INFO -   Cell 0 has 2 text elements
2025-05-10 12:01:45,335 - INFO -     Text element 0: 'Reply'
2025-05-10 12:01:45,435 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 12:01:45,542 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 12:01:45,924 - INFO -   Cell 1 has 2 text elements
2025-05-10 12:01:46,032 - INFO -     Text element 0: 'Reply'
2025-05-10 12:01:46,139 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 12:01:46,247 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 12:01:46,620 - INFO -   Cell 2 has 2 text elements
2025-05-10 12:01:46,728 - INFO -     Text element 0: 'Reply'
2025-05-10 12:01:46,828 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 12:01:46,925 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 12:01:47,306 - INFO -   Cell 3 has 2 text elements
2025-05-10 12:01:47,400 - INFO -     Text element 0: 'Reply'
2025-05-10 12:01:47,504 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 12:01:47,621 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 12:01:48,014 - INFO -   Cell 4 has 2 text elements
2025-05-10 12:01:48,123 - INFO -     Text element 0: 'Reply'
2025-05-10 12:01:48,225 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 12:01:51,095 - INFO - Found 26 total text elements in the UI
2025-05-10 12:01:53,858 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 12:01:53,858 - INFO - Text length: 793 characters
2025-05-10 12:01:53,858 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 12:01:53,858 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 12:01:53,921 - INFO - Extracting recipe from text...
2025-05-10 12:01:59,669 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 12:01:59,673 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:01:59,673 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 12:02:02,846 - INFO - Dismissed comments sheet successfully.
2025-05-10 12:02:02,847 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 12:02:05,836 - INFO - Successfully exited post view before recipe processing.
2025-05-10 12:02:05,836 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 12:02:05,836 - INFO - Opening QR code modal to extract post URL...
2025-05-10 12:02:06,038 - WARNING - QR tap flow failed: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:02:06,038 - INFO - QR code screenshot not found — skipping URL extraction.
2025-05-10 12:02:06,038 - INFO - Recipe extraction successful.
2025-05-10 12:02:06,038 - INFO - Generating PDF from extracted recipe details...
2025-05-10 12:02:06,038 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:02:06,262 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 12:02:06,262 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903726.pdf
2025-05-10 12:02:06,262 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746903726.pdf
2025-05-10 12:02:06,263 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 12:02:06,264 - INFO - Logging usage event for user=docteurzed
2025-05-10 12:02:07,368 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 12:02:07,368 - INFO - Sending PDF to user's email...
2025-05-10 12:02:07,560 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 12:02:10,782 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 12:02:10,783 - INFO - PDF sent via email successfully.
2025-05-10 12:02:17,920 - INFO - Returning to inbox...
2025-05-10 12:02:24,156 - INFO - Successfully returned to DM inbox using back button
2025-05-10 12:02:24,157 - INFO - User memory saved successfully
2025-05-10 12:02:24,157 - INFO - Returning to inbox...
2025-05-10 12:02:24,341 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:02:24,570 - ERROR - All back button strategies failed
2025-05-10 12:02:24,570 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:02:24,970 - INFO - DM inbox indicator found successfully
2025-05-10 12:02:24,970 - INFO - DM inbox state verified.
2025-05-10 12:02:24,971 - INFO - Inbox already detected despite back button failure.
2025-05-10 12:02:24,971 - INFO - Finished processing current unread threads.
2025-05-10 12:02:25,976 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:02:26,231 - INFO - Found 0 thread(s) in total
2025-05-10 12:02:26,231 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:02:31,256 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:02:31,512 - INFO - Found 0 thread(s) in total
2025-05-10 12:02:31,512 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:06:57,923 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:06:57,923 - INFO - Initializing Appium driver...
2025-05-10 12:07:01,044 - INFO - Driver initialized successfully.
2025-05-10 12:07:01,046 - INFO - Loaded memory for 4 users
2025-05-10 12:07:01,046 - INFO - Waiting for Instagram app to load...
2025-05-10 12:07:06,051 - INFO - Navigating to DMs...
2025-05-10 12:07:10,046 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:07:10,459 - INFO - DM inbox indicator found successfully
2025-05-10 12:07:10,459 - INFO - DM inbox state verified.
2025-05-10 12:07:10,459 - INFO - Starting message scanning loop
2025-05-10 12:07:15,475 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:07:15,938 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:07:15,938 - INFO - Found 1 thread(s) in total
2025-05-10 12:07:15,938 - INFO - Processing thread 1 of 1
2025-05-10 12:07:16,486 - INFO - Identified user: docteurzed
2025-05-10 12:07:17,297 - INFO - Direct click on thread successful
2025-05-10 12:07:20,403 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:07:20,403 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:07:20,444 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:07:23,108 - INFO - Verifying preview element using XPath...
2025-05-10 12:07:23,564 - INFO - Found preview element with rect: {'y': -149, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:07:23,956 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:07:23,956 - INFO - User docteurzed is already onboarded
2025-05-10 12:07:23,956 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:07:32,559 - INFO - Checking for shared recipe post...
2025-05-10 12:07:33,289 - INFO - Found a shared post, opening it...
2025-05-10 12:07:34,263 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:07:44,770 - INFO - Checking if caption needs expansion...
2025-05-10 12:07:45,072 - INFO - Found caption expansion element using: -ios predicate string -> name CONTAINS 'More' AND visible==true
2025-05-10 12:07:45,072 - INFO - Tapping on 'More' to expand caption...
2025-05-10 12:07:45,878 - INFO - Caption expanded successfully
2025-05-10 12:07:47,881 - INFO - Extracting recipe caption...
2025-05-10 12:07:49,010 - INFO - Successfully extracted caption (793 chars)
2025-05-10 12:07:49,012 - INFO - Caption saved to captions/caption_docteurzed_1746904069.txt
2025-05-10 12:07:49,012 - INFO - Extracting caption and comments using unified parser...
2025-05-10 12:07:49,012 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 12:07:49,012 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 12:07:49,012 - INFO - Looking for comments button...
2025-05-10 12:07:49,779 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 12:07:51,431 - INFO - Tapped on comments button
2025-05-10 12:07:53,745 - INFO - Analyzing UI for comment elements...
2025-05-10 12:07:58,299 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 12:07:58,696 - INFO - Found 2 collection views
2025-05-10 12:07:58,837 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 12:07:59,193 - INFO - Collection view 0 has 1 cells
2025-05-10 12:07:59,329 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 12:07:59,909 - INFO -   Cell 0 has 4 text elements
2025-05-10 12:08:00,018 - INFO -     Text element 0: 'March 1'
2025-05-10 12:08:00,123 - INFO -     Text element 1: '256 comments'
2025-05-10 12:08:00,229 - INFO -     Text element 2: '196 shares'
2025-05-10 12:08:00,344 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 12:08:00,344 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 12:08:00,345 - INFO -     Text length: 793 characters
2025-05-10 12:08:00,345 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 12:08:00,509 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 12:08:01,614 - INFO - Collection view 1 has 8 cells
2025-05-10 12:08:01,716 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 12:08:02,090 - INFO -   Cell 0 has 2 text elements
2025-05-10 12:08:02,192 - INFO -     Text element 0: 'Reply'
2025-05-10 12:08:02,293 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 12:08:02,394 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 12:08:02,779 - INFO -   Cell 1 has 2 text elements
2025-05-10 12:08:02,890 - INFO -     Text element 0: 'Reply'
2025-05-10 12:08:02,991 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 12:08:03,090 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 12:08:03,485 - INFO -   Cell 2 has 2 text elements
2025-05-10 12:08:03,590 - INFO -     Text element 0: 'Reply'
2025-05-10 12:08:03,698 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 12:08:03,809 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 12:08:04,210 - INFO -   Cell 3 has 2 text elements
2025-05-10 12:08:04,323 - INFO -     Text element 0: 'Reply'
2025-05-10 12:08:04,413 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 12:08:04,519 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 12:08:04,889 - INFO -   Cell 4 has 2 text elements
2025-05-10 12:08:04,993 - INFO -     Text element 0: 'Reply'
2025-05-10 12:08:05,109 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 12:08:07,912 - INFO - Found 26 total text elements in the UI
2025-05-10 12:08:10,665 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 12:08:10,665 - INFO - Text length: 793 characters
2025-05-10 12:08:10,665 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 12:08:10,665 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 12:08:10,726 - INFO - Extracting recipe from text...
2025-05-10 12:08:16,634 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 12:08:16,640 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:08:16,641 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': "Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. A quick and easy dish that's perfect for weeknight meals or entertaining.", 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 12:08:19,794 - INFO - Dismissed comments sheet successfully.
2025-05-10 12:08:19,794 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 12:08:22,846 - INFO - Successfully exited post view before recipe processing.
2025-05-10 12:08:22,847 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 12:08:22,847 - INFO - Opening QR code modal to extract post URL...
2025-05-10 12:08:23,125 - WARNING - QR tap flow failed: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:08:23,125 - INFO - QR code screenshot not found — skipping URL extraction.
2025-05-10 12:08:23,125 - INFO - Recipe extraction successful.
2025-05-10 12:08:23,125 - INFO - Generating PDF from extracted recipe details...
2025-05-10 12:08:23,126 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 12:08:23,356 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 12:08:23,356 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746904103.pdf
2025-05-10 12:08:23,357 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746904103.pdf
2025-05-10 12:08:23,358 - INFO - [DELTA] Input chars: 793, Output chars: 611, Ratio: 0.77, Label: under-extracted
2025-05-10 12:08:23,358 - INFO - Logging usage event for user=docteurzed
2025-05-10 12:08:25,446 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 12:08:25,447 - INFO - Sending PDF to user's email...
2025-05-10 12:08:25,798 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 12:08:29,177 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 12:08:29,178 - INFO - PDF sent via email successfully.
2025-05-10 12:08:36,165 - INFO - Returning to inbox...
2025-05-10 12:08:42,441 - INFO - Successfully returned to DM inbox using back button
2025-05-10 12:08:42,443 - INFO - User memory saved successfully
2025-05-10 12:08:42,443 - INFO - Returning to inbox...
2025-05-10 12:08:42,658 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:08:42,893 - ERROR - All back button strategies failed
2025-05-10 12:08:42,893 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:14:08,126 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:14:08,126 - INFO - Initializing Appium driver...
2025-05-10 12:14:11,284 - INFO - Driver initialized successfully.
2025-05-10 12:14:11,285 - INFO - Loaded memory for 4 users
2025-05-10 12:14:11,285 - INFO - Waiting for Instagram app to load...
2025-05-10 12:14:16,288 - INFO - Navigating to DMs...
2025-05-10 12:14:20,649 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:14:30,813 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:14:30,813 - WARNING - DM inbox indicator not found within 10 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:14:31,095 - INFO - Starting message scanning loop
2025-05-10 12:14:36,112 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:14:36,331 - INFO - Found 0 thread(s) in total
2025-05-10 12:14:36,331 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:14:41,345 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:14:41,569 - INFO - Found 0 thread(s) in total
2025-05-10 12:14:41,569 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:14:46,583 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:14:47,060 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:14:47,060 - INFO - Found 1 thread(s) in total
2025-05-10 12:14:47,061 - INFO - Processing thread 1 of 1
2025-05-10 12:14:47,632 - INFO - Identified user: docteurzed
2025-05-10 12:14:48,451 - INFO - Direct click on thread successful
2025-05-10 12:14:51,093 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:14:51,093 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:14:51,133 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:14:53,782 - INFO - Verifying preview element using XPath...
2025-05-10 12:14:54,232 - INFO - Found preview element with rect: {'y': -120, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:14:54,648 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:14:54,648 - INFO - User docteurzed is already onboarded
2025-05-10 12:14:54,648 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:15:03,175 - INFO - Checking for shared recipe post...
2025-05-10 12:15:03,914 - INFO - Found a shared post, opening it...
2025-05-10 12:15:04,847 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:15:15,536 - INFO - Checking if caption needs expansion...
2025-05-10 12:15:15,742 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:15:18,330 - INFO - Extracting recipe caption...
2025-05-10 12:15:20,863 - INFO - Trying to scroll to reveal more content...
2025-05-10 12:15:21,713 - INFO - Swipe performed successfully
2025-05-10 12:15:26,647 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 12:15:26,767 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:15:29,362 - INFO - Returning to inbox...
2025-05-10 12:15:29,523 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:15:29,692 - ERROR - All back button strategies failed
2025-05-10 12:15:29,692 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:15:33,040 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:15:33,040 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:15:33,404 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 12:15:36,522 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:15:39,970 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:15:39,970 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:15:40,285 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 12:15:40,285 - INFO - Finished processing current unread threads.
2025-05-10 12:15:41,290 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:15:41,558 - INFO - Found 0 thread(s) in total
2025-05-10 12:15:41,559 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:15:46,581 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:15:46,823 - INFO - Found 0 thread(s) in total
2025-05-10 12:15:46,823 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:15:51,840 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:15:52,120 - INFO - Found 0 thread(s) in total
2025-05-10 12:15:52,121 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:19:33,861 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:19:33,862 - INFO - Initializing Appium driver...
2025-05-10 12:19:37,026 - INFO - Driver initialized successfully.
2025-05-10 12:19:37,026 - INFO - Loaded memory for 4 users
2025-05-10 12:19:37,026 - INFO - Waiting for Instagram app to load...
2025-05-10 12:19:42,032 - INFO - Navigating to DMs...
2025-05-10 12:19:45,991 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:19:46,395 - INFO - DM inbox indicator found successfully
2025-05-10 12:19:46,395 - INFO - DM inbox state verified.
2025-05-10 12:19:46,395 - INFO - Starting message scanning loop
2025-05-10 12:19:51,420 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:19:51,889 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:19:51,889 - INFO - Found 1 thread(s) in total
2025-05-10 12:19:51,890 - INFO - Processing thread 1 of 1
2025-05-10 12:19:52,437 - INFO - Identified user: docteurzed
2025-05-10 12:19:53,217 - INFO - Direct click on thread successful
2025-05-10 12:19:55,979 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:19:55,979 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:19:56,028 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:19:58,684 - INFO - Verifying preview element using XPath...
2025-05-10 12:19:59,138 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:19:59,526 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:19:59,526 - INFO - User docteurzed is already onboarded
2025-05-10 12:19:59,526 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:20:08,077 - INFO - Checking for shared recipe post...
2025-05-10 12:20:08,692 - INFO - Found a shared post, opening it...
2025-05-10 12:20:09,492 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:20:20,022 - INFO - Checking if caption needs expansion...
2025-05-10 12:20:20,217 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:20:22,792 - INFO - Extracting recipe caption...
2025-05-10 12:20:25,759 - INFO - Trying to scroll to reveal more content...
2025-05-10 12:20:26,588 - INFO - Swipe performed successfully
2025-05-10 12:20:31,076 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 12:20:31,193 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:20:33,769 - INFO - Returning to inbox...
2025-05-10 12:20:33,931 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:20:34,086 - ERROR - All back button strategies failed
2025-05-10 12:20:34,086 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:20:37,375 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:20:37,375 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:20:38,044 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 12:20:41,159 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:20:44,823 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:20:44,824 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:20:45,275 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 12:20:45,275 - INFO - Finished processing current unread threads.
2025-05-10 12:20:46,281 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:20:46,959 - INFO - Found 0 thread(s) in total
2025-05-10 12:20:46,959 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:35:12,137 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:35:12,137 - INFO - Initializing Appium driver...
2025-05-10 12:35:15,269 - INFO - Driver initialized successfully.
2025-05-10 12:35:15,271 - INFO - Loaded memory for 4 users
2025-05-10 12:35:15,271 - INFO - Waiting for Instagram app to load...
2025-05-10 12:35:28,135 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:35:28,135 - INFO - Initializing Appium driver...
2025-05-10 12:35:31,319 - INFO - Driver initialized successfully.
2025-05-10 12:35:31,320 - INFO - Loaded memory for 4 users
2025-05-10 12:35:31,321 - INFO - Waiting for Instagram app to load...
2025-05-10 12:35:36,324 - INFO - Navigating to DMs...
2025-05-10 12:35:40,336 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:35:40,760 - INFO - DM inbox indicator found successfully
2025-05-10 12:35:40,761 - INFO - DM inbox state verified.
2025-05-10 12:35:40,761 - INFO - Starting message scanning loop
2025-05-10 12:35:45,782 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:35:46,270 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:35:46,270 - INFO - Found 1 thread(s) in total
2025-05-10 12:35:46,270 - INFO - Processing thread 1 of 1
2025-05-10 12:35:46,841 - INFO - Identified user: docteurzed
2025-05-10 12:35:47,638 - INFO - Direct click on thread successful
2025-05-10 12:35:50,115 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:35:50,115 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:35:50,157 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:35:52,732 - INFO - Verifying preview element using XPath...
2025-05-10 12:35:53,173 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:35:53,564 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:35:53,564 - INFO - User docteurzed is already onboarded
2025-05-10 12:35:53,564 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:36:02,110 - INFO - Checking for shared recipe post...
2025-05-10 12:36:02,855 - INFO - Found a shared post, opening it...
2025-05-10 12:36:03,722 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:36:14,315 - INFO - Checking if caption needs expansion...
2025-05-10 12:36:14,507 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:36:16,889 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 12:36:17,097 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 12:36:17,310 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 12:36:17,544 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 12:36:17,756 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 12:36:17,952 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 12:36:18,142 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 12:36:18,335 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 12:36:18,531 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 12:36:18,744 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 12:36:18,959 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 12:36:19,158 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 12:36:19,358 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 12:36:19,561 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 12:36:19,764 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 12:36:19,973 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 12:36:20,191 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 12:36:20,404 - INFO - [QR DEBUG] Button 17 — name: 31535 likes, label: 31535 likes, value: None
2025-05-10 12:36:20,609 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 12:36:20,828 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 12:36:21,026 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 12:36:21,215 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 12:36:21,406 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 12:36:23,412 - INFO - Extracting recipe caption...
2025-05-10 12:36:26,161 - INFO - Trying to scroll to reveal more content...
2025-05-10 12:36:26,982 - INFO - Swipe performed successfully
2025-05-10 12:36:31,617 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 12:36:31,746 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:36:34,352 - INFO - Returning to inbox...
2025-05-10 12:36:34,481 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:36:34,640 - ERROR - All back button strategies failed
2025-05-10 12:36:34,641 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:36:38,022 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:36:38,022 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:36:38,334 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 12:36:41,450 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:36:44,506 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:36:44,506 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:36:44,994 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 12:36:44,994 - INFO - Finished processing current unread threads.
2025-05-10 12:36:45,999 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:36:46,263 - INFO - Found 0 thread(s) in total
2025-05-10 12:36:46,263 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:36:51,273 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:36:51,515 - INFO - Found 0 thread(s) in total
2025-05-10 12:36:51,515 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:37:16,388 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:37:16,388 - INFO - Initializing Appium driver...
2025-05-10 12:37:19,570 - INFO - Driver initialized successfully.
2025-05-10 12:37:19,571 - INFO - Loaded memory for 4 users
2025-05-10 12:37:19,571 - INFO - Waiting for Instagram app to load...
2025-05-10 12:37:24,575 - INFO - Navigating to DMs...
2025-05-10 12:37:28,549 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:37:28,971 - INFO - DM inbox indicator found successfully
2025-05-10 12:37:28,972 - INFO - DM inbox state verified.
2025-05-10 12:37:28,972 - INFO - Starting message scanning loop
2025-05-10 12:37:33,992 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:37:34,464 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:37:34,464 - INFO - Found 1 thread(s) in total
2025-05-10 12:37:34,464 - INFO - Processing thread 1 of 1
2025-05-10 12:37:35,023 - INFO - Identified user: docteurzed
2025-05-10 12:37:35,850 - INFO - Direct click on thread successful
2025-05-10 12:37:38,746 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:37:38,746 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:37:38,788 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:37:41,451 - INFO - Verifying preview element using XPath...
2025-05-10 12:37:41,909 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:37:42,299 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:37:42,299 - INFO - User docteurzed is already onboarded
2025-05-10 12:37:42,299 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:37:50,820 - INFO - Checking for shared recipe post...
2025-05-10 12:37:51,551 - INFO - Found a shared post, opening it...
2025-05-10 12:37:52,423 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:38:02,904 - INFO - Checking if caption needs expansion...
2025-05-10 12:38:03,100 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:38:05,471 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 12:38:05,683 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 12:38:05,909 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 12:38:06,142 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 12:38:06,342 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 12:38:06,559 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 12:38:06,867 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 12:38:07,085 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 12:38:07,279 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 12:38:07,509 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 12:38:07,699 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 12:38:07,899 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 12:38:08,107 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 12:38:08,312 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 12:38:08,520 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 12:38:08,727 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 12:38:08,922 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 12:38:09,134 - INFO - [QR DEBUG] Button 17 — name: 31535 likes, label: 31535 likes, value: None
2025-05-10 12:38:09,336 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 12:38:09,539 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 12:38:09,734 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 12:38:09,942 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 12:38:10,151 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 12:38:12,156 - INFO - Extracting recipe caption...
2025-05-10 12:38:14,968 - INFO - Trying to scroll to reveal more content...
2025-05-10 12:38:15,778 - INFO - Swipe performed successfully
2025-05-10 12:38:19,106 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 12:38:19,200 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:38:21,688 - INFO - Returning to inbox...
2025-05-10 12:38:21,822 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:38:21,948 - ERROR - All back button strategies failed
2025-05-10 12:38:21,948 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:38:25,221 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:38:25,221 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:38:25,607 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 12:38:28,720 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:38:32,052 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:38:32,052 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:38:32,523 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 12:38:32,523 - INFO - Finished processing current unread threads.
2025-05-10 12:38:33,528 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:38:34,002 - INFO - Found 0 thread(s) in total
2025-05-10 12:38:34,002 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:38:39,024 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:38:39,237 - INFO - Found 0 thread(s) in total
2025-05-10 12:38:39,237 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:46:33,995 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:46:33,995 - INFO - Initializing Appium driver...
2025-05-10 12:46:37,182 - INFO - Driver initialized successfully.
2025-05-10 12:46:37,183 - INFO - Loaded memory for 4 users
2025-05-10 12:46:37,183 - INFO - Waiting for Instagram app to load...
2025-05-10 12:46:42,188 - INFO - Navigating to DMs...
2025-05-10 12:46:46,278 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:46:46,713 - INFO - DM inbox indicator found successfully
2025-05-10 12:46:46,713 - INFO - DM inbox state verified.
2025-05-10 12:46:46,713 - INFO - Starting message scanning loop
2025-05-10 12:46:51,727 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:46:52,041 - INFO - Found 0 thread(s) in total
2025-05-10 12:46:52,041 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:46:57,060 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:46:57,365 - INFO - Found 0 thread(s) in total
2025-05-10 12:46:57,365 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:47:02,387 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:47:02,879 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:47:02,879 - INFO - Found 1 thread(s) in total
2025-05-10 12:47:02,880 - INFO - Processing thread 1 of 1
2025-05-10 12:47:03,432 - INFO - Identified user: docteurzed
2025-05-10 12:47:04,258 - INFO - Direct click on thread successful
2025-05-10 12:47:06,508 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:47:06,508 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:47:06,549 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:47:09,194 - INFO - Verifying preview element using XPath...
2025-05-10 12:47:09,611 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:47:10,000 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:47:10,000 - INFO - User docteurzed is already onboarded
2025-05-10 12:47:10,000 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:47:18,501 - INFO - Checking for shared recipe post...
2025-05-10 12:47:19,213 - INFO - Found a shared post, opening it...
2025-05-10 12:47:20,125 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:47:30,696 - INFO - Checking if caption needs expansion...
2025-05-10 12:47:30,899 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:47:33,472 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 12:47:33,672 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 12:47:33,869 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 12:47:34,073 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 12:47:34,279 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 12:47:34,482 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 12:47:34,666 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 12:47:34,863 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 12:47:35,071 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 12:47:35,266 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 12:47:35,470 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 12:47:35,665 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 12:47:35,841 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 12:47:36,038 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 12:47:36,226 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 12:47:36,431 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 12:47:36,637 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 12:47:36,862 - INFO - [QR DEBUG] Button 17 — name: 31535 likes, label: 31535 likes, value: None
2025-05-10 12:47:37,067 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 12:47:37,254 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 12:47:37,467 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 12:47:37,670 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 12:47:37,862 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 12:47:39,867 - INFO - Extracting recipe caption...
2025-05-10 12:47:42,583 - INFO - Trying to scroll to reveal more content...
2025-05-10 12:47:43,397 - INFO - Swipe performed successfully
2025-05-10 12:47:47,976 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 12:47:48,100 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:47:50,706 - INFO - Returning to inbox...
2025-05-10 12:47:50,849 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:47:51,002 - ERROR - All back button strategies failed
2025-05-10 12:47:51,002 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:51:52,497 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:51:52,497 - INFO - Initializing Appium driver...
2025-05-10 12:51:55,659 - INFO - Driver initialized successfully.
2025-05-10 12:51:55,661 - INFO - Loaded memory for 4 users
2025-05-10 12:51:55,661 - INFO - Waiting for Instagram app to load...
2025-05-10 12:52:00,666 - INFO - Navigating to DMs...
2025-05-10 12:52:04,656 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:52:05,095 - INFO - DM inbox indicator found successfully
2025-05-10 12:52:05,095 - INFO - DM inbox state verified.
2025-05-10 12:52:05,095 - INFO - Starting message scanning loop
2025-05-10 12:52:10,117 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:52:10,603 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:52:10,604 - INFO - Found 1 thread(s) in total
2025-05-10 12:52:10,605 - INFO - Processing thread 1 of 1
2025-05-10 12:52:11,174 - INFO - Identified user: docteurzed
2025-05-10 12:52:11,975 - INFO - Direct click on thread successful
2025-05-10 12:52:14,722 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:52:14,722 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:52:14,768 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:52:17,402 - INFO - Verifying preview element using XPath...
2025-05-10 12:52:17,822 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:52:18,214 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 12:52:18,214 - INFO - User docteurzed is already onboarded
2025-05-10 12:52:18,214 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 12:52:26,787 - INFO - Checking for shared recipe post...
2025-05-10 12:52:27,517 - INFO - Found a shared post, opening it...
2025-05-10 12:52:28,379 - INFO - Tapped on post with mobile: tap command
2025-05-10 12:52:38,916 - INFO - Checking if caption needs expansion...
2025-05-10 12:52:39,112 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 12:52:41,888 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 12:52:42,087 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 12:52:42,282 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 12:52:42,480 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 12:52:42,693 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 12:52:42,873 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 12:52:43,071 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 12:52:43,279 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 12:52:43,507 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 12:52:43,716 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 12:52:43,906 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 12:52:44,126 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 12:52:44,321 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 12:52:44,524 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 12:52:44,721 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 12:52:44,920 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 12:52:45,107 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 12:52:45,322 - INFO - [QR DEBUG] Button 17 — name: 31535 likes, label: 31535 likes, value: None
2025-05-10 12:52:45,513 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 12:52:45,723 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 12:52:45,921 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 12:52:46,121 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 12:52:46,321 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 12:52:48,324 - INFO - Extracting recipe caption...
2025-05-10 12:52:50,074 - ERROR - Error processing post: Message: The previously found element "StaticText" is not present in the current view anymore. Make sure the application UI has the expected state. Original error: Error getting main window kAXErrorInvalidUIElement; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
StaleElementReferenceError: The previously found element "StaticText" is not present in the current view anymore. Make sure the application UI has the expected state. Original error: Error getting main window kAXErrorInvalidUIElement
    at errorFromW3CJsonCode (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/protocol/errors.js:1110:25)
    at ProxyRequestError.getActualError (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/protocol/errors.js:979:14)
    at JWProxy.command (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/jsonwp-proxy/proxy.js:357:19)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.proxyCommand (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/proxy-helper.js:100:35)
    at XCUITestDriver.getNativeAttribute (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/element.js:113:7)
    at XCUITestDriver.getAttribute (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/element.js:128:14)
2025-05-10 12:52:50,076 - ERROR - Traceback (most recent call last):
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/appium_actor.py", line 739, in process_unread_threads
    text = element.get_attribute("value") or element.get_attribute("name") or element.get_attribute("label") or ""
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/webelement.py", line 56, in get_attribute
    resp = self._execute(RemoteCommand.GET_ELEMENT_ATTRIBUTE, {'name': name})
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webelement.py", line 572, in _execute
    return self._parent.execute(command, params)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py", line 448, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/shahin/Developer/98Chimp/fetch-bites-multi-agent/venv/lib/python3.13/site-packages/appium/webdriver/errorhandler.py", line 125, in check_response
    raise exception_class(msg=message, stacktrace=format_stacktrace(stacktrace))
selenium.common.exceptions.StaleElementReferenceException: Message: The previously found element "StaticText" is not present in the current view anymore. Make sure the application UI has the expected state. Original error: Error getting main window kAXErrorInvalidUIElement; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
StaleElementReferenceError: The previously found element "StaticText" is not present in the current view anymore. Make sure the application UI has the expected state. Original error: Error getting main window kAXErrorInvalidUIElement
    at errorFromW3CJsonCode (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/protocol/errors.js:1110:25)
    at ProxyRequestError.getActualError (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/protocol/errors.js:979:14)
    at JWProxy.command (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/node_modules/@appium/base-driver/lib/jsonwp-proxy/proxy.js:357:19)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.proxyCommand (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/proxy-helper.js:100:35)
    at XCUITestDriver.getNativeAttribute (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/element.js:113:7)
    at XCUITestDriver.getAttribute (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/element.js:128:14)

2025-05-10 12:52:50,787 - INFO - Returning to inbox...
2025-05-10 12:52:50,903 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:52:51,036 - ERROR - All back button strategies failed
2025-05-10 12:52:51,036 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:52:54,303 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:52:54,303 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:52:54,700 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 12:52:57,813 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 12:53:01,368 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 12:53:01,368 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 12:53:01,932 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 12:53:01,933 - INFO - Finished processing current unread threads.
2025-05-10 12:53:02,938 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:53:03,169 - INFO - Found 0 thread(s) in total
2025-05-10 12:53:03,169 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:53:08,189 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:53:08,451 - INFO - Found 0 thread(s) in total
2025-05-10 12:53:08,451 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 12:59:34,534 - INFO - Starting Instagram Recipe Extractor
2025-05-10 12:59:34,535 - INFO - Initializing Appium driver...
2025-05-10 12:59:37,720 - INFO - Driver initialized successfully.
2025-05-10 12:59:37,727 - INFO - Loaded memory for 4 users
2025-05-10 12:59:37,727 - INFO - Waiting for Instagram app to load...
2025-05-10 12:59:42,732 - INFO - Navigating to DMs...
2025-05-10 12:59:46,738 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 12:59:47,150 - INFO - DM inbox indicator found successfully
2025-05-10 12:59:47,151 - INFO - DM inbox state verified.
2025-05-10 12:59:47,151 - INFO - Starting message scanning loop
2025-05-10 12:59:52,166 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 12:59:52,601 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 12:59:52,601 - INFO - Found 1 thread(s) in total
2025-05-10 12:59:52,603 - INFO - Processing thread 1 of 1
2025-05-10 12:59:53,171 - INFO - Identified user: docteurzed
2025-05-10 12:59:53,981 - INFO - Direct click on thread successful
2025-05-10 12:59:56,638 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 12:59:56,638 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 12:59:56,679 - INFO - Saved cropped post image for docteurzed
2025-05-10 12:59:59,343 - INFO - Verifying preview element using XPath...
2025-05-10 12:59:59,831 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:00:00,252 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 13:00:00,252 - INFO - User docteurzed is already onboarded
2025-05-10 13:00:00,252 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 13:00:08,776 - INFO - Checking for shared recipe post...
2025-05-10 13:00:09,488 - INFO - Found a shared post, opening it...
2025-05-10 13:00:10,455 - INFO - Tapped on post with mobile: tap command
2025-05-10 13:00:20,934 - INFO - Checking if caption needs expansion...
2025-05-10 13:00:21,153 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 13:00:24,197 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 13:00:25,821 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 13:00:26,009 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 13:00:26,201 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 13:00:26,412 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 13:00:26,627 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 13:00:26,831 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 13:00:27,045 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 13:00:27,255 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 13:00:27,507 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 13:00:27,759 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 13:00:27,977 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 13:00:28,177 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 13:00:28,382 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 13:00:28,616 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 13:00:28,824 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 13:00:29,040 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 13:00:29,270 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 13:00:29,459 - INFO - [QR DEBUG] Button 17 — name: 31537 likes, label: 31537 likes, value: None
2025-05-10 13:00:29,706 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 13:00:29,922 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 13:00:30,143 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 13:00:30,337 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 13:00:30,564 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 13:00:32,565 - INFO - Extracting recipe caption...
2025-05-10 13:00:35,212 - INFO - Trying to scroll to reveal more content...
2025-05-10 13:00:36,175 - INFO - Swipe performed successfully
2025-05-10 13:02:30,190 - INFO - Starting Instagram Recipe Extractor
2025-05-10 13:02:30,190 - INFO - Initializing Appium driver...
2025-05-10 13:02:33,366 - INFO - Driver initialized successfully.
2025-05-10 13:02:33,367 - INFO - Loaded memory for 4 users
2025-05-10 13:02:33,367 - INFO - Waiting for Instagram app to load...
2025-05-10 13:02:38,369 - INFO - Navigating to DMs...
2025-05-10 13:02:42,359 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 13:02:42,708 - INFO - DM inbox indicator found successfully
2025-05-10 13:02:42,708 - INFO - DM inbox state verified.
2025-05-10 13:02:42,708 - INFO - Starting message scanning loop
2025-05-10 13:02:47,723 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 13:02:48,102 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 13:02:48,102 - INFO - Found 1 thread(s) in total
2025-05-10 13:02:48,104 - INFO - Processing thread 1 of 1
2025-05-10 13:02:48,527 - INFO - Identified user: docteurzed
2025-05-10 13:02:49,262 - INFO - Direct click on thread successful
2025-05-10 13:02:51,406 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 13:02:51,406 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:02:51,453 - INFO - Saved cropped post image for docteurzed
2025-05-10 13:02:54,016 - INFO - Verifying preview element using XPath...
2025-05-10 13:02:54,375 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:02:54,780 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 13:02:54,780 - INFO - User docteurzed is already onboarded
2025-05-10 13:02:54,780 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 13:03:02,878 - INFO - Checking for shared recipe post...
2025-05-10 13:03:03,504 - INFO - Found a shared post, opening it...
2025-05-10 13:03:04,287 - INFO - Tapped on post with mobile: tap command
2025-05-10 13:03:14,838 - INFO - Checking if caption needs expansion...
2025-05-10 13:03:15,043 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 13:03:18,093 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 13:03:19,900 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 13:03:20,098 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 13:03:20,293 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 13:03:20,500 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 13:03:20,696 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 13:03:20,886 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 13:03:21,102 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 13:03:21,329 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 13:03:21,532 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 13:03:21,753 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 13:03:21,966 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 13:03:22,163 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 13:03:22,361 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 13:03:22,567 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 13:03:22,779 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 13:03:22,975 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 13:03:23,192 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 13:03:23,394 - INFO - [QR DEBUG] Button 17 — name: 31537 likes, label: 31537 likes, value: None
2025-05-10 13:03:23,597 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 13:03:23,798 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 13:03:23,990 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 13:03:24,189 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 13:03:24,392 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 13:03:26,394 - INFO - Extracting recipe caption...
2025-05-10 13:03:28,946 - INFO - Trying to scroll to reveal more content...
2025-05-10 13:03:29,776 - INFO - Swipe performed successfully
2025-05-10 13:03:34,640 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 13:03:34,770 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:03:37,375 - INFO - Returning to inbox...
2025-05-10 13:03:37,519 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:03:37,677 - ERROR - All back button strategies failed
2025-05-10 13:03:37,677 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 13:03:41,063 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 13:03:41,063 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:03:41,458 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 13:09:14,011 - INFO - Starting Instagram Recipe Extractor
2025-05-10 13:09:14,012 - INFO - Initializing Appium driver...
2025-05-10 13:09:17,097 - INFO - Driver initialized successfully.
2025-05-10 13:09:17,098 - INFO - Loaded memory for 4 users
2025-05-10 13:09:17,099 - INFO - Waiting for Instagram app to load...
2025-05-10 13:09:22,104 - INFO - Navigating to DMs...
2025-05-10 13:09:26,050 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 13:09:26,553 - INFO - DM inbox indicator found successfully
2025-05-10 13:09:26,553 - INFO - DM inbox state verified.
2025-05-10 13:09:26,553 - INFO - Starting message scanning loop
2025-05-10 13:09:31,576 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 13:09:32,032 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 13:09:32,032 - INFO - Found 1 thread(s) in total
2025-05-10 13:09:32,034 - INFO - Processing thread 1 of 1
2025-05-10 13:09:32,566 - INFO - Identified user: docteurzed
2025-05-10 13:09:33,358 - INFO - Direct click on thread successful
2025-05-10 13:09:36,520 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 13:09:36,520 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:09:36,568 - INFO - Saved cropped post image for docteurzed
2025-05-10 13:09:39,193 - INFO - Verifying preview element using XPath...
2025-05-10 13:09:39,657 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:09:40,053 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 13:09:40,053 - INFO - User docteurzed is already onboarded
2025-05-10 13:09:40,053 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 13:09:48,618 - INFO - Checking for shared recipe post...
2025-05-10 13:09:49,345 - INFO - Found a shared post, opening it...
2025-05-10 13:09:50,218 - INFO - Tapped on post with mobile: tap command
2025-05-10 13:10:00,779 - INFO - Checking if caption needs expansion...
2025-05-10 13:10:00,970 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 13:10:04,133 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 13:10:05,801 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 13:10:06,013 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 13:10:06,261 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 13:10:06,467 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 13:10:06,667 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 13:10:06,863 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 13:10:07,068 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 13:10:07,268 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 13:10:07,466 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 13:10:07,681 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 13:10:07,903 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 13:10:08,112 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 13:10:08,331 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 13:10:08,537 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 13:10:08,734 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 13:10:08,966 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 13:10:09,156 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 13:10:09,351 - INFO - [QR DEBUG] Button 17 — name: 31537 likes, label: 31537 likes, value: None
2025-05-10 13:10:09,559 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 13:10:09,754 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 13:10:09,966 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 13:10:10,161 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 13:10:10,363 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 13:10:12,369 - INFO - Extracting recipe caption...
2025-05-10 13:10:15,094 - INFO - Trying to scroll to reveal more content...
2025-05-10 13:10:15,929 - INFO - Swipe performed successfully
2025-05-10 13:10:20,691 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 13:10:20,820 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:10:23,439 - INFO - Returning to inbox...
2025-05-10 13:10:23,584 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:10:23,739 - ERROR - All back button strategies failed
2025-05-10 13:10:23,739 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 13:10:27,106 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 13:10:27,106 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:10:27,495 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 13:14:27,753 - INFO - Starting Instagram Recipe Extractor
2025-05-10 13:14:27,754 - INFO - Initializing Appium driver...
2025-05-10 13:14:30,891 - INFO - Driver initialized successfully.
2025-05-10 13:14:30,892 - INFO - Loaded memory for 4 users
2025-05-10 13:14:30,892 - INFO - Waiting for Instagram app to load...
2025-05-10 13:14:35,895 - INFO - Navigating to DMs...
2025-05-10 13:14:39,858 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 13:14:40,269 - INFO - DM inbox indicator found successfully
2025-05-10 13:14:40,269 - INFO - DM inbox state verified.
2025-05-10 13:14:40,269 - INFO - Starting message scanning loop
2025-05-10 13:14:45,290 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 13:14:45,725 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 13:14:45,725 - INFO - Found 1 thread(s) in total
2025-05-10 13:14:45,726 - INFO - Processing thread 1 of 1
2025-05-10 13:14:46,261 - INFO - Identified user: docteurzed
2025-05-10 13:14:46,996 - INFO - Direct click on thread successful
2025-05-10 13:14:49,949 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 13:14:49,949 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:14:49,992 - INFO - Saved cropped post image for docteurzed
2025-05-10 13:14:52,634 - INFO - Verifying preview element using XPath...
2025-05-10 13:14:53,117 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 13:14:53,507 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 13:14:53,507 - INFO - User docteurzed is already onboarded
2025-05-10 13:14:53,507 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 13:15:02,103 - INFO - Checking for shared recipe post...
2025-05-10 13:15:02,840 - INFO - Found a shared post, opening it...
2025-05-10 13:15:03,720 - INFO - Tapped on post with mobile: tap command
2025-05-10 13:15:14,248 - INFO - Checking if caption needs expansion...
2025-05-10 13:15:14,439 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 13:15:17,456 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 13:15:19,438 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 13:15:19,630 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 13:15:19,839 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 13:15:20,034 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 13:15:20,252 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 13:15:20,458 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 13:15:20,673 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 13:15:20,899 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 13:15:21,086 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 13:15:21,305 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 13:15:21,532 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 13:15:21,734 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 13:15:21,936 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 13:15:22,151 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 13:15:22,363 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 13:15:22,555 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 13:15:22,766 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 13:15:22,968 - INFO - [QR DEBUG] Button 17 — name: 31537 likes, label: 31537 likes, value: None
2025-05-10 13:15:23,154 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 13:15:23,380 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 13:15:23,612 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 13:15:23,821 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 13:15:24,017 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 13:15:26,021 - INFO - Extracting recipe caption...
2025-05-10 13:15:28,803 - INFO - Trying to scroll to reveal more content...
2025-05-10 13:15:29,624 - INFO - Swipe performed successfully
2025-05-10 13:15:34,579 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 13:15:34,703 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:15:37,305 - INFO - Returning to inbox...
2025-05-10 13:15:37,449 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 13:15:37,600 - ERROR - All back button strategies failed
2025-05-10 13:15:37,600 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 15:30:02,390 - INFO - Starting Instagram Recipe Extractor
2025-05-10 15:30:02,390 - INFO - Initializing Appium driver...
2025-05-10 15:30:05,581 - INFO - Driver initialized successfully.
2025-05-10 15:30:05,582 - INFO - Loaded memory for 4 users
2025-05-10 15:30:05,582 - INFO - Waiting for Instagram app to load...
2025-05-10 15:30:10,585 - INFO - Navigating to DMs...
2025-05-10 15:30:14,544 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 15:30:14,928 - INFO - DM inbox indicator found successfully
2025-05-10 15:30:14,929 - INFO - DM inbox state verified.
2025-05-10 15:30:14,929 - INFO - Starting message scanning loop
2025-05-10 15:30:19,945 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:20,232 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:20,232 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:25,253 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:25,490 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:25,490 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:30,509 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:30,815 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:30,815 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:35,835 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:36,142 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:36,142 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:41,161 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:41,467 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:41,468 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:46,479 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:46,792 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:46,792 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:51,814 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:52,117 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:52,117 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:30:57,141 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:30:57,455 - INFO - Found 0 thread(s) in total
2025-05-10 15:30:57,455 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:31:02,477 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:31:02,958 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 15:31:02,958 - INFO - Found 1 thread(s) in total
2025-05-10 15:31:02,960 - INFO - Processing thread 1 of 1
2025-05-10 15:31:03,513 - INFO - Identified user: docteurzed
2025-05-10 15:31:04,302 - INFO - Direct click on thread successful
2025-05-10 15:31:07,072 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 15:31:07,072 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:31:07,112 - INFO - Saved cropped post image for docteurzed
2025-05-10 15:31:09,788 - INFO - Verifying preview element using XPath...
2025-05-10 15:31:10,214 - INFO - Found preview element with rect: {'y': -142, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:31:10,606 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 15:31:10,606 - INFO - User docteurzed is already onboarded
2025-05-10 15:31:10,606 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 15:31:19,161 - INFO - Checking for shared recipe post...
2025-05-10 15:31:19,872 - INFO - Found a shared post, opening it...
2025-05-10 15:31:20,856 - INFO - Tapped on post with mobile: tap command
2025-05-10 15:31:31,333 - INFO - Checking if caption needs expansion...
2025-05-10 15:31:31,535 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 15:31:34,622 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 15:31:36,422 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 15:31:36,651 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 15:31:36,841 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 15:31:37,047 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 15:31:37,260 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 15:31:37,446 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 15:31:37,657 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 15:31:37,877 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 15:31:38,094 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 15:31:38,306 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 15:31:38,511 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 15:31:38,700 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 15:31:38,893 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 15:31:39,111 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 15:31:39,310 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 15:31:39,504 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 15:31:39,705 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 15:31:39,915 - INFO - [QR DEBUG] Button 17 — name: 31541 likes, label: 31541 likes, value: None
2025-05-10 15:31:40,109 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 15:31:40,313 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 15:31:40,497 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 15:31:40,706 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 15:31:40,916 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 15:31:42,919 - INFO - Extracting recipe caption...
2025-05-10 15:31:45,481 - INFO - Trying to scroll to reveal more content...
2025-05-10 15:31:46,297 - INFO - Swipe performed successfully
2025-05-10 15:42:48,658 - INFO - Starting Instagram Recipe Extractor
2025-05-10 15:42:48,658 - INFO - Initializing Appium driver...
2025-05-10 15:42:51,806 - INFO - Driver initialized successfully.
2025-05-10 15:42:51,807 - INFO - Loaded memory for 4 users
2025-05-10 15:42:51,807 - INFO - Waiting for Instagram app to load...
2025-05-10 15:42:56,807 - INFO - Navigating to DMs...
2025-05-10 15:43:00,806 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 15:43:01,190 - INFO - DM inbox indicator found successfully
2025-05-10 15:43:01,190 - INFO - DM inbox state verified.
2025-05-10 15:43:01,190 - INFO - Starting message scanning loop
2025-05-10 15:43:06,208 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:43:06,690 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 15:43:06,690 - INFO - Found 1 thread(s) in total
2025-05-10 15:43:06,692 - INFO - Processing thread 1 of 1
2025-05-10 15:43:07,272 - INFO - Identified user: docteurzed
2025-05-10 15:43:08,112 - INFO - Direct click on thread successful
2025-05-10 15:43:11,111 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 15:43:11,111 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:43:11,165 - INFO - Saved cropped post image for docteurzed
2025-05-10 15:43:13,799 - INFO - Verifying preview element using XPath...
2025-05-10 15:43:14,264 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:43:14,688 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 15:43:14,688 - INFO - User docteurzed is already onboarded
2025-05-10 15:43:14,688 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 15:43:23,206 - INFO - Checking for shared recipe post...
2025-05-10 15:43:23,920 - INFO - Found a shared post, opening it...
2025-05-10 15:43:24,803 - INFO - Tapped on post with mobile: tap command
2025-05-10 15:43:35,326 - INFO - Checking if caption needs expansion...
2025-05-10 15:43:35,519 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 15:43:38,572 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 15:43:40,358 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 15:43:40,569 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 15:43:40,774 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 15:43:40,975 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 15:43:41,191 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 15:43:41,400 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 15:43:41,624 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 15:43:41,823 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 15:43:42,053 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 15:43:42,283 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 15:43:42,495 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 15:43:42,737 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 15:43:42,979 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 15:43:43,233 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 15:43:43,455 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 15:43:43,638 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 15:43:43,855 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 15:43:44,063 - INFO - [QR DEBUG] Button 17 — name: 31541 likes, label: 31541 likes, value: None
2025-05-10 15:43:44,310 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 15:43:44,523 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 15:43:44,719 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 15:43:44,939 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 15:43:45,156 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 15:43:47,163 - INFO - Extracting recipe caption...
2025-05-10 15:43:49,857 - INFO - Trying to scroll to reveal more content...
2025-05-10 15:43:50,694 - INFO - Swipe performed successfully
2025-05-10 15:43:55,544 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 15:43:55,672 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:43:58,286 - INFO - Returning to inbox...
2025-05-10 15:43:58,424 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:43:58,597 - ERROR - All back button strategies failed
2025-05-10 15:43:58,598 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 15:44:01,949 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 15:44:01,950 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:44:02,309 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 15:44:05,414 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 15:44:08,829 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 15:44:08,829 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:44:09,336 - WARNING - Deep-link fallback failed to verify inbox.
2025-05-10 15:44:09,336 - INFO - Finished processing current unread threads.
2025-05-10 15:44:10,341 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:10,765 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:10,765 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:44:15,787 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:16,040 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:16,040 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:44:21,058 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:21,300 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:21,301 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:44:26,324 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:26,556 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:26,556 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:44:31,574 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:31,802 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:31,802 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:44:36,826 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:44:37,068 - INFO - Found 0 thread(s) in total
2025-05-10 15:44:37,068 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 15:57:33,135 - INFO - Starting Instagram Recipe Extractor
2025-05-10 15:57:33,135 - INFO - Initializing Appium driver...
2025-05-10 15:57:36,332 - INFO - Driver initialized successfully.
2025-05-10 15:57:36,333 - INFO - Loaded memory for 4 users
2025-05-10 15:57:36,333 - INFO - Waiting for Instagram app to load...
2025-05-10 15:57:41,335 - INFO - Navigating to DMs...
2025-05-10 15:57:45,333 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 15:57:45,756 - INFO - DM inbox indicator found successfully
2025-05-10 15:57:45,757 - INFO - DM inbox state verified.
2025-05-10 15:57:45,757 - INFO - Starting message scanning loop
2025-05-10 15:57:50,778 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 15:57:51,279 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 15:57:51,279 - INFO - Found 1 thread(s) in total
2025-05-10 15:57:51,281 - INFO - Processing thread 1 of 1
2025-05-10 15:57:51,861 - INFO - Identified user: docteurzed
2025-05-10 15:57:52,676 - INFO - Direct click on thread successful
2025-05-10 15:57:55,647 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 15:57:55,648 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:57:55,711 - INFO - Saved cropped post image for docteurzed
2025-05-10 15:57:58,372 - INFO - Verifying preview element using XPath...
2025-05-10 15:57:58,817 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 15:57:59,228 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 15:57:59,228 - INFO - User docteurzed is already onboarded
2025-05-10 15:57:59,228 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 15:58:07,947 - INFO - Checking for shared recipe post...
2025-05-10 15:58:08,665 - INFO - Found a shared post, opening it...
2025-05-10 15:58:09,560 - INFO - Tapped on post with mobile: tap command
2025-05-10 15:58:20,054 - INFO - Checking if caption needs expansion...
2025-05-10 15:58:20,254 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 15:58:23,291 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 15:58:25,062 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 15:58:25,275 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 15:58:25,491 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 15:58:25,713 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 15:58:25,943 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 15:58:26,157 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 15:58:26,380 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 15:58:26,599 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 15:58:26,813 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 15:58:27,038 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 15:58:27,248 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 15:58:27,445 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 15:58:27,675 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 15:58:27,886 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 15:58:28,098 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 15:58:28,315 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 15:58:28,542 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 15:58:28,766 - INFO - [QR DEBUG] Button 17 — name: 31543 likes, label: 31543 likes, value: None
2025-05-10 15:58:28,980 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 15:58:29,177 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 15:58:29,385 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 15:58:29,605 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 15:58:29,814 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 15:58:31,819 - INFO - Extracting recipe caption...
2025-05-10 15:58:34,498 - INFO - Trying to scroll to reveal more content...
2025-05-10 15:58:35,315 - INFO - Swipe performed successfully
2025-05-10 15:58:39,960 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 15:58:40,076 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:58:42,683 - INFO - Returning to inbox...
2025-05-10 15:58:42,831 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 15:58:43,009 - ERROR - All back button strategies failed
2025-05-10 15:58:43,009 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 16:11:18,309 - INFO - Starting Instagram Recipe Extractor
2025-05-10 16:11:18,309 - INFO - Initializing Appium driver...
2025-05-10 16:11:21,542 - INFO - Driver initialized successfully.
2025-05-10 16:11:21,543 - INFO - Loaded memory for 4 users
2025-05-10 16:11:21,543 - INFO - Waiting for Instagram app to load...
2025-05-10 16:11:26,548 - INFO - Navigating to DMs...
2025-05-10 16:11:30,554 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 16:11:30,951 - INFO - DM inbox indicator found successfully
2025-05-10 16:11:30,951 - INFO - DM inbox state verified.
2025-05-10 16:11:30,952 - INFO - Starting message scanning loop
2025-05-10 16:11:35,966 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:11:36,261 - INFO - Found 0 thread(s) in total
2025-05-10 16:11:36,261 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:11:41,283 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:11:41,576 - INFO - Found 0 thread(s) in total
2025-05-10 16:11:41,576 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:11:46,590 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:11:46,892 - INFO - Found 0 thread(s) in total
2025-05-10 16:11:46,892 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:11:51,914 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:11:52,217 - INFO - Found 0 thread(s) in total
2025-05-10 16:11:52,217 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:11:57,236 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:11:57,540 - INFO - Found 0 thread(s) in total
2025-05-10 16:11:57,540 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:12:02,559 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:12:02,867 - INFO - Found 0 thread(s) in total
2025-05-10 16:12:02,867 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:12:07,884 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:12:08,114 - INFO - Found 0 thread(s) in total
2025-05-10 16:12:08,114 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:12:13,134 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:12:13,616 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 16:12:13,616 - INFO - Found 1 thread(s) in total
2025-05-10 16:12:13,618 - INFO - Processing thread 1 of 1
2025-05-10 16:12:14,164 - INFO - Identified user: docteurzed
2025-05-10 16:12:14,961 - INFO - Direct click on thread successful
2025-05-10 16:12:17,457 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 16:12:17,457 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:12:17,498 - INFO - Saved cropped post image for docteurzed
2025-05-10 16:12:20,131 - INFO - Verifying preview element using XPath...
2025-05-10 16:12:20,479 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:12:20,923 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 16:12:20,923 - INFO - User docteurzed is already onboarded
2025-05-10 16:12:20,923 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 16:12:29,411 - INFO - Checking for shared recipe post...
2025-05-10 16:12:30,138 - INFO - Found a shared post, opening it...
2025-05-10 16:12:31,045 - INFO - Tapped on post with mobile: tap command
2025-05-10 16:12:41,536 - INFO - Checking if caption needs expansion...
2025-05-10 16:12:41,727 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 16:12:44,794 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 16:12:46,762 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 16:12:46,967 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 16:12:47,162 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 16:12:47,364 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 16:12:47,569 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 16:12:47,779 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 16:12:47,996 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 16:12:48,184 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 16:12:48,395 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 16:12:48,597 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 16:12:48,800 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 16:12:49,008 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 16:12:49,213 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 16:12:49,432 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 16:12:49,632 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 16:12:49,830 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 16:12:50,046 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 16:12:50,232 - INFO - [QR DEBUG] Button 17 — name: 31544 likes, label: 31544 likes, value: None
2025-05-10 16:12:50,413 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 16:12:50,609 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 16:12:50,818 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 16:12:51,031 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 16:12:51,232 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 16:12:53,237 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 16:12:54,096 - INFO - [QR DEBUG] Found 12 menu cells in total
2025-05-10 16:12:54,280 - INFO - [QR DEBUG] Menu cell 0: name='sundial-viewer-video-cell', label='None'
2025-05-10 16:12:54,410 - INFO - [QR DEBUG] Menu cell 1: name='save-unsave-action', label='Save'
2025-05-10 16:12:54,555 - INFO - [QR DEBUG] Menu cell 2: name='59', label='remixing_button_overflow'
2025-05-10 16:12:54,695 - INFO - [QR DEBUG] Menu cell 3: name='60', label='remixing_sequence_button_overflow'
2025-05-10 16:12:54,829 - INFO - [QR DEBUG] Menu cell 4: name='manage-captions', label='Translations'
2025-05-10 16:12:54,829 - INFO - [QR DEBUG] ======= STARTING QR CODE CELL SEARCH =======
2025-05-10 16:12:54,829 - INFO - [QR DEBUG] QR code search attempt 1/3
2025-05-10 16:12:54,829 - INFO - [QR DEBUG] Strategy 1: Try iOS class chain
2025-05-10 16:12:55,063 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 16:12:55,582 - INFO - [QR DEBUG] Element match:
  name: show-qr-code
  label: QR code
  accessible: true
  rect: {'y': 599, 'x': 18, 'width': 392, 'height': 51}
2025-05-10 16:12:55,807 - INFO - [QR DEBUG] Pre-QR-click screenshot: screenshots/before_qr_click.png
2025-05-10 16:12:55,807 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 16:12:56,460 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 16:12:56,460 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 16:12:56,460 - INFO - [QR DEBUG] Waiting for QR code modal (3 seconds)...
2025-05-10 16:12:59,465 - INFO - [QR DEBUG] Taking QR code modal screenshot...
2025-05-10 16:12:59,854 - INFO - [QR DEBUG] QR code screenshot saved to images/qr_code_screenshot.png
2025-05-10 16:13:00,060 - ERROR - Failed to extract QR code URL: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-05-10 16:13:00,060 - WARNING - [QR DEBUG] Failed to extract URL from QR code
2025-05-10 16:13:00,060 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 16:13:00,281 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 16:13:00,830 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 16:13:02,833 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 16:13:02,833 - INFO - [QR DEBUG] Re-clicking more-options-button for caption expansion...
2025-05-10 16:13:05,632 - INFO - Extracting recipe caption...
2025-05-10 16:13:08,374 - INFO - Trying to scroll to reveal more content...
2025-05-10 16:13:09,210 - INFO - Swipe performed successfully
2025-05-10 16:13:13,761 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 16:13:13,886 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 16:13:16,492 - INFO - Returning to inbox...
2025-05-10 16:13:16,628 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 16:13:16,774 - ERROR - All back button strategies failed
2025-05-10 16:13:16,774 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 16:13:20,111 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 16:13:20,112 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 16:13:20,475 - INFO - Attempting deep-link fallback to DM inbox...
2025-05-10 16:13:23,584 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 16:20:36,677 - INFO - Starting Instagram Recipe Extractor
2025-05-10 16:20:36,678 - INFO - Initializing Appium driver...
2025-05-10 16:20:39,855 - INFO - Driver initialized successfully.
2025-05-10 16:20:39,856 - INFO - Loaded memory for 4 users
2025-05-10 16:20:39,856 - INFO - Waiting for Instagram app to load...
2025-05-10 16:20:44,861 - INFO - Navigating to DMs...
2025-05-10 16:20:48,883 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 16:20:49,329 - INFO - DM inbox indicator found successfully
2025-05-10 16:20:49,331 - INFO - DM inbox state verified.
2025-05-10 16:20:49,331 - INFO - Starting message scanning loop
2025-05-10 16:20:54,351 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:20:54,832 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 16:20:54,832 - INFO - Found 1 thread(s) in total
2025-05-10 16:20:54,834 - INFO - Processing thread 1 of 1
2025-05-10 16:20:55,371 - INFO - Identified user: docteurzed
2025-05-10 16:20:56,157 - INFO - Direct click on thread successful
2025-05-10 16:20:59,125 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 16:20:59,125 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:20:59,180 - INFO - Saved cropped post image for docteurzed
2025-05-10 16:21:01,820 - INFO - Verifying preview element using XPath...
2025-05-10 16:21:02,255 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:21:02,650 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 16:21:02,650 - INFO - User docteurzed is already onboarded
2025-05-10 16:21:02,650 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 16:21:11,173 - INFO - Checking for shared recipe post...
2025-05-10 16:21:11,916 - INFO - Found a shared post, opening it...
2025-05-10 16:21:12,782 - INFO - Tapped on post with mobile: tap command
2025-05-10 16:21:23,333 - INFO - Checking if caption needs expansion...
2025-05-10 16:21:23,531 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 16:21:26,612 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 16:21:28,620 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 16:21:28,821 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 16:21:29,019 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 16:21:29,260 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 16:21:29,466 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 16:21:29,684 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 16:21:29,886 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 16:21:30,120 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 16:21:30,336 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 16:21:30,556 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 16:21:30,792 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 16:21:31,043 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 16:21:31,273 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 16:21:31,486 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 16:21:31,696 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 16:21:31,895 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 16:21:32,117 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 16:21:32,315 - INFO - [QR DEBUG] Button 17 — name: 31544 likes, label: 31544 likes, value: None
2025-05-10 16:21:32,496 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 16:21:32,703 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 16:21:32,918 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 16:21:33,113 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 16:21:33,313 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 16:21:35,319 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 16:21:36,356 - INFO - [QR DEBUG] Found 12 menu cells in total
2025-05-10 16:21:36,524 - INFO - [QR DEBUG] Menu cell 0: name='sundial-viewer-video-cell', label='None'
2025-05-10 16:21:36,670 - INFO - [QR DEBUG] Menu cell 1: name='save-unsave-action', label='Save'
2025-05-10 16:21:36,821 - INFO - [QR DEBUG] Menu cell 2: name='59', label='remixing_button_overflow'
2025-05-10 16:21:36,954 - INFO - [QR DEBUG] Menu cell 3: name='60', label='remixing_sequence_button_overflow'
2025-05-10 16:21:37,087 - INFO - [QR DEBUG] Menu cell 4: name='manage-captions', label='Translations'
2025-05-10 16:21:37,088 - INFO - [QR DEBUG] ======= STARTING QR CODE CELL SEARCH =======
2025-05-10 16:21:37,088 - INFO - [QR DEBUG] QR code search attempt 1/3
2025-05-10 16:21:37,088 - INFO - [QR DEBUG] Strategy 1: Try iOS class chain
2025-05-10 16:21:37,320 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 16:21:37,838 - INFO - [QR DEBUG] Element match:
  name: show-qr-code
  label: QR code
  accessible: true
  rect: {'y': 599, 'x': 18, 'width': 392, 'height': 51}
2025-05-10 16:21:38,066 - INFO - [QR DEBUG] Pre-QR-click screenshot: screenshots/before_qr_click.png
2025-05-10 16:21:38,066 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 16:21:38,715 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 16:21:38,715 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 16:21:38,715 - INFO - [QR DEBUG] Waiting for QR code modal (3 seconds)...
2025-05-10 16:21:41,720 - INFO - [QR DEBUG] Taking QR code modal screenshot...
2025-05-10 16:21:42,100 - INFO - [QR DEBUG] QR code screenshot saved to images/qr_code_screenshot.png
2025-05-10 16:21:42,302 - ERROR - Failed to extract QR code URL: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-05-10 16:21:42,302 - WARNING - [QR DEBUG] Failed to extract URL from QR code
2025-05-10 16:21:42,302 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 16:21:42,516 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 16:21:43,072 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 16:21:45,078 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 16:21:45,078 - INFO - Extracting recipe caption...
2025-05-10 16:21:46,028 - INFO - Trying to scroll to reveal more content...
2025-05-10 16:21:46,719 - INFO - Swipe performed successfully
2025-05-10 16:21:49,273 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 16:21:49,340 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 16:21:52,066 - INFO - Returning to inbox...
2025-05-10 16:21:55,230 - INFO - Successfully returned to DM inbox using back button
2025-05-10 16:21:55,230 - INFO - Finished processing current unread threads.
2025-05-10 16:21:56,235 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:21:56,552 - INFO - Found 0 thread(s) in total
2025-05-10 16:21:56,552 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:22:01,575 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:22:01,883 - INFO - Found 0 thread(s) in total
2025-05-10 16:22:01,883 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:22:06,899 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:22:07,229 - INFO - Found 0 thread(s) in total
2025-05-10 16:22:07,229 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:22:12,249 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:22:12,575 - INFO - Found 0 thread(s) in total
2025-05-10 16:22:12,576 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:22:17,593 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:22:17,944 - INFO - Found 0 thread(s) in total
2025-05-10 16:22:17,944 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:40:50,674 - INFO - Starting Instagram Recipe Extractor
2025-05-10 16:40:50,674 - INFO - Initializing Appium driver...
2025-05-10 16:40:53,902 - INFO - Driver initialized successfully.
2025-05-10 16:40:53,903 - INFO - Loaded memory for 4 users
2025-05-10 16:40:53,903 - INFO - Waiting for Instagram app to load...
2025-05-10 16:40:58,908 - INFO - Navigating to DMs...
2025-05-10 16:41:02,876 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 16:41:03,242 - INFO - DM inbox indicator found successfully
2025-05-10 16:41:03,243 - INFO - DM inbox state verified.
2025-05-10 16:41:03,243 - INFO - Starting message scanning loop
2025-05-10 16:41:08,261 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:41:08,559 - INFO - Found 0 thread(s) in total
2025-05-10 16:41:08,559 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 16:41:13,582 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 16:41:14,075 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 16:41:14,075 - INFO - Found 1 thread(s) in total
2025-05-10 16:41:14,076 - INFO - Processing thread 1 of 1
2025-05-10 16:41:14,625 - INFO - Identified user: docteurzed
2025-05-10 16:41:15,460 - INFO - Direct click on thread successful
2025-05-10 16:41:18,441 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 16:41:18,441 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:41:18,487 - INFO - Saved cropped post image for docteurzed
2025-05-10 16:41:21,119 - INFO - Verifying preview element using XPath...
2025-05-10 16:41:21,519 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 16:41:21,909 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 16:41:21,909 - INFO - User docteurzed is already onboarded
2025-05-10 16:41:21,909 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 16:41:30,265 - INFO - Checking for shared recipe post...
2025-05-10 16:41:30,978 - INFO - Found a shared post, opening it...
2025-05-10 16:41:31,906 - INFO - Tapped on post with mobile: tap command
2025-05-10 16:41:42,551 - INFO - Checking if caption needs expansion...
2025-05-10 16:41:42,740 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 16:41:45,854 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 16:41:48,045 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 16:41:48,252 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 16:41:48,483 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 16:41:48,691 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 16:41:48,915 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 16:41:49,107 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 16:41:49,311 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 16:41:49,513 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 16:41:49,714 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 16:41:49,923 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 16:41:50,147 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 16:41:50,351 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 16:41:50,547 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 16:41:50,751 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 16:41:50,946 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 16:41:51,145 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 16:41:51,339 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 16:41:51,519 - INFO - [QR DEBUG] Button 17 — name: 31545 likes, label: 31545 likes, value: None
2025-05-10 16:41:51,715 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 16:41:51,916 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 16:41:52,120 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 16:41:52,312 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 16:41:52,500 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 16:41:54,505 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 16:41:55,404 - INFO - [QR DEBUG] Found 12 menu cells in total
2025-05-10 16:41:55,577 - INFO - [QR DEBUG] Menu cell 0: name='sundial-viewer-video-cell', label='None'
2025-05-10 16:41:55,738 - INFO - [QR DEBUG] Menu cell 1: name='save-unsave-action', label='Save'
2025-05-10 16:41:55,884 - INFO - [QR DEBUG] Menu cell 2: name='59', label='remixing_button_overflow'
2025-05-10 16:41:56,010 - INFO - [QR DEBUG] Menu cell 3: name='60', label='remixing_sequence_button_overflow'
2025-05-10 16:41:56,147 - INFO - [QR DEBUG] Menu cell 4: name='manage-captions', label='Translations'
2025-05-10 16:41:56,147 - INFO - [QR DEBUG] ======= STARTING QR CODE CELL SEARCH =======
2025-05-10 16:41:56,147 - INFO - [QR DEBUG] QR code search attempt 1/3
2025-05-10 16:41:56,147 - INFO - [QR DEBUG] Strategy 1: Try iOS class chain
2025-05-10 16:41:56,381 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 16:41:56,893 - INFO - [QR DEBUG] Element match:
  name: show-qr-code
  label: QR code
  accessible: true
  rect: {'y': 599, 'x': 18, 'width': 392, 'height': 51}
2025-05-10 16:41:57,101 - INFO - [QR DEBUG] Pre-QR-click screenshot: screenshots/before_qr_click.png
2025-05-10 16:41:57,101 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 16:41:57,743 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 16:41:57,743 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 16:41:57,743 - INFO - [QR DEBUG] Waiting for QR code modal (3 seconds)...
2025-05-10 16:42:00,744 - INFO - [QR DEBUG] Taking QR code modal screenshot...
2025-05-10 16:42:01,129 - INFO - [QR DEBUG] QR code screenshot saved to images/qr_code_screenshot.png
2025-05-10 16:42:01,329 - ERROR - Failed to extract QR code URL: tesseract is not installed or it's not in your PATH. See README file for more information.
2025-05-10 16:42:01,329 - WARNING - [QR DEBUG] Failed to extract URL from QR code
2025-05-10 16:42:01,329 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 16:42:01,566 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 16:42:02,121 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 16:42:04,127 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 16:42:04,127 - INFO - Attempting to click caption expansion link...
2025-05-10 16:42:04,396 - INFO - Found caption expansion link at position: {'y': 804, 'x': 343, 'width': 11, 'height': 18}
2025-05-10 16:42:05,100 - INFO - Clicked caption expansion link successfully
2025-05-10 16:42:07,105 - INFO - Extracting recipe caption...
2025-05-10 16:42:08,036 - INFO - Successfully extracted caption (793 chars)
2025-05-10 16:42:08,037 - INFO - Caption saved to captions/caption_docteurzed_1746920528.txt
2025-05-10 16:42:08,037 - INFO - Extracting caption and comments using unified parser...
2025-05-10 16:42:08,037 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 16:42:08,037 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 16:42:08,037 - INFO - Looking for comments button...
2025-05-10 16:42:08,980 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 16:42:10,533 - INFO - Tapped on comments button
2025-05-10 16:42:12,846 - INFO - Analyzing UI for comment elements...
2025-05-10 16:42:17,487 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 16:42:17,882 - INFO - Found 2 collection views
2025-05-10 16:42:18,021 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 16:42:18,376 - INFO - Collection view 0 has 1 cells
2025-05-10 16:42:18,512 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 16:42:19,102 - INFO -   Cell 0 has 4 text elements
2025-05-10 16:42:19,214 - INFO -     Text element 0: 'March 1'
2025-05-10 16:42:19,310 - INFO -     Text element 1: '256 comments'
2025-05-10 16:42:19,414 - INFO -     Text element 2: '196 shares'
2025-05-10 16:42:19,502 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 16:42:19,502 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 16:42:19,502 - INFO -     Text length: 793 characters
2025-05-10 16:42:19,502 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 16:42:19,654 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 16:42:20,715 - INFO - Collection view 1 has 8 cells
2025-05-10 16:42:20,823 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 16:42:21,184 - INFO -   Cell 0 has 2 text elements
2025-05-10 16:42:21,281 - INFO -     Text element 0: 'Reply'
2025-05-10 16:42:21,384 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 16:42:21,484 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 16:42:21,870 - INFO -   Cell 1 has 2 text elements
2025-05-10 16:42:21,970 - INFO -     Text element 0: 'Reply'
2025-05-10 16:42:22,069 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 16:42:22,171 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 16:42:22,543 - INFO -   Cell 2 has 2 text elements
2025-05-10 16:42:22,656 - INFO -     Text element 0: 'Reply'
2025-05-10 16:42:22,752 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 16:42:22,853 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 16:42:23,221 - INFO -   Cell 3 has 2 text elements
2025-05-10 16:42:23,319 - INFO -     Text element 0: 'Reply'
2025-05-10 16:42:23,414 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 16:42:23,511 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 16:42:24,045 - INFO -   Cell 4 has 2 text elements
2025-05-10 16:42:24,140 - INFO -     Text element 0: 'Reply'
2025-05-10 16:42:24,235 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 16:42:27,019 - INFO - Found 26 total text elements in the UI
2025-05-10 16:42:29,834 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 16:42:29,834 - INFO - Text length: 793 characters
2025-05-10 16:42:29,836 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 16:42:29,836 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 16:42:29,906 - INFO - Extracting recipe from text...
2025-05-10 16:42:36,767 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 16:42:36,774 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 16:42:36,774 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 16:42:39,949 - INFO - Dismissed comments sheet successfully.
2025-05-10 16:42:39,950 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 16:42:42,946 - INFO - Successfully exited post view before recipe processing.
2025-05-10 16:42:42,947 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 16:42:42,948 - INFO - Recipe extraction successful.
2025-05-10 16:42:42,948 - INFO - Generating PDF from extracted recipe details...
2025-05-10 16:42:42,950 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 16:42:43,176 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 16:42:43,176 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746920562.pdf
2025-05-10 16:42:43,177 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746920562.pdf
2025-05-10 16:42:43,178 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 16:42:43,178 - INFO - Logging usage event for user=docteurzed
2025-05-10 16:42:45,018 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 16:42:45,018 - INFO - Sending PDF to user's email...
2025-05-10 16:42:45,452 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 16:42:48,653 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 16:42:48,654 - INFO - PDF sent via email successfully.
2025-05-10 16:42:55,660 - INFO - Returning to inbox...
2025-05-10 16:43:01,875 - INFO - Successfully returned to DM inbox using back button
2025-05-10 16:43:01,876 - INFO - User memory saved successfully
2025-05-10 16:43:01,876 - INFO - Returning to inbox...
2025-05-10 16:43:02,090 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 16:43:02,329 - ERROR - All back button strategies failed
2025-05-10 16:43:02,329 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 18:11:14,261 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:11:14,261 - INFO - Initializing Appium driver...
2025-05-10 18:11:17,561 - INFO - Driver initialized successfully.
2025-05-10 18:11:17,563 - INFO - Loaded memory for 4 users
2025-05-10 18:11:17,563 - INFO - Waiting for Instagram app to load...
2025-05-10 18:11:22,568 - INFO - Navigating to DMs...
2025-05-10 18:11:26,324 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:11:26,680 - INFO - DM inbox indicator found successfully
2025-05-10 18:11:26,680 - INFO - DM inbox state verified.
2025-05-10 18:11:26,681 - INFO - Starting message scanning loop
2025-05-10 18:11:31,699 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:11:32,162 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:11:32,162 - INFO - Found 1 thread(s) in total
2025-05-10 18:11:32,162 - INFO - Processing thread 1 of 1
2025-05-10 18:11:32,720 - INFO - Identified user: docteurzed
2025-05-10 18:11:33,521 - INFO - Direct click on thread successful
2025-05-10 18:11:36,890 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:11:36,890 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:11:36,946 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:11:39,634 - INFO - Verifying preview element using XPath...
2025-05-10 18:11:40,083 - INFO - Found preview element with rect: {'y': -194, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:11:40,444 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:11:40,444 - INFO - User docteurzed is already onboarded
2025-05-10 18:11:40,445 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:11:49,050 - INFO - Checking for shared recipe post...
2025-05-10 18:11:49,815 - INFO - Found a shared post, opening it...
2025-05-10 18:11:50,695 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:12:01,296 - INFO - Checking if caption needs expansion...
2025-05-10 18:12:01,494 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:12:04,524 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:12:06,459 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 18:12:06,646 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 18:12:06,858 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 18:12:07,065 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 18:12:07,277 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 18:12:07,474 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 18:12:07,688 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 18:12:07,883 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 18:12:08,083 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 18:12:08,276 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 18:12:08,491 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 18:12:08,686 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 18:12:08,878 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 18:12:09,107 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 18:12:09,324 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 18:12:09,522 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 18:12:09,721 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 18:12:09,923 - INFO - [QR DEBUG] Button 17 — name: 31553 likes, label: 31553 likes, value: None
2025-05-10 18:12:10,124 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 18:12:10,323 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 18:12:10,524 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 18:12:10,710 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 18:12:10,927 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 18:12:12,932 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:12:13,988 - INFO - [QR DEBUG] Found 12 menu cells in total
2025-05-10 18:12:14,182 - INFO - [QR DEBUG] Menu cell 0: name='sundial-viewer-video-cell', label='None'
2025-05-10 18:12:14,328 - INFO - [QR DEBUG] Menu cell 1: name='save-unsave-action', label='Save'
2025-05-10 18:12:14,458 - INFO - [QR DEBUG] Menu cell 2: name='59', label='remixing_button_overflow'
2025-05-10 18:12:14,595 - INFO - [QR DEBUG] Menu cell 3: name='60', label='remixing_sequence_button_overflow'
2025-05-10 18:12:14,729 - INFO - [QR DEBUG] Menu cell 4: name='manage-captions', label='Translations'
2025-05-10 18:12:14,729 - INFO - [QR DEBUG] ======= STARTING QR CODE CELL SEARCH =======
2025-05-10 18:12:14,729 - INFO - [QR DEBUG] QR code search attempt 1/3
2025-05-10 18:12:14,729 - INFO - [QR DEBUG] Strategy 1: Try iOS class chain
2025-05-10 18:12:14,970 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:12:15,490 - INFO - [QR DEBUG] Element match:
  name: show-qr-code
  label: QR code
  accessible: true
  rect: {'y': 599, 'x': 18, 'width': 392, 'height': 51}
2025-05-10 18:12:15,742 - INFO - [QR DEBUG] Pre-QR-click screenshot: screenshots/before_qr_click.png
2025-05-10 18:12:15,743 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:12:16,370 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:12:16,370 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:12:16,370 - INFO - [QR DEBUG] Waiting for QR code modal (3 seconds)...
2025-05-10 18:12:19,375 - INFO - [QR DEBUG] Taking QR code modal screenshot...
2025-05-10 18:12:19,791 - INFO - [QR DEBUG] QR code screenshot saved to images/qr_code_screenshot.png
2025-05-10 18:12:22,084 - INFO - OCR extracted text: 6:12 & SOS > (4)

People can scan this QR code with their
smartphone's camera to see this reel.

Save to Camera Roll

Done

2025-05-10 18:12:22,084 - INFO - No Instagram post URL found in QR code OCR text.
2025-05-10 18:12:22,084 - WARNING - [QR DEBUG] Failed to extract URL from QR code
2025-05-10 18:12:22,084 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:12:22,315 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:12:22,859 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:12:24,863 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:12:24,865 - INFO - Attempting to click caption expansion link...
2025-05-10 18:12:25,155 - INFO - Found caption expansion link at position: {'y': 804, 'x': 343, 'width': 11, 'height': 18}
2025-05-10 18:12:25,878 - INFO - Clicked caption expansion link successfully
2025-05-10 18:12:27,880 - INFO - Extracting recipe caption...
2025-05-10 18:12:28,842 - INFO - Successfully extracted caption (793 chars)
2025-05-10 18:12:28,844 - INFO - Caption saved to captions/caption_docteurzed_1746925948.txt
2025-05-10 18:12:28,844 - INFO - Extracting caption and comments using unified parser...
2025-05-10 18:12:28,844 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 18:12:28,844 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 18:12:28,844 - INFO - Looking for comments button...
2025-05-10 18:12:29,709 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 18:12:31,394 - INFO - Tapped on comments button
2025-05-10 18:12:33,763 - INFO - Analyzing UI for comment elements...
2025-05-10 18:12:38,409 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 18:12:38,790 - INFO - Found 2 collection views
2025-05-10 18:12:38,939 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 18:12:39,296 - INFO - Collection view 0 has 1 cells
2025-05-10 18:12:39,449 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 18:12:40,190 - INFO -   Cell 0 has 4 text elements
2025-05-10 18:12:40,310 - INFO -     Text element 0: 'March 1'
2025-05-10 18:12:40,415 - INFO -     Text element 1: '256 comments'
2025-05-10 18:12:40,525 - INFO -     Text element 2: '196 shares'
2025-05-10 18:12:40,625 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 18:12:40,626 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 18:12:40,626 - INFO -     Text length: 793 characters
2025-05-10 18:12:40,626 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 18:12:40,793 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 18:12:41,979 - INFO - Collection view 1 has 8 cells
2025-05-10 18:12:42,094 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 18:12:42,634 - INFO -   Cell 0 has 2 text elements
2025-05-10 18:12:42,744 - INFO -     Text element 0: 'Reply'
2025-05-10 18:12:42,848 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 18:12:42,962 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 18:12:43,346 - INFO -   Cell 1 has 2 text elements
2025-05-10 18:12:43,452 - INFO -     Text element 0: 'Reply'
2025-05-10 18:12:43,553 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 18:12:43,684 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 18:12:44,082 - INFO -   Cell 2 has 2 text elements
2025-05-10 18:12:44,203 - INFO -     Text element 0: 'Reply'
2025-05-10 18:12:44,316 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 18:12:44,424 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 18:12:44,819 - INFO -   Cell 3 has 2 text elements
2025-05-10 18:12:44,936 - INFO -     Text element 0: 'Reply'
2025-05-10 18:12:45,060 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 18:12:45,181 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 18:12:45,592 - INFO -   Cell 4 has 2 text elements
2025-05-10 18:12:45,709 - INFO -     Text element 0: 'Reply'
2025-05-10 18:12:45,813 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 18:12:48,575 - INFO - Found 26 total text elements in the UI
2025-05-10 18:12:51,408 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 18:12:51,409 - INFO - Text length: 793 characters
2025-05-10 18:12:51,410 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 18:12:51,410 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 18:12:51,490 - INFO - Extracting recipe from text...
2025-05-10 18:12:57,381 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 18:12:57,397 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:12:57,397 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 18:13:00,547 - INFO - Dismissed comments sheet successfully.
2025-05-10 18:13:00,547 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 18:13:03,595 - INFO - Successfully exited post view before recipe processing.
2025-05-10 18:13:03,595 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 18:13:03,595 - INFO - Recipe extraction successful.
2025-05-10 18:13:03,596 - INFO - Generating PDF from extracted recipe details...
2025-05-10 18:13:03,598 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:13:03,841 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 18:13:03,841 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746925983.pdf
2025-05-10 18:13:03,841 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746925983.pdf
2025-05-10 18:13:03,842 - INFO - [DELTA] Input chars: 793, Output chars: 614, Ratio: 0.77, Label: under-extracted
2025-05-10 18:13:03,842 - INFO - Logging usage event for user=docteurzed
2025-05-10 18:13:05,934 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 18:13:05,934 - INFO - Sending PDF to user's email...
2025-05-10 18:13:06,426 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 18:13:09,830 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 18:13:09,831 - INFO - PDF sent via email successfully.
2025-05-10 18:13:17,138 - INFO - Returning to inbox...
2025-05-10 18:13:23,365 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:13:23,366 - INFO - User memory saved successfully
2025-05-10 18:13:23,367 - INFO - Returning to inbox...
2025-05-10 18:13:23,579 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:13:23,839 - ERROR - All back button strategies failed
2025-05-10 18:13:23,839 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 18:13:24,220 - INFO - DM inbox indicator found successfully
2025-05-10 18:13:24,221 - INFO - DM inbox state verified.
2025-05-10 18:13:24,221 - INFO - Inbox already detected despite back button failure.
2025-05-10 18:13:24,221 - INFO - Finished processing current unread threads.
2025-05-10 18:13:25,225 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:13:25,545 - INFO - Found 0 thread(s) in total
2025-05-10 18:13:25,545 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:13:30,560 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:13:30,882 - INFO - Found 0 thread(s) in total
2025-05-10 18:13:30,882 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:13:35,902 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:13:36,230 - INFO - Found 0 thread(s) in total
2025-05-10 18:13:36,230 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:13:41,251 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:13:41,563 - INFO - Found 0 thread(s) in total
2025-05-10 18:13:41,564 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:13:46,578 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:13:46,892 - INFO - Found 0 thread(s) in total
2025-05-10 18:13:46,892 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:18:47,777 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:18:47,778 - INFO - Initializing Appium driver...
2025-05-10 18:18:50,974 - INFO - Driver initialized successfully.
2025-05-10 18:18:50,975 - INFO - Loaded memory for 4 users
2025-05-10 18:18:50,975 - INFO - Waiting for Instagram app to load...
2025-05-10 18:18:55,979 - INFO - Navigating to DMs...
2025-05-10 18:19:00,063 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:19:00,462 - INFO - DM inbox indicator found successfully
2025-05-10 18:19:00,462 - INFO - DM inbox state verified.
2025-05-10 18:19:00,462 - INFO - Starting message scanning loop
2025-05-10 18:19:05,483 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:19:05,867 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:19:05,867 - INFO - Found 1 thread(s) in total
2025-05-10 18:19:05,867 - INFO - Processing thread 1 of 1
2025-05-10 18:19:06,293 - INFO - Identified user: docteurzed
2025-05-10 18:19:07,010 - INFO - Direct click on thread successful
2025-05-10 18:19:09,266 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:19:09,266 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:19:09,308 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:19:11,958 - INFO - Verifying preview element using XPath...
2025-05-10 18:19:12,437 - INFO - Found preview element with rect: {'y': -159, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:19:12,809 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:19:12,809 - INFO - User docteurzed is already onboarded
2025-05-10 18:19:12,809 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:19:21,395 - INFO - Checking for shared recipe post...
2025-05-10 18:19:22,134 - INFO - Found a shared post, opening it...
2025-05-10 18:19:23,009 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:19:33,560 - INFO - Checking if caption needs expansion...
2025-05-10 18:19:33,746 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:19:36,776 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:19:38,555 - INFO - [QR DEBUG] Button 0 — name: Button, label: Dismiss, value: None
2025-05-10 18:19:38,762 - INFO - [QR DEBUG] Button 1 — name: back-button, label: Back, value: None
2025-05-10 18:19:38,964 - INFO - [QR DEBUG] Button 2 — name: camera-entry-point-button, label: Open camera, value: None
2025-05-10 18:19:39,180 - INFO - [QR DEBUG] Button 3 — name: Reels, label: Reels, value: None
2025-05-10 18:19:39,385 - INFO - [QR DEBUG] Button 4 — name: Emoji reaction button, label: Emoji reaction button, value: None
2025-05-10 18:19:39,579 - INFO - [QR DEBUG] Button 5 — name: None, label: None, value: None
2025-05-10 18:19:39,782 - INFO - [QR DEBUG] Button 6 — name: send button, label: send, value: None
2025-05-10 18:19:39,963 - INFO - [QR DEBUG] Button 7 — name: ufi-like-button, label: None, value: None
2025-05-10 18:19:40,175 - INFO - [QR DEBUG] Button 8 — name: None, label: None, value: None
2025-05-10 18:19:40,383 - INFO - [QR DEBUG] Button 9 — name: ufi-comment-button, label: None, value: None
2025-05-10 18:19:40,591 - INFO - [QR DEBUG] Button 10 — name: ufi-send-button, label: None, value: None
2025-05-10 18:19:40,797 - INFO - [QR DEBUG] Button 11 — name: None, label: None, value: None
2025-05-10 18:19:41,011 - INFO - [QR DEBUG] Button 12 — name: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, label: Go to audio page for Sungba (Remix) (feat. Burna Boy) by Asake, value: None
2025-05-10 18:19:41,242 - INFO - [QR DEBUG] Button 13 — name: None, label: None, value: None
2025-05-10 18:19:41,451 - INFO - [QR DEBUG] Button 14 — name: follow-button, label: Follow ksnice_n_spice, value: None
2025-05-10 18:19:41,659 - INFO - [QR DEBUG] Button 15 — name: Post by ksnice_n_spice, label: Post by ksnice_n_spice, value: None
2025-05-10 18:19:41,882 - INFO - [QR DEBUG] Button 16 — name: like-button, label: Like, value: None
2025-05-10 18:19:42,081 - INFO - [QR DEBUG] Button 17 — name: 31554 likes, label: 31554 likes, value: None
2025-05-10 18:19:42,304 - INFO - [QR DEBUG] Button 18 — name: comment-button, label: Comment, value: None
2025-05-10 18:19:42,502 - INFO - [QR DEBUG] Button 19 — name: send-button, label: Send, value: None
2025-05-10 18:19:42,699 - INFO - [QR DEBUG] Button 20 — name: more-options-button, label: More options, value: None
2025-05-10 18:19:42,934 - INFO - [QR DEBUG] Button 21 — name: ksnice_n_spice's profile picture, label: ksnice_n_spice's profile picture, value: Watch story
2025-05-10 18:19:43,144 - INFO - [QR DEBUG] Button 22 — name: sundial-viewer-audio-attribution-view, label: Asake · Sungba (Remix) (feat. Burna Boy), value: None
2025-05-10 18:19:45,150 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:19:46,047 - INFO - [QR DEBUG] Found 12 menu cells in total
2025-05-10 18:19:46,244 - INFO - [QR DEBUG] Menu cell 0: name='sundial-viewer-video-cell', label='None'
2025-05-10 18:19:46,390 - INFO - [QR DEBUG] Menu cell 1: name='save-unsave-action', label='Save'
2025-05-10 18:19:46,548 - INFO - [QR DEBUG] Menu cell 2: name='59', label='remixing_button_overflow'
2025-05-10 18:19:46,696 - INFO - [QR DEBUG] Menu cell 3: name='60', label='remixing_sequence_button_overflow'
2025-05-10 18:19:46,846 - INFO - [QR DEBUG] Menu cell 4: name='manage-captions', label='Translations'
2025-05-10 18:19:46,847 - INFO - [QR DEBUG] ======= STARTING QR CODE CELL SEARCH =======
2025-05-10 18:19:46,847 - INFO - [QR DEBUG] QR code search attempt 1/3
2025-05-10 18:19:46,847 - INFO - [QR DEBUG] Strategy 1: Try iOS class chain
2025-05-10 18:19:47,093 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:19:47,630 - INFO - [QR DEBUG] Element match:
  name: show-qr-code
  label: QR code
  accessible: true
  rect: {'y': 599, 'x': 18, 'width': 392, 'height': 51}
2025-05-10 18:19:47,864 - INFO - [QR DEBUG] Pre-QR-click screenshot: screenshots/before_qr_click.png
2025-05-10 18:19:47,864 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:19:48,537 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:19:48,537 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:19:48,538 - INFO - [QR DEBUG] Waiting for QR code modal (3 seconds)...
2025-05-10 18:19:51,543 - INFO - [QR DEBUG] Taking QR code modal screenshot...
2025-05-10 18:19:51,953 - INFO - [QR DEBUG] QR code screenshot saved to images/qr_code_screenshot.png
2025-05-10 18:19:52,055 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:19:52,055 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:19:52,055 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:19:52,263 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:19:52,793 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:19:54,798 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:19:54,798 - INFO - Attempting to click caption expansion link...
2025-05-10 18:19:55,091 - INFO - Found caption expansion link at position: {'y': 804, 'x': 343, 'width': 11, 'height': 18}
2025-05-10 18:19:55,819 - INFO - Clicked caption expansion link successfully
2025-05-10 18:19:57,823 - INFO - Extracting recipe caption...
2025-05-10 18:19:58,789 - INFO - Successfully extracted caption (793 chars)
2025-05-10 18:19:58,789 - INFO - Caption saved to captions/caption_docteurzed_1746926398.txt
2025-05-10 18:19:58,789 - INFO - Extracting caption and comments using unified parser...
2025-05-10 18:19:58,789 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 18:19:58,789 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 18:19:58,790 - INFO - Looking for comments button...
2025-05-10 18:19:59,646 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 18:20:01,318 - INFO - Tapped on comments button
2025-05-10 18:20:03,641 - INFO - Analyzing UI for comment elements...
2025-05-10 18:20:08,266 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 18:20:08,806 - INFO - Found 2 collection views
2025-05-10 18:20:08,968 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 18:20:09,352 - INFO - Collection view 0 has 1 cells
2025-05-10 18:20:09,492 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 18:20:10,076 - INFO -   Cell 0 has 4 text elements
2025-05-10 18:20:10,189 - INFO -     Text element 0: 'March 1'
2025-05-10 18:20:10,292 - INFO -     Text element 1: '256 comments'
2025-05-10 18:20:10,399 - INFO -     Text element 2: '196 shares'
2025-05-10 18:20:10,510 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 18:20:10,510 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 18:20:10,510 - INFO -     Text length: 793 characters
2025-05-10 18:20:10,510 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 18:20:10,667 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 18:20:11,741 - INFO - Collection view 1 has 8 cells
2025-05-10 18:20:11,856 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 18:20:12,242 - INFO -   Cell 0 has 2 text elements
2025-05-10 18:20:12,368 - INFO -     Text element 0: 'Reply'
2025-05-10 18:20:12,479 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 18:20:12,603 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 18:20:13,001 - INFO -   Cell 1 has 2 text elements
2025-05-10 18:20:13,098 - INFO -     Text element 0: 'Reply'
2025-05-10 18:20:13,205 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 18:20:13,310 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 18:20:13,690 - INFO -   Cell 2 has 2 text elements
2025-05-10 18:20:13,802 - INFO -     Text element 0: 'Reply'
2025-05-10 18:20:13,906 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 18:20:14,021 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 18:20:14,431 - INFO -   Cell 3 has 2 text elements
2025-05-10 18:20:14,536 - INFO -     Text element 0: 'Reply'
2025-05-10 18:20:14,639 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 18:20:14,747 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 18:20:15,155 - INFO -   Cell 4 has 2 text elements
2025-05-10 18:20:15,263 - INFO -     Text element 0: 'Reply'
2025-05-10 18:20:15,360 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 18:20:18,041 - INFO - Found 26 total text elements in the UI
2025-05-10 18:20:21,123 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 18:20:21,123 - INFO - Text length: 793 characters
2025-05-10 18:20:21,123 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 18:20:21,124 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 18:20:21,195 - INFO - Extracting recipe from text...
2025-05-10 18:20:26,691 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 18:20:26,708 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:20:26,709 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 18:20:29,892 - INFO - Dismissed comments sheet successfully.
2025-05-10 18:20:29,892 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 18:20:32,925 - INFO - Successfully exited post view before recipe processing.
2025-05-10 18:20:32,926 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 18:20:32,926 - INFO - Added source URL to recipe details: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:20:32,926 - INFO - Recipe extraction successful.
2025-05-10 18:20:32,926 - INFO - Generating PDF from extracted recipe details...
2025-05-10 18:20:32,929 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:20:33,182 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 18:20:33,182 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746926432.pdf
2025-05-10 18:20:33,182 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746926432.pdf
2025-05-10 18:20:33,184 - INFO - [DELTA] Input chars: 793, Output chars: 614, Ratio: 0.77, Label: under-extracted
2025-05-10 18:20:33,184 - INFO - Logging usage event for user=docteurzed
2025-05-10 18:20:34,822 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 18:20:34,822 - INFO - Sending PDF to user's email...
2025-05-10 18:20:35,304 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 18:20:38,530 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 18:20:38,532 - INFO - PDF sent via email successfully.
2025-05-10 18:20:45,794 - INFO - Returning to inbox...
2025-05-10 18:20:52,057 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:20:52,060 - INFO - User memory saved successfully
2025-05-10 18:20:52,060 - INFO - Returning to inbox...
2025-05-10 18:20:52,290 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:20:52,578 - ERROR - All back button strategies failed
2025-05-10 18:20:52,579 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 18:20:52,981 - INFO - DM inbox indicator found successfully
2025-05-10 18:20:52,982 - INFO - DM inbox state verified.
2025-05-10 18:20:52,982 - INFO - Inbox already detected despite back button failure.
2025-05-10 18:20:52,982 - INFO - Finished processing current unread threads.
2025-05-10 18:20:53,986 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:20:54,276 - INFO - Found 0 thread(s) in total
2025-05-10 18:20:54,276 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:28:07,896 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:28:07,896 - INFO - Initializing Appium driver...
2025-05-10 18:28:11,521 - INFO - Driver initialized successfully.
2025-05-10 18:28:11,523 - INFO - Loaded memory for 4 users
2025-05-10 18:28:11,523 - INFO - Waiting for Instagram app to load...
2025-05-10 18:28:16,527 - INFO - Navigating to DMs...
2025-05-10 18:28:20,836 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:28:21,258 - INFO - DM inbox indicator found successfully
2025-05-10 18:28:21,258 - INFO - DM inbox state verified.
2025-05-10 18:28:21,258 - INFO - Starting message scanning loop
2025-05-10 18:28:26,271 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:28:26,752 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:28:26,752 - INFO - Found 1 thread(s) in total
2025-05-10 18:28:26,752 - INFO - Processing thread 1 of 1
2025-05-10 18:28:27,311 - INFO - Identified user: docteurzed
2025-05-10 18:28:28,113 - INFO - Direct click on thread successful
2025-05-10 18:28:31,145 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:28:31,146 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:28:31,192 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:28:33,854 - INFO - Verifying preview element using XPath...
2025-05-10 18:28:34,291 - INFO - Found preview element with rect: {'y': -159, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:28:34,656 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:28:34,656 - INFO - User docteurzed is already onboarded
2025-05-10 18:28:34,656 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:28:43,190 - INFO - Checking for shared recipe post...
2025-05-10 18:28:43,935 - INFO - Found a shared post, opening it...
2025-05-10 18:28:44,831 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:28:55,442 - INFO - Checking if caption needs expansion...
2025-05-10 18:28:55,622 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:28:58,644 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:29:00,649 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:29:01,623 - INFO - [QR DEBUG] Searching for QR code cell...
2025-05-10 18:29:01,858 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:29:02,219 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:29:02,861 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:29:02,861 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:29:06,379 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:29:06,380 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:29:06,380 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:29:06,592 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:29:07,096 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:29:09,101 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:29:09,102 - WARNING - Error during caption expansion attempt: cannot access local variable 'post' where it is not associated with a value
2025-05-10 18:29:09,102 - INFO - Extracting recipe caption...
2025-05-10 18:29:09,876 - INFO - Trying to scroll to reveal more content...
2025-05-10 18:29:10,584 - INFO - Swipe performed successfully
2025-05-10 18:29:12,999 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 18:29:13,063 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:29:15,889 - INFO - Returning to inbox...
2025-05-10 18:29:18,980 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:29:18,980 - INFO - Finished processing current unread threads.
2025-05-10 18:29:19,986 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:29:20,303 - INFO - Found 0 thread(s) in total
2025-05-10 18:29:20,303 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:29:25,322 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:29:25,625 - INFO - Found 0 thread(s) in total
2025-05-10 18:29:25,625 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:29:30,646 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:29:30,963 - INFO - Found 0 thread(s) in total
2025-05-10 18:29:30,963 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:29:35,988 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:30:41,432 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:30:41,432 - INFO - Initializing Appium driver...
2025-05-10 18:30:44,568 - INFO - Driver initialized successfully.
2025-05-10 18:30:44,569 - INFO - Loaded memory for 4 users
2025-05-10 18:30:44,569 - INFO - Waiting for Instagram app to load...
2025-05-10 18:30:49,574 - INFO - Navigating to DMs...
2025-05-10 18:30:53,579 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:30:53,972 - INFO - DM inbox indicator found successfully
2025-05-10 18:30:53,973 - INFO - DM inbox state verified.
2025-05-10 18:30:53,973 - INFO - Starting message scanning loop
2025-05-10 18:30:58,992 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:30:59,463 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:30:59,463 - INFO - Found 1 thread(s) in total
2025-05-10 18:30:59,464 - INFO - Processing thread 1 of 1
2025-05-10 18:31:00,015 - INFO - Identified user: docteurzed
2025-05-10 18:31:00,798 - INFO - Direct click on thread successful
2025-05-10 18:31:03,564 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:31:03,564 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:31:03,605 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:31:06,256 - INFO - Verifying preview element using XPath...
2025-05-10 18:31:06,696 - INFO - Found preview element with rect: {'y': -107, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:31:07,113 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:31:07,113 - INFO - User docteurzed is already onboarded
2025-05-10 18:31:07,113 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:31:15,648 - INFO - Checking for shared recipe post...
2025-05-10 18:31:16,379 - INFO - Found a shared post, opening it...
2025-05-10 18:31:17,237 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:31:17,412 - ERROR - Failed to send processing message: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:31:20,418 - INFO - Checking if caption needs expansion...
2025-05-10 18:31:20,619 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:31:23,685 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:31:25,687 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:31:26,538 - INFO - [QR DEBUG] Searching for QR code cell...
2025-05-10 18:31:26,755 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:31:27,161 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:31:27,784 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:31:27,785 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:31:31,257 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:31:31,257 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:31:31,257 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:31:31,459 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:31:31,983 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:31:33,987 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:31:33,987 - WARNING - Error during caption expansion attempt: cannot access local variable 'post' where it is not associated with a value
2025-05-10 18:31:33,988 - INFO - Extracting recipe caption...
2025-05-10 18:31:34,739 - INFO - Trying to scroll to reveal more content...
2025-05-10 18:31:35,434 - INFO - Swipe performed successfully
2025-05-10 18:31:37,949 - ERROR - Caption text extraction failed; skipping recipe extraction.
2025-05-10 18:31:38,029 - ERROR - Failed to exit post view: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:31:40,759 - INFO - Returning to inbox...
2025-05-10 18:31:43,876 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:31:43,876 - INFO - Finished processing current unread threads.
2025-05-10 18:31:44,880 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:31:45,209 - INFO - Found 0 thread(s) in total
2025-05-10 18:31:45,209 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:31:50,227 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:31:50,540 - INFO - Found 0 thread(s) in total
2025-05-10 18:31:50,540 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:31:55,555 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:31:55,871 - INFO - Found 0 thread(s) in total
2025-05-10 18:31:55,872 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:00,890 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:01,205 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:01,205 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:06,216 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:06,531 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:06,531 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:11,552 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:11,873 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:11,874 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:16,891 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:17,217 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:17,217 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:22,224 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:22,535 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:22,536 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:27,559 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:27,869 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:27,869 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:32,892 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:33,207 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:33,207 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:38,224 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:38,543 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:38,543 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:43,561 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:43,800 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:43,800 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:48,818 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:49,163 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:49,163 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:54,179 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:54,495 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:54,495 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:32:59,512 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:32:59,831 - INFO - Found 0 thread(s) in total
2025-05-10 18:32:59,831 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:04,843 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:05,163 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:05,164 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:10,180 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:10,490 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:10,490 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:15,504 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:15,821 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:15,821 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:20,839 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:21,150 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:21,150 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:26,174 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:26,485 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:26,485 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:31,500 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:31,821 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:31,821 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:36,842 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:37,146 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:37,146 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:42,161 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:42,481 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:42,481 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:47,506 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:47,821 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:47,821 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:52,842 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:53,172 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:53,172 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:33:58,195 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:33:58,514 - INFO - Found 0 thread(s) in total
2025-05-10 18:33:58,514 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:03,529 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:03,837 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:03,837 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:08,853 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:09,176 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:09,176 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:14,194 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:14,520 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:14,521 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:19,538 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:19,854 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:19,855 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:24,868 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:25,197 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:25,200 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:30,218 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:30,535 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:30,536 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:35,560 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:35,859 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:35,859 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:40,880 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:41,199 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:41,199 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:46,217 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:46,537 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:46,537 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:51,556 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:51,852 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:51,852 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:34:56,868 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:34:57,203 - INFO - Found 0 thread(s) in total
2025-05-10 18:34:57,203 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:02,219 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:02,529 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:02,529 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:07,557 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:07,904 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:07,904 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:12,923 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:13,210 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:13,210 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:18,227 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:18,549 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:18,549 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:23,573 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:23,900 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:23,901 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:28,922 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:29,234 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:29,234 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:34,251 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:34,573 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:34,573 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:39,593 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:39,916 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:39,916 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:35:44,927 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:35:45,242 - INFO - Found 0 thread(s) in total
2025-05-10 18:35:45,243 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:36:33,558 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:36:33,558 - INFO - Initializing Appium driver...
2025-05-10 18:36:36,770 - INFO - Driver initialized successfully.
2025-05-10 18:36:36,770 - INFO - Loaded memory for 4 users
2025-05-10 18:36:36,770 - INFO - Waiting for Instagram app to load...
2025-05-10 18:36:41,775 - INFO - Navigating to DMs...
2025-05-10 18:36:45,872 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:36:46,322 - INFO - DM inbox indicator found successfully
2025-05-10 18:36:46,322 - INFO - DM inbox state verified.
2025-05-10 18:36:46,322 - INFO - Starting message scanning loop
2025-05-10 18:36:51,345 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:36:51,820 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:36:51,820 - INFO - Found 1 thread(s) in total
2025-05-10 18:36:51,822 - INFO - Processing thread 1 of 1
2025-05-10 18:36:52,393 - INFO - Identified user: docteurzed
2025-05-10 18:36:53,199 - INFO - Direct click on thread successful
2025-05-10 18:36:55,654 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:36:55,654 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:36:55,696 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:36:58,332 - INFO - Verifying preview element using XPath...
2025-05-10 18:36:58,738 - INFO - Found preview element with rect: {'y': -78, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:36:59,159 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:36:59,159 - INFO - User docteurzed is already onboarded
2025-05-10 18:36:59,159 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:37:07,692 - INFO - Checking for shared recipe post...
2025-05-10 18:37:08,416 - INFO - Found a shared post, opening it...
2025-05-10 18:37:09,271 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:37:19,895 - INFO - Checking if caption needs expansion...
2025-05-10 18:37:20,087 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:37:23,157 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:37:25,163 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:37:26,024 - INFO - [QR DEBUG] Searching for QR code cell...
2025-05-10 18:37:26,271 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:37:26,637 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:37:27,298 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:37:27,298 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:37:30,841 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:37:30,842 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:37:30,842 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:37:31,056 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:37:31,584 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:37:33,589 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:37:33,590 - INFO - Waiting briefly to stabilize UI after QR modal...
2025-05-10 18:37:35,094 - INFO - Attempting to click caption expansion link...
2025-05-10 18:37:35,360 - INFO - Found caption expansion link at position: {'y': 804, 'x': 343, 'width': 11, 'height': 18}
2025-05-10 18:37:36,047 - INFO - Clicked caption expansion link successfully
2025-05-10 18:37:38,051 - INFO - Extracting recipe caption...
2025-05-10 18:37:39,016 - INFO - Successfully extracted caption (793 chars)
2025-05-10 18:37:39,016 - INFO - Caption saved to captions/caption_docteurzed_1746927459.txt
2025-05-10 18:37:39,016 - INFO - Extracting caption and comments using unified parser...
2025-05-10 18:37:39,016 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 18:37:39,016 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 18:37:39,016 - INFO - Looking for comments button...
2025-05-10 18:37:39,939 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 18:37:41,531 - INFO - Tapped on comments button
2025-05-10 18:37:43,846 - INFO - Analyzing UI for comment elements...
2025-05-10 18:37:48,986 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 18:37:49,365 - INFO - Found 2 collection views
2025-05-10 18:37:49,492 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 18:37:49,831 - INFO - Collection view 0 has 1 cells
2025-05-10 18:37:49,965 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 18:37:50,523 - INFO -   Cell 0 has 4 text elements
2025-05-10 18:37:50,620 - INFO -     Text element 0: 'March 1'
2025-05-10 18:37:50,717 - INFO -     Text element 1: '256 comments'
2025-05-10 18:37:50,817 - INFO -     Text element 2: '196 shares'
2025-05-10 18:37:50,920 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 18:37:50,921 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 18:37:50,921 - INFO -     Text length: 793 characters
2025-05-10 18:37:50,922 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 18:37:51,079 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 18:37:52,325 - INFO - Collection view 1 has 9 cells
2025-05-10 18:37:52,420 - INFO -   Cell 0: Size 428x92 at position (0,335)
2025-05-10 18:37:52,781 - INFO -   Cell 0 has 2 text elements
2025-05-10 18:37:52,882 - INFO -     Text element 0: 'Reply'
2025-05-10 18:37:52,976 - INFO -     Text element 1: 'poppybodhanya said, How do cook with long nails so...'
2025-05-10 18:37:53,076 - INFO -   Cell 1: Size 428x29 at position (0,426)
2025-05-10 18:37:53,246 - INFO -   Cell 1 has 0 text elements
2025-05-10 18:37:53,349 - INFO -   Cell 2: Size 428x81 at position (0,454)
2025-05-10 18:37:53,712 - INFO -   Cell 2 has 2 text elements
2025-05-10 18:37:53,797 - INFO -     Text element 0: 'Reply'
2025-05-10 18:37:53,987 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 18:37:54,120 - INFO -   Cell 3: Size 428x78 at position (0,534)
2025-05-10 18:37:54,501 - INFO -   Cell 3 has 2 text elements
2025-05-10 18:37:54,590 - INFO -     Text element 0: 'Reply'
2025-05-10 18:37:54,699 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 18:37:54,804 - INFO -   Cell 4: Size 428x78 at position (0,611)
2025-05-10 18:37:55,164 - INFO -   Cell 4 has 2 text elements
2025-05-10 18:37:55,259 - INFO -     Text element 0: 'Reply'
2025-05-10 18:37:55,363 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 18:37:57,831 - INFO - Found 26 total text elements in the UI
2025-05-10 18:38:00,402 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 18:38:00,402 - INFO - Text length: 793 characters
2025-05-10 18:38:00,402 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 18:38:00,402 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 18:38:00,460 - INFO - Extracting recipe from text...
2025-05-10 18:38:06,721 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 18:38:06,728 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:38:06,728 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': "Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. A quick and easy dish that's perfect for weeknight meals or entertaining.", 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 18:38:09,861 - INFO - Dismissed comments sheet successfully.
2025-05-10 18:38:09,862 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 18:38:12,859 - INFO - Successfully exited post view before recipe processing.
2025-05-10 18:38:12,859 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 18:38:12,859 - INFO - Added source URL to recipe details: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:38:12,860 - INFO - Recipe extraction successful.
2025-05-10 18:38:12,860 - INFO - Generating PDF from extracted recipe details...
2025-05-10 18:38:12,862 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:38:13,109 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 18:38:13,109 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746927492.pdf
2025-05-10 18:38:13,110 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746927492.pdf
2025-05-10 18:38:13,111 - INFO - [DELTA] Input chars: 793, Output chars: 611, Ratio: 0.77, Label: under-extracted
2025-05-10 18:38:13,111 - INFO - Logging usage event for user=docteurzed
2025-05-10 18:38:14,958 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 18:38:14,959 - INFO - Sending PDF to user's email...
2025-05-10 18:38:15,367 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 18:38:18,535 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 18:38:18,536 - INFO - PDF sent via email successfully.
2025-05-10 18:38:25,768 - INFO - Returning to inbox...
2025-05-10 18:38:31,996 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:38:31,997 - INFO - User memory saved successfully
2025-05-10 18:38:31,997 - INFO - Returning to inbox...
2025-05-10 18:38:32,213 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:38:32,470 - ERROR - All back button strategies failed
2025-05-10 18:38:32,471 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 18:38:32,856 - INFO - DM inbox indicator found successfully
2025-05-10 18:38:32,856 - INFO - DM inbox state verified.
2025-05-10 18:38:32,856 - INFO - Inbox already detected despite back button failure.
2025-05-10 18:38:32,857 - INFO - Finished processing current unread threads.
2025-05-10 18:38:33,865 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:38:34,160 - INFO - Found 0 thread(s) in total
2025-05-10 18:38:34,160 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:38:39,172 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:38:39,503 - INFO - Found 0 thread(s) in total
2025-05-10 18:38:39,503 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:38:44,518 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:38:44,853 - INFO - Found 0 thread(s) in total
2025-05-10 18:38:44,853 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:38:49,875 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:38:50,199 - INFO - Found 0 thread(s) in total
2025-05-10 18:38:50,199 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:38:55,216 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:38:55,519 - INFO - Found 0 thread(s) in total
2025-05-10 18:38:55,519 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:00,541 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:00,847 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:00,847 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:05,871 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:06,188 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:06,189 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:11,202 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:11,518 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:11,518 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:16,534 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:16,867 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:16,867 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:21,884 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:22,372 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:22,373 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:27,382 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:27,688 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:27,688 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:32,714 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:33,039 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:33,039 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:38,056 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:38,371 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:38,372 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:43,390 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:43,704 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:43,705 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:48,721 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:49,045 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:49,046 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:54,065 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:54,379 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:54,380 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:39:59,395 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:39:59,673 - INFO - Found 0 thread(s) in total
2025-05-10 18:39:59,673 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:04,694 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:05,007 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:05,007 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:10,026 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:10,362 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:10,362 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:15,381 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:15,693 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:15,693 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:20,713 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:21,040 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:21,040 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:26,059 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:26,374 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:26,374 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:31,386 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:31,671 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:31,672 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:36,684 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:37,006 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:37,006 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:42,024 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:42,340 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:42,341 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:47,355 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:47,670 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:47,671 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:52,688 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:53,005 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:53,005 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:40:58,025 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:40:58,333 - INFO - Found 0 thread(s) in total
2025-05-10 18:40:58,334 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:03,348 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:03,660 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:03,660 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:08,678 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:09,014 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:09,015 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:14,037 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:14,355 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:14,356 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:19,378 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:19,699 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:19,700 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:24,717 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:25,056 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:25,056 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:30,069 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:30,394 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:30,394 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:35,408 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:35,626 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:35,627 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:40,642 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:40,969 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:40,970 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:45,990 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:46,317 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:46,317 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:51,341 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:51,652 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:51,652 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:41:56,668 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:41:56,996 - INFO - Found 0 thread(s) in total
2025-05-10 18:41:56,996 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:02,015 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:02,345 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:02,345 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:07,367 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:07,708 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:07,708 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:12,732 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:13,071 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:13,071 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:18,096 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:18,421 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:18,421 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:23,435 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:23,760 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:23,760 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:28,781 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:29,101 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:29,101 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:34,117 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:34,439 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:34,440 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:39,459 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:39,774 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:39,774 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:44,792 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:45,120 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:45,120 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:50,138 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:50,444 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:50,444 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:42:55,466 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:42:55,772 - INFO - Found 0 thread(s) in total
2025-05-10 18:42:55,772 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:00,790 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:01,090 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:01,090 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:06,108 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:06,419 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:06,419 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:11,434 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:11,746 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:11,746 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:16,768 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:17,087 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:17,088 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:22,102 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:22,416 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:22,417 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:27,437 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:27,768 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:27,768 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:32,790 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:33,032 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:33,032 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:38,045 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:38,355 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:38,355 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:43,370 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:43,689 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:43,689 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:48,701 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:48,989 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:48,989 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:54,008 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:54,263 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:54,263 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:43:59,282 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:43:59,535 - INFO - Found 0 thread(s) in total
2025-05-10 18:43:59,535 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:04,555 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:04,786 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:04,786 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:09,808 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:10,132 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:10,133 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:15,147 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:15,363 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:15,363 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:20,386 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:20,709 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:20,709 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:25,718 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:26,034 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:26,034 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:31,055 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:31,373 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:31,373 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:36,390 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:36,712 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:36,712 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:41,731 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:42,051 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:42,052 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:47,070 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:47,379 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:47,379 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:52,397 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:52,726 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:52,727 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:44:57,744 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:44:58,031 - INFO - Found 0 thread(s) in total
2025-05-10 18:44:58,032 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:03,049 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:03,443 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:03,444 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:08,457 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:08,713 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:08,713 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:13,725 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:14,009 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:14,009 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:19,025 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:19,346 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:19,346 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:24,364 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:24,686 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:24,686 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:29,694 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:30,012 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:30,013 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:35,034 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:35,238 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:35,238 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:40,245 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:40,505 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:40,505 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:45,520 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:45,781 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:45,781 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:50,798 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:51,054 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:51,054 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:45:56,069 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:45:56,386 - INFO - Found 0 thread(s) in total
2025-05-10 18:45:56,386 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:01,399 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:01,661 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:01,661 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:06,675 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:06,938 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:06,938 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:11,962 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:12,219 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:12,219 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:17,237 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:17,497 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:17,497 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:22,516 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:22,770 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:22,770 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:27,786 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:28,050 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:28,051 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:33,064 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:33,296 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:33,296 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:38,314 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:38,639 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:38,640 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:43,658 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:43,980 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:43,980 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:49,006 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:49,328 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:49,328 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:54,348 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:54,654 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:54,654 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:46:59,673 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:46:59,992 - INFO - Found 0 thread(s) in total
2025-05-10 18:46:59,992 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:05,008 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:05,315 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:05,315 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:10,335 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:10,561 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:10,561 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:15,588 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:15,934 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:15,934 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:20,952 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:21,278 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:21,278 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:26,296 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:26,602 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:26,602 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:31,617 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:31,943 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:31,943 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:36,959 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:37,280 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:37,280 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:42,296 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:42,618 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:42,618 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:47,637 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:47,961 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:47,962 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:52,986 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:53,309 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:53,309 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:47:58,324 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:47:58,638 - INFO - Found 0 thread(s) in total
2025-05-10 18:47:58,638 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:03,660 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:03,974 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:03,975 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:09,001 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:09,328 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:09,328 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:14,341 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:14,660 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:14,660 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:19,680 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:19,994 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:19,994 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:25,011 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:25,324 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:25,324 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:30,339 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:30,674 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:30,674 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:35,694 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:36,007 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:36,007 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:41,030 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:41,353 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:41,353 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:46,373 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:46,699 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:46,699 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:51,709 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:51,998 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:51,998 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:48:57,028 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:48:57,286 - INFO - Found 0 thread(s) in total
2025-05-10 18:48:57,286 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:02,306 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:02,644 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:02,644 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:07,661 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:07,984 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:07,984 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:12,997 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:13,355 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:13,355 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:18,372 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:18,688 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:18,688 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:23,709 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:24,039 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:24,039 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:49:29,061 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:49:29,376 - INFO - Found 0 thread(s) in total
2025-05-10 18:49:29,377 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:50:02,531 - INFO - Starting Instagram Recipe Extractor
2025-05-10 18:50:02,531 - INFO - Initializing Appium driver...
2025-05-10 18:50:05,741 - INFO - Driver initialized successfully.
2025-05-10 18:50:05,743 - INFO - Loaded memory for 4 users
2025-05-10 18:50:05,743 - INFO - Waiting for Instagram app to load...
2025-05-10 18:50:10,748 - INFO - Navigating to DMs...
2025-05-10 18:50:14,909 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 18:50:15,294 - INFO - DM inbox indicator found successfully
2025-05-10 18:50:15,294 - INFO - DM inbox state verified.
2025-05-10 18:50:15,294 - INFO - Starting message scanning loop
2025-05-10 18:50:20,315 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:50:20,782 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 18:50:20,782 - INFO - Found 1 thread(s) in total
2025-05-10 18:50:20,783 - INFO - Processing thread 1 of 1
2025-05-10 18:50:21,375 - INFO - Identified user: docteurzed
2025-05-10 18:50:22,227 - INFO - Direct click on thread successful
2025-05-10 18:50:24,677 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 18:50:24,677 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:50:24,722 - INFO - Saved cropped post image for docteurzed
2025-05-10 18:50:27,392 - INFO - Verifying preview element using XPath...
2025-05-10 18:50:27,854 - INFO - Found preview element with rect: {'y': -159, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 18:50:28,251 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 18:50:28,251 - INFO - User docteurzed is already onboarded
2025-05-10 18:50:28,251 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 18:50:36,765 - INFO - Checking for shared recipe post...
2025-05-10 18:50:37,527 - INFO - Found a shared post, opening it...
2025-05-10 18:50:38,522 - INFO - Tapped on post with mobile: tap command
2025-05-10 18:50:49,056 - INFO - Checking if caption needs expansion...
2025-05-10 18:50:49,274 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 18:50:52,357 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 18:50:54,361 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 18:50:55,380 - INFO - [QR DEBUG] Searching for QR code cell...
2025-05-10 18:50:55,622 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 18:50:56,008 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 18:50:56,706 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 18:50:56,707 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 18:51:00,301 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:51:00,301 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:51:00,301 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 18:51:00,521 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 18:51:01,054 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 18:51:03,056 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 18:51:03,057 - INFO - Waiting briefly to stabilize UI after QR modal...
2025-05-10 18:51:04,559 - INFO - Attempting to click caption expansion link...
2025-05-10 18:51:04,883 - INFO - Found caption expansion link at position: {'y': 804, 'x': 343, 'width': 11, 'height': 18}
2025-05-10 18:51:05,633 - INFO - Clicked caption expansion link successfully
2025-05-10 18:51:07,638 - INFO - Extracting recipe caption...
2025-05-10 18:51:08,832 - INFO - Successfully extracted caption (793 chars)
2025-05-10 18:51:08,832 - INFO - Caption saved to captions/caption_docteurzed_1746928268.txt
2025-05-10 18:51:08,832 - INFO - Extracting caption and comments using unified parser...
2025-05-10 18:51:08,832 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 18:51:08,832 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 18:51:08,832 - INFO - Looking for comments button...
2025-05-10 18:51:09,790 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 18:51:11,453 - INFO - Tapped on comments button
2025-05-10 18:51:13,793 - INFO - Analyzing UI for comment elements...
2025-05-10 18:51:18,411 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 18:51:18,813 - INFO - Found 2 collection views
2025-05-10 18:51:18,952 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 18:51:19,303 - INFO - Collection view 0 has 1 cells
2025-05-10 18:51:19,452 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 18:51:20,040 - INFO -   Cell 0 has 4 text elements
2025-05-10 18:51:20,156 - INFO -     Text element 0: 'March 1'
2025-05-10 18:51:20,266 - INFO -     Text element 1: '256 comments'
2025-05-10 18:51:20,371 - INFO -     Text element 2: '196 shares'
2025-05-10 18:51:20,472 - INFO -     Text element 3: 'FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHO...'
2025-05-10 18:51:20,472 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 3
2025-05-10 18:51:20,472 - INFO -     Text length: 793 characters
2025-05-10 18:51:20,473 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem3.txt
2025-05-10 18:51:20,637 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 18:51:21,723 - INFO - Collection view 1 has 8 cells
2025-05-10 18:51:21,841 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 18:51:22,235 - INFO -   Cell 0 has 2 text elements
2025-05-10 18:51:22,341 - INFO -     Text element 0: 'Reply'
2025-05-10 18:51:22,455 - INFO -     Text element 1: 'enf.eats said, Oh my goodness 😍'
2025-05-10 18:51:22,566 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 18:51:22,938 - INFO -   Cell 1 has 2 text elements
2025-05-10 18:51:23,052 - INFO -     Text element 0: 'Reply'
2025-05-10 18:51:23,170 - INFO -     Text element 1: 'eastmicrogreens.nyc said, 🔥🔥🔥🔥🔥'
2025-05-10 18:51:23,280 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 18:51:23,658 - INFO -   Cell 2 has 2 text elements
2025-05-10 18:51:23,771 - INFO -     Text element 0: 'Reply'
2025-05-10 18:51:23,882 - INFO -     Text element 1: 'saphiaayesha said, 😍😍😍😍'
2025-05-10 18:51:24,014 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 18:51:24,414 - INFO -   Cell 3 has 2 text elements
2025-05-10 18:51:24,522 - INFO -     Text element 0: 'Reply'
2025-05-10 18:51:24,626 - INFO -     Text element 1: 'zulfi.zulu said, Absolutely blissful'
2025-05-10 18:51:24,735 - INFO -   Cell 4: Size 428x78 at position (0,649)
2025-05-10 18:51:25,132 - INFO -   Cell 4 has 2 text elements
2025-05-10 18:51:25,240 - INFO -     Text element 0: 'Reply'
2025-05-10 18:51:25,336 - INFO -     Text element 1: 'ksnice_n_spice said, @zulfi.zulu 🙌🏽 Comment was wr...'
2025-05-10 18:51:28,106 - INFO - Found 26 total text elements in the UI
2025-05-10 18:51:31,070 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 18:51:31,070 - INFO - Text length: 793 characters
2025-05-10 18:51:31,071 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 18:51:31,071 - INFO - [DEBUG] Submitting extracted comment to Claude:

FINGERLICKING GARLIC HERB BUTTER TANDOORI LAMB CHOPS AND MINT SAUCE 🇮🇳🤤💥🤯💃🏽💰🚦💯🙏🏽😍⚡️💣❤️🔥,
Succulent Juicy an Explosion of flavours Garlic herb butter lamb chops, it is shockingly quick and easy to make as well. Lamb chops is bursting with bold, smoky, and as-spicy-as-you-want-it flavors, super juicy, with my delicious mint sauce. This is going straight to the “favourite” file. It makes a fabulous easy weeknight meal that can go directly on the grill once marinated or is tasty enough for prep ahead entertaining. Used @walkerswood green seasoning 🔥🔥🔥. Sells at @tescofood 
.
.
DM FOR MORE INFO TO GET MY DAILY RECIPES. Recipe comes with my delicious mint sauce recipe, 
.
.
#lambchops #food #goodfood #recipe #love #newyork #newjersey #texas #atlanta #florida #tandoorilambchops #indianfood

2025-05-10 18:51:31,128 - INFO - Extracting recipe from text...
2025-05-10 18:51:37,842 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 18:51:37,853 - INFO - Successfully extracted recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:51:37,853 - INFO - [DEBUG] Claude returned recipe object: {'title': 'Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce', 'description': 'Succulent juicy lamb chops bursting with bold, smoky, and spicy flavors, topped with garlic herb butter and served with a delicious mint sauce. Shockingly quick and easy to make, perfect for an easy weeknight meal or entertaining.', 'ingredients': [{'quantity': None, 'unit': None, 'name': 'lamb chops'}, {'quantity': None, 'unit': None, 'name': 'garlic'}, {'quantity': None, 'unit': None, 'name': 'herb butter'}, {'quantity': None, 'unit': None, 'name': 'tandoori spices'}, {'quantity': None, 'unit': None, 'name': "Walker's Wood green seasoning"}, {'quantity': None, 'unit': None, 'name': 'ingredients for mint sauce (not specified)'}], 'instructions': ["Marinate the lamb chops with tandoori spices and Walker's Wood green seasoning", 'Grill the marinated lamb chops', 'Top with garlic herb butter', 'Serve with mint sauce'], 'prep_time': None, 'cook_time': None, 'total_time': None, 'servings': None, 'dietary_info': [], 'difficulty': 'easy'}
2025-05-10 18:51:41,051 - INFO - Dismissed comments sheet successfully.
2025-05-10 18:51:41,052 - INFO - Exiting expanded post view after caption extraction...
2025-05-10 18:51:44,075 - INFO - Successfully exited post view before recipe processing.
2025-05-10 18:51:44,076 - INFO - Proceeding with recipe extraction from Claude output...
2025-05-10 18:51:44,076 - INFO - Added source URL to recipe details: https://instagram.com/p/DGqG_AyounQ/?utm_source=qr
2025-05-10 18:51:44,077 - INFO - Recipe extraction successful.
2025-05-10 18:51:44,077 - INFO - Generating PDF from extracted recipe details...
2025-05-10 18:51:44,078 - INFO - Generating PDF for recipe: Garlic Herb Butter Tandoori Lamb Chops with Mint Sauce
2025-05-10 18:51:44,329 - INFO - PDF cache set for post_hash 3bfc269594ef649228e9a74bab00f042efc91d5acc6fbee31a382e80d42388fe
2025-05-10 18:51:44,329 - INFO - PDF generated successfully: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746928304.pdf
2025-05-10 18:51:44,329 - INFO - PDF generated at: ./pdfs/Garlic_Herb_Butter_Tandoori_Lamb_Chops_with_Mint_S_1746928304.pdf
2025-05-10 18:51:44,330 - INFO - [DELTA] Input chars: 793, Output chars: 624, Ratio: 0.79, Label: under-extracted
2025-05-10 18:51:44,330 - INFO - Logging usage event for user=docteurzed
2025-05-10 18:51:46,277 - INFO - Usage event logged successfully for user=docteurzed
2025-05-10 18:51:46,278 - INFO - Sending PDF to user's email...
2025-05-10 18:51:46,735 - ERROR - SMTP_SSL failed: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1028), trying SMTP with STARTTLS
2025-05-10 18:51:50,189 - INFO - PDF emailed successfully to shahinz@mac.com using STARTTLS
2025-05-10 18:51:50,189 - INFO - PDF sent via email successfully.
2025-05-10 18:51:57,283 - INFO - Returning to inbox...
2025-05-10 18:52:03,543 - INFO - Successfully returned to DM inbox using back button
2025-05-10 18:52:03,544 - INFO - User memory saved successfully
2025-05-10 18:52:03,544 - INFO - Returning to inbox...
2025-05-10 18:52:03,731 - ERROR - Error using back button: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 18:52:03,936 - ERROR - All back button strategies failed
2025-05-10 18:52:03,936 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 18:52:04,236 - INFO - DM inbox indicator found successfully
2025-05-10 18:52:04,237 - INFO - DM inbox state verified.
2025-05-10 18:52:04,237 - INFO - Inbox already detected despite back button failure.
2025-05-10 18:52:04,237 - INFO - Finished processing current unread threads.
2025-05-10 18:52:05,241 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:52:05,563 - INFO - Found 0 thread(s) in total
2025-05-10 18:52:05,563 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:52:10,575 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:52:10,899 - INFO - Found 0 thread(s) in total
2025-05-10 18:52:10,899 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 18:52:15,914 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 18:52:16,248 - INFO - Found 0 thread(s) in total
2025-05-10 18:52:16,248 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:02:28,095 - INFO - Starting Instagram Recipe Extractor
2025-05-10 19:02:28,095 - INFO - Initializing Appium driver...
2025-05-10 19:02:31,311 - INFO - Driver initialized successfully.
2025-05-10 19:02:31,313 - INFO - Loaded memory for 4 users
2025-05-10 19:02:31,313 - INFO - Waiting for Instagram app to load...
2025-05-10 19:02:36,318 - INFO - Navigating to DMs...
2025-05-10 19:02:40,842 - INFO - Waiting for DM inbox indicator, timeout: 10s
2025-05-10 19:02:41,197 - INFO - DM inbox indicator found successfully
2025-05-10 19:02:41,197 - INFO - DM inbox state verified.
2025-05-10 19:02:41,197 - INFO - Starting message scanning loop
2025-05-10 19:02:46,219 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:02:46,477 - INFO - Found 0 thread(s) in total
2025-05-10 19:02:46,478 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:02:51,498 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:02:51,756 - INFO - Found 0 thread(s) in total
2025-05-10 19:02:51,756 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:02:56,781 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:02:57,037 - INFO - Found 0 thread(s) in total
2025-05-10 19:02:57,037 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:03:02,059 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:03:02,312 - INFO - Found 0 thread(s) in total
2025-05-10 19:03:02,313 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:03:07,329 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:03:07,581 - INFO - Found 0 thread(s) in total
2025-05-10 19:03:07,581 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:03:12,600 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:03:13,078 - INFO - Found 1 unread thread(s) using XPath
2025-05-10 19:03:13,078 - INFO - Found 1 thread(s) in total
2025-05-10 19:03:13,079 - INFO - Processing thread 1 of 1
2025-05-10 19:03:13,640 - INFO - Identified user: docteurzed
2025-05-10 19:03:14,450 - INFO - Direct click on thread successful
2025-05-10 19:03:17,185 - INFO - Using fixed screen scale factor: 3.00
2025-05-10 19:03:17,186 - INFO - Screenshot taken at images/full_screenshot_docteurzed.png, preview element rect: {'y': 525, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 19:03:17,229 - INFO - Saved cropped post image for docteurzed
2025-05-10 19:03:19,880 - INFO - Verifying preview element using XPath...
2025-05-10 19:03:20,300 - INFO - Found preview element with rect: {'y': -140, 'x': 56, 'width': 160, 'height': 288}
2025-05-10 19:03:20,659 - INFO - Saved screenshot with bounding box overlay to: verification/preview_box_overlay.png
2025-05-10 19:03:20,659 - INFO - User docteurzed is already onboarded
2025-05-10 19:03:20,659 - INFO - Scrolling to bottom of conversation to see most recent messages...
2025-05-10 19:03:29,213 - INFO - Checking for shared recipe post...
2025-05-10 19:03:29,914 - INFO - Found a shared post, opening it...
2025-05-10 19:03:30,721 - INFO - Tapped on post with mobile: tap command
2025-05-10 19:03:41,226 - INFO - Checking if caption needs expansion...
2025-05-10 19:03:41,405 - INFO - Tapping on 'More options' to expand caption or open QR modal...
2025-05-10 19:03:44,415 - INFO - Saved UI hierarchy after tapping more-options-button
2025-05-10 19:03:46,420 - INFO - ============== QR CODE FLOW: START ==============
2025-05-10 19:03:47,980 - INFO - [QR DEBUG] Searching for QR code cell...
2025-05-10 19:03:48,258 - INFO - [QR DEBUG] Found QR code cell using iOS class chain selector!
2025-05-10 19:03:48,594 - INFO - [QR DEBUG] Attempting direct .click() method
2025-05-10 19:03:49,317 - INFO - [QR DEBUG] QR code cell clicked successfully via .click()
2025-05-10 19:03:49,317 - INFO - [QR DEBUG] ======= QR CODE CELL CLICK COMPLETE =======
2025-05-10 19:03:52,798 - INFO - [QR DEBUG] Decoded URL from QR: https://instagram.com/p/DJV-fitzpfH/?utm_source=qr
2025-05-10 19:03:52,798 - INFO - [QR DEBUG] Successfully extracted URL from QR: https://instagram.com/p/DJV-fitzpfH/?utm_source=qr
2025-05-10 19:03:52,798 - INFO - [QR DEBUG] Looking for 'Done' button...
2025-05-10 19:03:53,000 - INFO - [QR DEBUG] Found 'Done' button, clicking...
2025-05-10 19:03:53,532 - INFO - [QR DEBUG] Clicked 'Done' button
2025-05-10 19:03:55,537 - INFO - ============== QR CODE FLOW: END ==============
2025-05-10 19:03:55,538 - INFO - Waiting briefly to stabilize UI after QR modal...
2025-05-10 19:03:57,043 - INFO - Attempting to click caption expansion link...
2025-05-10 19:03:57,284 - INFO - Found caption expansion link at position: {'y': 804, 'x': 339, 'width': 11, 'height': 18}
2025-05-10 19:03:57,976 - INFO - Clicked caption expansion link successfully
2025-05-10 19:03:59,980 - INFO - Extracting recipe caption...
2025-05-10 19:04:00,965 - INFO - Successfully extracted caption (505 chars)
2025-05-10 19:04:00,968 - INFO - Caption saved to captions/caption_docteurzed_1746929040.txt
2025-05-10 19:04:00,968 - INFO - Extracting caption and comments using unified parser...
2025-05-10 19:04:00,968 - ERROR - Unified caption+comment extraction failed: name 'extract_caption' is not defined
2025-05-10 19:04:00,968 - INFO - Trying to extract recipe from pinned comment block...
2025-05-10 19:04:00,968 - INFO - Looking for comments button...
2025-05-10 19:04:01,787 - INFO - Found comment button using -ios class chain: **/XCUIElementTypeButton[`name CONTAINS "comment" OR label CONTAINS "comment"`]
2025-05-10 19:04:03,348 - INFO - Tapped on comments button
2025-05-10 19:04:05,606 - INFO - Analyzing UI for comment elements...
2025-05-10 19:04:10,230 - INFO - UI hierarchy saved to ui_hierarchy.txt
2025-05-10 19:04:10,638 - INFO - Found 2 collection views
2025-05-10 19:04:10,783 - INFO - Collection view 0: Size 428x845 at position (0,0)
2025-05-10 19:04:11,125 - INFO - Collection view 0 has 1 cells
2025-05-10 19:04:11,264 - INFO -   Cell 0: Size 428x843 at position (0,0)
2025-05-10 19:04:11,773 - INFO -   Cell 0 has 3 text elements
2025-05-10 19:04:11,855 - INFO -     Text element 0: '4 days ago'
2025-05-10 19:04:11,958 - INFO -     Text element 1: '12 comments'
2025-05-10 19:04:12,066 - INFO -     Text element 2: '"The Thousand-Year Compass That Guided a Civilizat...'
2025-05-10 19:04:12,066 - INFO -     POTENTIAL RECIPE FOUND in collection view 0, cell 0, text element 2
2025-05-10 19:04:12,066 - INFO -     Text length: 505 characters
2025-05-10 19:04:12,066 - INFO -     Recipe text saved to debug_screenshots/potential_recipe_cv0_cell0_elem2.txt
2025-05-10 19:04:12,227 - INFO - Collection view 1: Size 428x635 at position (0,291)
2025-05-10 19:04:13,446 - INFO - Collection view 1 has 8 cells
2025-05-10 19:04:13,549 - INFO -   Cell 0: Size 428x81 at position (0,335)
2025-05-10 19:04:13,937 - INFO -   Cell 0 has 2 text elements
2025-05-10 19:04:14,027 - INFO -     Text element 0: 'Reply'
2025-05-10 19:04:14,130 - INFO -     Text element 1: 'santosels said, 👏👏'
2025-05-10 19:04:14,235 - INFO -   Cell 1: Size 428x78 at position (0,415)
2025-05-10 19:04:14,587 - INFO -   Cell 1 has 2 text elements
2025-05-10 19:04:14,701 - INFO -     Text element 0: 'Reply'
2025-05-10 19:04:14,802 - INFO -     Text element 1: 'yasaman.afshr2022 said, 😍😍😍😍😍'
2025-05-10 19:04:14,907 - INFO -   Cell 2: Size 428x78 at position (0,492)
2025-05-10 19:04:15,286 - INFO -   Cell 2 has 2 text elements
2025-05-10 19:04:15,391 - INFO -     Text element 0: 'Reply'
2025-05-10 19:04:15,496 - INFO -     Text element 1: 'yasaman.afshr2022 said, 👏👏👏👏👏👏'
2025-05-10 19:04:15,609 - INFO -   Cell 3: Size 428x81 at position (0,569)
2025-05-10 19:04:16,098 - INFO -   Cell 3 has 3 text elements
2025-05-10 19:04:16,210 - INFO -     Text element 0: 'Reply'
2025-05-10 19:04:16,321 - INFO -     Text element 1: 'See translation'
2025-05-10 19:04:16,421 - INFO -     Text element 2: 'maria.carelli.56 said, Que genial admirable los tr...'
2025-05-10 19:04:16,531 - INFO -   Cell 4: Size 428x81 at position (0,649)
2025-05-10 19:04:17,064 - INFO -   Cell 4 has 2 text elements
2025-05-10 19:04:17,155 - INFO -     Text element 0: 'Reply'
2025-05-10 19:04:17,254 - INFO -     Text element 1: 'surj.pal__singh__0008 said, 😍😍🙌❤️'
2025-05-10 19:04:19,979 - INFO - Found 26 total text elements in the UI
2025-05-10 19:04:22,699 - INFO - POTENTIAL RECIPE FOUND in standalone text element 25
2025-05-10 19:04:22,699 - INFO - Text length: 505 characters
2025-05-10 19:04:22,699 - INFO - Recipe text saved to debug_screenshots/potential_recipe_standalone_elem25.txt
2025-05-10 19:04:22,700 - INFO - [DEBUG] Submitting extracted comment to Claude:

"The Thousand-Year Compass That Guided a Civilization!" 🧭✨📜🇨🇳⏳

Description:
Discover how the ancient Chinese compass didn't just point north—it pointed an entire civilization toward progress. From seafaring voyages to modern navigation, every needle turn is a story of innovation and wisdom.
"Every needle is a legacy of wisdom; every turn is an echo of history."

Hashtags:
#AncientChina #CompassWisdom #FourGreatInventions #HistoryReel #LegacyOfInnovation #reels #instragram #trending #usa #wildplatter

2025-05-10 19:04:22,756 - INFO - Extracting recipe from text...
2025-05-10 19:04:27,555 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-10 19:04:27,564 - WARNING - Claude response doesn't contain a valid recipe
2025-05-10 19:04:27,564 - WARNING - No valid recipe extracted
2025-05-10 19:04:27,564 - WARNING - Claude response did not yield a valid recipe.
2025-05-10 19:04:30,683 - INFO - Dismissed comments sheet successfully.
2025-05-10 19:04:30,683 - ERROR - No recipe found in caption or pinned comment.
2025-05-10 19:04:30,683 - INFO - Attempting to exit post/comment view...
2025-05-10 19:04:42,174 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 19:04:45,348 - ERROR - Timeout waiting for DM inbox indicator
2025-05-10 19:04:45,348 - WARNING - DM inbox indicator not found within 3 seconds: Message: An element could not be located on the page using the given search parameters.; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
NoSuchElementError: An element could not be located on the page using the given search parameters.
    at XCUITestDriver.doNativeFind (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:143:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at XCUITestDriver.findNativeElementOrElements (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:97:12)
    at XCUITestDriver.findElOrEls (/Users/shahin/.appium/node_modules/appium-xcuitest-driver/lib/commands/find.js:24:14)
    at XCUITestDriver.findElOrElsWithProcessing (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:60:12)
    at XCUITestDriver.findElement (/opt/homebrew/lib/node_modules/appium/node_modules/@appium/base-driver/lib/basedriver/commands/find.ts:75:12)
2025-05-10 19:04:46,333 - INFO - Strict DM inbox verification successful: DM threads found.
2025-05-10 19:04:49,668 - INFO - Waiting for DM inbox indicator, timeout: 3s
2025-05-10 19:04:50,132 - INFO - DM inbox indicator found successfully
2025-05-10 19:04:50,132 - INFO - DM inbox state verified.
2025-05-10 19:04:51,138 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:04:51,453 - INFO - Found 0 thread(s) in total
2025-05-10 19:04:51,453 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:04:56,472 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:04:56,781 - INFO - Found 0 thread(s) in total
2025-05-10 19:04:56,781 - INFO - No unread messages found. Will scan again in 5 seconds...
2025-05-10 19:05:01,794 - INFO - Scanning for unread messages (every 5 seconds)...
2025-05-10 19:05:02,096 - INFO - Found 0 thread(s) in total
2025-05-10 19:05:02,096 - INFO - No unread messages found. Will scan again in 5 seconds...
